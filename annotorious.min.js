function i(a){throw a;}var k=void 0,m=!0,p=null,q=!1;function s(){return function(){}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}var u,ca=this;function da(a,c){var d=a.split("."),e=ca;!(d[0]in e)&&e.execScript&&e.execScript("var "+d[0]);for(var f;d.length&&(f=d.shift());)!d.length&&ea(c)?e[f]=c:e=e[f]?e[f]:e[f]={}}function fa(){}function ga(a){a.rb=function(){return a.Fd?a.Fd:a.Fd=new a}}
function ha(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c}function ea(a){return a!==k}function ia(a){return"array"==ha(a)}function ja(a){var c=ha(a);return"array"==c||"object"==c&&"number"==typeof a.length}function v(a){return"string"==typeof a}function w(a){return"function"==ha(a)}function ka(a){var c=typeof a;return"object"==c&&a!=p||"function"==c}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),na=0;
function oa(a,c,d){return a.call.apply(a.bind,arguments)}function pa(a,c,d){a||i(Error());if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return a.apply(c,d)}}return function(){return a.apply(c,arguments)}}function qa(a,c,d){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(p,arguments)}
function ra(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,d);return a.apply(this,c)}}var sa=Date.now||function(){return+new Date};function x(a,c){function d(){}d.prototype=c.prototype;a.K=c.prototype;a.prototype=new d;a.prototype.constructor=a};function ta(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ua(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(za,"&quot;"));return a}var wa=/&/g,xa=/</g,ya=/>/g,za=/\"/g,va=/[&<>\"]/;function Aa(a){return String(a).replace(/\-([a-z])/g,function(a,d){return d.toUpperCase()})};var y=Array.prototype,Ba=y.indexOf?function(a,c,d){return y.indexOf.call(a,c,d)}:function(a,c,d){d=d==p?0:0>d?Math.max(0,a.length+d):d;if(v(a))return!v(c)||1!=c.length?-1:a.indexOf(c,d);for(;d<a.length;d++)if(d in a&&a[d]===c)return d;return-1},C=y.forEach?function(a,c,d){y.forEach.call(a,c,d)}:function(a,c,d){for(var e=a.length,f=v(a)?a.split(""):a,h=0;h<e;h++)h in f&&c.call(d,f[h],h,a)},Ca=y.filter?function(a,c,d){return y.filter.call(a,c,d)}:function(a,c,d){for(var e=a.length,f=[],h=0,j=v(a)?a.split(""):
a,l=0;l<e;l++)if(l in j){var n=j[l];c.call(d,n,l,a)&&(f[h++]=n)}return f},Da=y.map?function(a,c,d){return y.map.call(a,c,d)}:function(a,c,d){for(var e=a.length,f=Array(e),h=v(a)?a.split(""):a,j=0;j<e;j++)j in h&&(f[j]=c.call(d,h[j],j,a));return f},Ea=y.every?function(a,c,d){return y.every.call(a,c,d)}:function(a,c,d){for(var e=a.length,f=v(a)?a.split(""):a,h=0;h<e;h++)if(h in f&&!c.call(d,f[h],h,a))return q;return m};
function Fa(a,c){var d;a:{d=a.length;for(var e=v(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&c.call(k,e[f],f,a)){d=f;break a}d=-1}return 0>d?p:v(a)?a.charAt(d):a[d]}function Ga(a,c){return 0<=Ba(a,c)}function E(a,c){var d=Ba(a,c);0<=d&&y.splice.call(a,d,1)}function Ha(a){var c=a.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=a[e];return d}return[]}
function Ia(a,c){for(var d=1;d<arguments.length;d++){var e=arguments[d],f;if(ia(e)||(f=ja(e))&&e.hasOwnProperty("callee"))a.push.apply(a,e);else if(f)for(var h=a.length,j=e.length,l=0;l<j;l++)a[h+l]=e[l];else a.push(e)}}function Ja(a,c,d){return 2>=arguments.length?y.slice.call(a,c):y.slice.call(a,c,d)}function Ka(a,c){return a>c?1:a<c?-1:0};var La,Ma,Na,Oa,Pa;function Qa(){return ca.navigator?ca.navigator.userAgent:p}function Ra(){return ca.navigator}Oa=Na=Ma=La=q;var Sa;if(Sa=Qa()){var Ta=Ra();La=0==Sa.indexOf("Opera");Ma=!La&&-1!=Sa.indexOf("MSIE");Na=!La&&-1!=Sa.indexOf("WebKit");Oa=!La&&!Na&&"Gecko"==Ta.product}var Ua=La,F=Ma,G=Oa,H=Na,Va=Ra();Pa=-1!=(Va&&Va.platform||"").indexOf("Mac");var Wa=!!Ra()&&-1!=(Ra().appVersion||"").indexOf("X11"),Xa;
a:{var Ya="",Za;if(Ua&&ca.opera)var $a=ca.opera.version,Ya="function"==typeof $a?$a():$a;else if(G?Za=/rv\:([^\);]+)(\)|;)/:F?Za=/MSIE\s+([^\);]+)(\)|;)/:H&&(Za=/WebKit\/(\S+)/),Za)var ab=Za.exec(Qa()),Ya=ab?ab[1]:"";if(F){var bb,cb=ca.document;bb=cb?cb.documentMode:k;if(bb>parseFloat(Ya)){Xa=String(bb);break a}}Xa=Ya}var db={};
function I(a){var c;if(!(c=db[a])){c=0;for(var d=ta(String(Xa)).split("."),e=ta(String(a)).split("."),f=Math.max(d.length,e.length),h=0;0==c&&h<f;h++){var j=d[h]||"",l=e[h]||"",n=RegExp("(\\d*)(\\D*)","g"),t=RegExp("(\\d*)(\\D*)","g");do{var z=n.exec(j)||["","",""],B=t.exec(l)||["","",""];if(0==z[0].length&&0==B[0].length)break;c=((0==z[1].length?0:parseInt(z[1],10))<(0==B[1].length?0:parseInt(B[1],10))?-1:(0==z[1].length?0:parseInt(z[1],10))>(0==B[1].length?0:parseInt(B[1],10))?1:0)||((0==z[2].length)<
(0==B[2].length)?-1:(0==z[2].length)>(0==B[2].length)?1:0)||(z[2]<B[2]?-1:z[2]>B[2]?1:0)}while(0==c)}c=db[a]=0<=c}return c}var eb={};function fb(a){return eb[a]||(eb[a]=F&&!!document.documentMode&&document.documentMode>=a)};var gb,hb=!F||fb(9);!G&&!F||F&&fb(9)||G&&I("1.9.1");F&&I("9");var ib=F||Ua||H;function jb(a){a=a.className;return v(a)&&a.match(/\S+/g)||[]}function kb(a,c){var d=jb(a),e=Ja(arguments,1),f=d.length+e.length;lb(d,e);a.className=d.join(" ");return d.length==f}function mb(a,c){var d=jb(a),e=Ja(arguments,1),f=nb(d,e);a.className=f.join(" ");return f.length==d.length-e.length}function lb(a,c){for(var d=0;d<c.length;d++)Ga(a,c[d])||a.push(c[d])}function nb(a,c){return Ca(a,function(a){return!Ga(c,a)})}
function ob(a,c,d){var e=jb(a);v(c)?E(e,c):ia(c)&&(e=nb(e,c));v(d)&&!Ga(e,d)?e.push(d):ia(d)&&lb(e,d);a.className=e.join(" ")};function J(a,c){this.x=ea(a)?a:0;this.y=ea(c)?c:0};function pb(a,c){this.width=a;this.height=c}pb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};pb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function qb(a,c){for(var d in a)c.call(k,a[d],d,a)}var rb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sb(a,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)a[d]=e[d];for(var h=0;h<rb.length;h++)d=rb[h],Object.prototype.hasOwnProperty.call(e,d)&&(a[d]=e[d])}};function tb(a){return a?new ub(vb(a)):gb||(gb=new ub)}function wb(){var a,c,d,e;a=document;if(a.querySelectorAll&&a.querySelector)return a.querySelectorAll(".openseadragon-container");if(a.getElementsByClassName){var f=a.getElementsByClassName("openseadragon-container");return f}f=a.getElementsByTagName("*");e={};for(c=d=0;a=f[c];c++){var h=a.className;"function"==typeof h.split&&Ga(h.split(/\s+/),"openseadragon-container")&&(e[d++]=a)}e.length=d;return e}
function xb(a,c){qb(c,function(c,e){"style"==e?a.style.cssText=c:"class"==e?a.className=c:"for"==e?a.htmlFor=c:e in yb?a.setAttribute(yb[e],c):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,c):a[e]=c})}var yb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function zb(a,c,d){var e=arguments,f=document,h=e[0],j=e[1];if(!hb&&j&&(j.name||j.type)){h=["<",h];j.name&&h.push(' name="',ua(j.name),'"');if(j.type){h.push(' type="',ua(j.type),'"');var l={};sb(l,j);delete l.type;j=l}h.push(">");h=h.join("")}h=f.createElement(h);j&&(v(j)?h.className=j:ia(j)?kb.apply(p,[h].concat(j)):xb(h,j));2<e.length&&Ab(f,h,e,2);return h}
function Ab(a,c,d,e){function f(d){d&&c.appendChild(v(d)?a.createTextNode(d):d)}for(;e<d.length;e++){var h=d[e];if(ja(h)&&!(ka(h)&&0<h.nodeType)){var j;a:{if(h&&"number"==typeof h.length){if(ka(h)){j="function"==typeof h.item||"string"==typeof h.item;break a}if(w(h)){j="function"==typeof h.item;break a}}j=q}C(j?Ha(h):h,f)}else f(h)}}function Bb(a){for(var c;c=a.firstChild;)a.removeChild(c)}function Cb(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Db(a){return ka(a)&&1==a.nodeType}
function Eb(a,c){if(a.contains&&1==c.nodeType)return a==c||a.contains(c);if("undefined"!=typeof a.compareDocumentPosition)return a==c||Boolean(a.compareDocumentPosition(c)&16);for(;c&&a!=c;)c=c.parentNode;return c==a}function vb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Fb(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?(a=a.tabIndex,"number"==typeof a&&0<=a&&32768>a):q}function ub(a){this.N=a||ca.document||document}u=ub.prototype;u.ud=tb;
u.e=function(a){return v(a)?this.N.getElementById(a):a};u.ja=xb;u.createElement=function(a){return this.N.createElement(a)};u.createTextNode=function(a){return this.N.createTextNode(a)};function Gb(a){var c=a.N,a=!H?c.documentElement:c.body,c=c.parentWindow||c.defaultView;return new J(c.pageXOffset||a.scrollLeft,c.pageYOffset||a.scrollTop)}u.appendChild=function(a,c){a.appendChild(c)};u.append=function(a,c){Ab(vb(a),a,arguments,1)};u.contains=Eb;var Hb;Hb=ba(m);/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function Ib(a,c){var d=c||[];a&&d.push(a);return d}var Jb=H&&"BackCompat"==document.compatMode,Kb=document.firstChild.children?"children":"childNodes",Lb=q;
function Mb(a){function c(){0<=t&&(A.id=d(t,D).replace(/\\/g,""),t=-1);if(0<=z){var a=z==D?p:d(z,D);0>">~+".indexOf(a)?A.H=a:A.Sb=a;z=-1}0<=n&&(A.da.push(d(n+1,D).replace(/\\/g,"")),n=-1)}function d(c,d){return ta(a.slice(c,d))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",e=[],f=-1,h=-1,j=-1,l=-1,n=-1,t=-1,z=-1,B="",K="",Y,D=0,Pe=a.length,A=p,S=p;B=K,K=a.charAt(D),D<Pe;D++)if("\\"!=B)if(A||(Y=D,A={Xa:p,Ea:[],Cb:[],da:[],H:p,Sb:p,id:p,Cc:function(){return Lb?this.ne:this.H}},z=D),0<=f)if("]"==
K){S.xc?S.Jc=d(j||f+1,D):S.xc=d(f+1,D);if((f=S.Jc)&&('"'==f.charAt(0)||"'"==f.charAt(0)))S.Jc=f.slice(1,-1);A.Cb.push(S);S=p;f=j=-1}else"="==K&&(j=0<="|~^$*".indexOf(B)?B:"",S.type=j+K,S.xc=d(f+1,D-j.length),j=D+1);else 0<=h?")"==K&&(0<=l&&(S.value=d(h+1,D)),l=h=-1):"#"==K?(c(),t=D+1):"."==K?(c(),n=D):":"==K?(c(),l=D):"["==K?(c(),f=D,S={}):"("==K?(0<=l&&(S={name:d(l+1,D),value:p},A.Ea.push(S)),h=D):" "==K&&B!=K&&(c(),0<=l&&A.Ea.push({name:d(l+1,D)}),A.Id=A.Ea.length||A.Cb.length||A.da.length,A.Fe=
A.Xa=d(Y,D),A.ne=A.H=A.Sb?p:A.H||"*",A.H&&(A.H=A.H.toUpperCase()),e.length&&e[e.length-1].Sb&&(A.Ed=e.pop(),A.Xa=A.Ed.Xa+" "+A.Xa),e.push(A),A=p);return e}function Nb(a,c){return!a?c:!c?a:function(){return a.apply(window,arguments)&&c.apply(window,arguments)}}function Ob(a){return 1==a.nodeType}function Pb(a,c){return!a?"":"class"==c?a.className||"":"for"==c?a.htmlFor||"":"style"==c?a.style.cssText||"":(Lb?a.getAttribute(c):a.getAttribute(c,2))||""}
var Qb={"*=":function(a,c){return function(d){return 0<=Pb(d,a).indexOf(c)}},"^=":function(a,c){return function(d){return 0==Pb(d,a).indexOf(c)}},"$=":function(a,c){return function(d){d=" "+Pb(d,a);return d.lastIndexOf(c)==d.length-c.length}},"~=":function(a,c){var d=" "+c+" ";return function(c){return 0<=(" "+Pb(c,a)+" ").indexOf(d)}},"|=":function(a,c){c=" "+c;return function(d){d=" "+Pb(d,a);return d==c||0==d.indexOf(c+"-")}},"=":function(a,c){return function(d){return Pb(d,a)==c}}},Rb="undefined"==
typeof document.firstChild.nextElementSibling,Sb=!Rb?"nextElementSibling":"nextSibling",Tb=!Rb?"previousElementSibling":"previousSibling",Ub=Rb?Ob:Hb;function Vb(a){for(;a=a[Tb];)if(Ub(a))return q;return m}function Wb(a){for(;a=a[Sb];)if(Ub(a))return q;return m}function Xb(a){var c=a.parentNode,d=0,e=c[Kb],f=a._i||-1,h=c._l||-1;if(!e)return-1;e=e.length;if(h==e&&0<=f&&0<=h)return f;c._l=e;f=-1;for(c=c.firstElementChild||c.firstChild;c;c=c[Sb])Ub(c)&&(c._i=++d,a===c&&(f=d));return f}
function Yb(a){return!(Xb(a)%2)}function Zb(a){return Xb(a)%2}
var ac={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Vb},"last-child":function(){return Wb},"only-child":function(){return function(a){return!Vb(a)||!Wb(a)?q:m}},empty:function(){return function(a){for(var c=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var d=c[a].nodeType;if(1===d||3==d)return q}return m}},contains:function(a,c){var d=c.charAt(0);if('"'==d||"'"==d)c=c.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(c)}},
not:function(a,c){var d=Mb(c)[0],e={D:1};"*"!=d.H&&(e.H=1);d.da.length||(e.da=1);var f=$b(d,e);return function(a){return!f(a)}},"nth-child":function(a,c){if("odd"==c)return Zb;if("even"==c)return Yb;if(-1!=c.indexOf("n")){var d=c.split("n",2),e=d[0]?"-"==d[0]?-1:parseInt(d[0],10):1,f=d[1]?parseInt(d[1],10):0,h=0,j=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(h=f-f%e),f%=e):0>e&&(e*=-1,0<f&&(j=f,f%=e));if(0<e)return function(a){a=Xb(a);return a>=h&&(0>j||a<=j)&&a%e==f};c=f}var l=parseInt(c,10);return function(a){return Xb(a)==
l}}},bc=F?function(a){var c=a.toLowerCase();"class"==c&&(a="className");return function(d){return Lb?d.getAttribute(a):d[a]||d[c]}}:function(a){return function(c){return c&&c.getAttribute&&c.hasAttribute(a)}};
function $b(a,c){if(!a)return Hb;var c=c||{},d=p;c.D||(d=Nb(d,Ob));c.H||"*"!=a.H&&(d=Nb(d,function(c){return c&&c.tagName==a.Cc()}));c.da||C(a.da,function(a,c){var h=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");d=Nb(d,function(a){return h.test(a.className)});d.count=c});c.Ea||C(a.Ea,function(a){var c=a.name;ac[c]&&(d=Nb(d,ac[c](c,a.value)))});c.Cb||C(a.Cb,function(a){var c,h=a.xc;a.type&&Qb[a.type]?c=Qb[a.type](h,a.Jc):h.length&&(c=bc(h));c&&(d=Nb(d,c))});c.id||a.id&&(d=Nb(d,function(c){return!!c&&c.id==a.id}));
d||"default"in c||(d=Hb);return d}var cc={};
function dc(a){var c=cc[a.Xa];if(c)return c;var d=a.Ed,d=d?d.Sb:"",e=$b(a,{D:1}),f="*"==a.H,h=document.getElementsByClassName;if(d)if(h={D:1},f&&(h.H=1),e=$b(a,h),"+"==d)var j=e,c=function(a,c,d){for(;a=a[Sb];)if(!Rb||Ob(a)){(!d||ec(a,d))&&j(a)&&c.push(a);break}return c};else if("~"==d)var l=e,c=function(a,c,d){for(a=a[Sb];a;){if(Ub(a)){if(d&&!ec(a,d))break;l(a)&&c.push(a)}a=a[Sb]}return c};else{if(">"==d)var n=e,n=n||Hb,c=function(a,c,d){for(var e=0,f=a[Kb];a=f[e++];)Ub(a)&&((!d||ec(a,d))&&n(a,e))&&
c.push(a);return c}}else if(a.id)e=!a.Id&&f?Hb:$b(a,{D:1,id:1}),c=function(c,d){var f=tb(c).e(a.id),h;if(h=f&&e(f))if(!(h=9==c.nodeType)){for(h=f.parentNode;h&&h!=c;)h=h.parentNode;h=!!h}if(h)return Ib(f,d)};else if(h&&/\{\s*\[native code\]\s*\}/.test(String(h))&&a.da.length&&!Jb)var e=$b(a,{D:1,da:1,id:1}),t=a.da.join(" "),c=function(a,c){for(var d=Ib(0,c),f,h=0,j=a.getElementsByClassName(t);f=j[h++];)e(f,a)&&d.push(f);return d};else!f&&!a.Id?c=function(c,d){for(var e=Ib(0,d),f,h=0,j=c.getElementsByTagName(a.Cc());f=
j[h++];)e.push(f);return e}:(e=$b(a,{D:1,H:1,id:1}),c=function(c,d){for(var f=Ib(0,d),h,j=0,l=c.getElementsByTagName(a.Cc());h=l[j++];)e(h,c)&&f.push(h);return f});return cc[a.Xa]=c}var fc={},gc={};function hc(a){var c=Mb(ta(a));if(1==c.length){var d=dc(c[0]);return function(a){if(a=d(a,[]))a.Rb=m;return a}}return function(a){for(var a=Ib(a),d,h,j=c.length,l,n,t=0;t<j;t++){n=[];d=c[t];h=a.length-1;0<h&&(l={},n.Rb=m);h=dc(d);for(var z=0;d=a[z];z++)h(d,n,l);if(!n.length)break;a=n}return n}}
var ic=!!document.querySelectorAll&&(!H||I("526"));
function jc(a,c){if(ic){var d=gc[a];if(d&&!c)return d}if(d=fc[a])return d;var d=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&e&&(c=m);if(ic&&!c&&-1==">~+".indexOf(d)&&(!F||-1==a.indexOf(":"))&&!(Jb&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return gc[a]=function(c){try{9==c.nodeType||e||i("");var d=c.querySelectorAll(f);F?d.Zd=m:d.Rb=m;return d}catch(h){return jc(a,m)(c)}}}var h=a.split(/\s*,\s*/);return fc[a]=
2>h.length?hc(a):function(a){for(var c=0,d=[],e;e=h[c++];)d=d.concat(hc(e)(a));return d}}var kc=0,lc=F?function(a){return Lb?a.getAttribute("_uid")||a.setAttribute("_uid",++kc)||kc:a.uniqueID}:function(a){return a._uid||(a._uid=++kc)};function ec(a,c){if(!c)return 1;var d=lc(a);return!c[d]?c[d]=1:0}
function mc(a){if(a&&a.Rb)return a;var c=[];if(!a||!a.length)return c;a[0]&&c.push(a[0]);if(2>a.length)return c;kc++;if(F&&Lb){var d=kc+"";a[0].setAttribute("_zipIdx",d);for(var e=1,f;f=a[e];e++)a[e].getAttribute("_zipIdx")!=d&&c.push(f),f.setAttribute("_zipIdx",d)}else if(F&&a.Zd)try{for(e=1;f=a[e];e++)Ob(f)&&c.push(f)}catch(h){}else{a[0]&&(a[0]._zipIdx=kc);for(e=1;f=a[e];e++)a[e]._zipIdx!=kc&&c.push(f),f._zipIdx=kc}return c}
function L(a,c){if(!a)return[];if(a.constructor==Array)return a;if(!v(a))return[a];if(v(c)&&(c=v(c)?document.getElementById(c):c,!c))return[];var c=c||document,d=c.ownerDocument||c.documentElement;Lb=c.contentType&&"application/xml"==c.contentType||Ua&&(c.doctype||"[object XMLDocument]"==d.toString())||!!d&&(F?d.xml:c.xmlVersion||d.xmlVersion);return(d=jc(a)(c))&&d.Rb?d:mc(d)}L.Ea=ac;da("goog.dom.query",L);da("goog.dom.query.pseudos",L.Ea);var nc=!F||fb(9),oc=!F||fb(9),pc=F&&!I("9");!H||I("528");G&&I("1.9b")||F&&I("8")||Ua&&I("9.5")||H&&I("528");G&&!I("8")||F&&I("9");function qc(){0!=rc&&(this.ze=Error().stack,la(this))}var rc=0;qc.prototype.pd=q;function sc(a,c){this.type=a;this.currentTarget=this.target=c}u=sc.prototype;u.Da=q;u.defaultPrevented=q;u.Wb=m;u.stopPropagation=function(){this.Da=m};u.preventDefault=function(){this.defaultPrevented=m;this.Wb=q};function tc(a){a.preventDefault()};function uc(a){uc[" "](a);return a}uc[" "]=fa;function vc(a,c){a&&this.init(a,c)}x(vc,sc);var wc=[1,4,2];u=vc.prototype;u.target=p;u.relatedTarget=p;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=q;u.altKey=q;u.shiftKey=q;u.metaKey=q;u.Nc=q;u.n=p;
u.init=function(a,c){var d=this.type=a.type;sc.call(this,d);this.target=a.target||a.srcElement;this.currentTarget=c;var e=a.relatedTarget;if(e){if(G){var f;a:{try{uc(e.nodeName);f=m;break a}catch(h){}f=q}f||(e=p)}}else"mouseover"==d?e=a.fromElement:"mouseout"==d&&(e=a.toElement);this.relatedTarget=e;this.offsetX=H||a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=H||a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==d?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Nc=Pa?a.metaKey:a.ctrlKey;this.state=a.state;this.n=a;a.defaultPrevented&&this.preventDefault();delete this.Da};function xc(a){return(nc?0==a.n.button:"click"==a.type?m:!!(a.n.button&wc[0]))&&!(H&&Pa&&a.ctrlKey)}
u.stopPropagation=function(){vc.K.stopPropagation.call(this);this.n.stopPropagation?this.n.stopPropagation():this.n.cancelBubble=m};u.preventDefault=function(){vc.K.preventDefault.call(this);var a=this.n;if(a.preventDefault)a.preventDefault();else if(a.returnValue=q,pc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(c){}};u.$d=aa("n");function yc(){}var zc=0;u=yc.prototype;u.key=0;u.Fa=q;u.jd=q;u.init=function(a,c,d,e,f,h){w(a)?this.Hd=m:a&&a.handleEvent&&w(a.handleEvent)?this.Hd=q:i(Error("Invalid listener argument"));this.Wa=a;this.Ld=c;this.src=d;this.type=e;this.capture=!!f;this.Sa=h;this.jd=q;this.key=++zc;this.Fa=q};u.handleEvent=function(a){return this.Hd?this.Wa.call(this.Sa||this.src,a):this.Wa.handleEvent.call(this.Wa,a)};var Ac={},M={},Bc={},Cc={};
function N(a,c,d,e,f){if(c){if(ia(c)){for(var h=0;h<c.length;h++)N(a,c[h],d,e,f);return p}var e=!!e,j=M;c in j||(j[c]={m:0,P:0});j=j[c];e in j||(j[e]={m:0,P:0},j.m++);var j=j[e],l=la(a),n;j.P++;if(j[l]){n=j[l];for(h=0;h<n.length;h++)if(j=n[h],j.Wa==d&&j.Sa==f){if(j.Fa)break;return n[h].key}}else n=j[l]=[],j.m++;var t=Dc,z=oc?function(a){return t.call(z.src,z.key,a)}:function(a){a=t.call(z.src,z.key,a);if(!a)return a},h=z;h.src=a;j=new yc;j.init(d,h,a,c,e,f);d=j.key;h.key=d;n.push(j);Ac[d]=j;Bc[l]||
(Bc[l]=[]);Bc[l].push(j);a.addEventListener?(a==ca||!a.md)&&a.addEventListener(c,h,e):a.attachEvent(c in Cc?Cc[c]:Cc[c]="on"+c,h);return d}i(Error("Invalid event type"))}function Ec(a,c,d,e,f){if(ia(c))for(var h=0;h<c.length;h++)Ec(a,c[h],d,e,f);else if(e=!!e,a=Fc(a,c,e))for(h=0;h<a.length;h++)if(a[h].Wa==d&&a[h].capture==e&&a[h].Sa==f){Gc(a[h].key);break}}
function Gc(a){if(!Ac[a])return q;var c=Ac[a];if(c.Fa)return q;var d=c.src,e=c.type,f=c.Ld,h=c.capture;d.removeEventListener?(d==ca||!d.md)&&d.removeEventListener(e,f,h):d.detachEvent&&d.detachEvent(e in Cc?Cc[e]:Cc[e]="on"+e,f);d=la(d);Bc[d]&&(f=Bc[d],E(f,c),0==f.length&&delete Bc[d]);c.Fa=m;if(c=M[e][h][d])c.Kd=m,Hc(e,h,d,c);delete Ac[a];return m}
function Hc(a,c,d,e){if(!e.Mb&&e.Kd){for(var f=0,h=0;f<e.length;f++)e[f].Fa?e[f].Ld.src=p:(f!=h&&(e[h]=e[f]),h++);e.length=h;e.Kd=q;0==h&&(delete M[a][c][d],M[a][c].m--,0==M[a][c].m&&(delete M[a][c],M[a].m--),0==M[a].m&&delete M[a])}}function Fc(a,c,d){var e=M;return c in e&&(e=e[c],d in e&&(e=e[d],a=la(a),e[a]))?e[a]:p}
function Ic(a,c,d,e,f){var h=1,c=la(c);if(a[c]){a.P--;a=a[c];a.Mb?a.Mb++:a.Mb=1;try{for(var j=a.length,l=0;l<j;l++){var n=a[l];n&&!n.Fa&&(h&=Jc(n,f)!==q)}}finally{a.Mb--,Hc(d,e,c,a)}}return Boolean(h)}function Jc(a,c){a.jd&&Gc(a.key);return a.handleEvent(c)}
function Dc(a,c){if(!Ac[a])return m;var d=Ac[a],e=d.type,f=M;if(!(e in f))return m;var f=f[e],h,j;if(!oc){var l;if(!(l=c))a:{l=["window","event"];for(var n=ca;h=l.shift();)if(n[h]!=p)n=n[h];else{l=p;break a}l=n}h=l;l=m in f;n=q in f;if(l){if(0>h.keyCode||h.returnValue!=k)return m;a:{var t=q;if(0==h.keyCode)try{h.keyCode=-1;break a}catch(z){t=m}if(t||h.returnValue==k)h.returnValue=m}}t=new vc;t.init(h,this);h=m;try{if(l){for(var B=[],K=t.currentTarget;K;K=K.parentNode)B.push(K);j=f[m];j.P=j.m;for(var Y=
B.length-1;!t.Da&&0<=Y&&j.P;Y--)t.currentTarget=B[Y],h&=Ic(j,B[Y],e,m,t);if(n){j=f[q];j.P=j.m;for(Y=0;!t.Da&&Y<B.length&&j.P;Y++)t.currentTarget=B[Y],h&=Ic(j,B[Y],e,q,t)}}else h=Jc(d,t)}finally{B&&(B.length=0)}return h}e=new vc(c,this);return h=Jc(d,e)};function Kc(a){qc.call(this);this.Bd=a;this.j=[]}x(Kc,qc);var Lc=[];function O(a,c,d,e,f){ia(d)||(Lc[0]=d,d=Lc);for(var h=0;h<d.length;h++){var j=N(c,d[h],e||a,f||q,a.Bd||a);a.j.push(j)}return a}function Mc(a,c,d,e,f,h){if(ia(d))for(var j=0;j<d.length;j++)Mc(a,c,d[j],e,f,h);else{a:{e=e||a;h=h||a.Bd||a;f=!!f;if(c=Fc(c,d,f))for(d=0;d<c.length;d++)if(!c[d].Fa&&c[d].Wa==e&&c[d].capture==f&&c[d].Sa==h){c=c[d];break a}c=p}c&&(c=c.key,Gc(c),E(a.j,c))}return a}
Kc.prototype.Ub=function(){C(this.j,Gc);this.j.length=0};Kc.prototype.handleEvent=function(){i(Error("EventHandler.handleEvent not implemented"))};function Nc(){qc.call(this)}x(Nc,qc);u=Nc.prototype;u.md=m;u.Mc=p;u.Sc=function(a){this.Mc=a};u.addEventListener=function(a,c,d,e){N(this,a,c,d,e)};u.removeEventListener=function(a,c,d,e){Ec(this,a,c,d,e)};
u.dispatchEvent=function(a){var c=a.type||a,d=M;if(c in d){if(v(a))a=new sc(a,this);else if(a instanceof sc)a.target=a.target||this;else{var e=a,a=new sc(c,this);sb(a,e)}var e=1,f,d=d[c],c=m in d,h;if(c){f=[];for(h=this;h;h=h.Mc)f.push(h);h=d[m];h.P=h.m;for(var j=f.length-1;!a.Da&&0<=j&&h.P;j--)a.currentTarget=f[j],e&=Ic(h,f[j],a.type,m,a)&&a.Wb!=q}if(q in d)if(h=d[q],h.P=h.m,c)for(j=0;!a.Da&&j<f.length&&h.P;j++)a.currentTarget=f[j],e&=Ic(h,f[j],a.type,q,a)&&a.Wb!=q;else for(f=this;!a.Da&&f&&h.P;f=
f.Mc)a.currentTarget=f,e&=Ic(h,f,a.type,q,a)&&a.Wb!=q;a=Boolean(e)}else a=m;return a};function Oc(a,c,d,e){this.top=a;this.right=c;this.bottom=d;this.left=e}Oc.prototype.contains=function(a){return!this||!a?q:a instanceof Oc?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Pc(a,c,d,e){this.left=a;this.top=c;this.width=d;this.height=e}Pc.prototype.contains=function(a){return a instanceof Pc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function P(a,c,d){v(c)?Qc(a,d,c):qb(c,ra(Qc,a))}function Qc(a,c,d){a.style[Aa(d)]=c}function Q(a,c){var d=vb(a);return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(a,p))?d[c]||d.getPropertyValue(c)||"":""}function Rc(a,c){return a.currentStyle?a.currentStyle[c]:p}function Sc(a,c){return Q(a,c)||Rc(a,c)||a.style&&a.style[c]}function Tc(a,c,d){var e,f=G&&(Pa||Wa)&&I("1.9");c instanceof J?(e=c.x,c=c.y):(e=c,c=d);a.style.left=Uc(e,f);a.style.top=Uc(c,f)}
function Vc(a){var c=a.getBoundingClientRect();F&&(a=a.ownerDocument,c.left-=a.documentElement.clientLeft+a.body.clientLeft,c.top-=a.documentElement.clientTop+a.body.clientTop);return c}
function Wc(a){if(F&&!fb(8))return a.offsetParent;for(var c=vb(a),d=Sc(a,"position"),e="fixed"==d||"absolute"==d,a=a.parentNode;a&&a!=c;a=a.parentNode)if(d=Sc(a,"position"),e=e&&"static"==d&&a!=c.documentElement&&a!=c.body,!e&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==d||"absolute"==d||"relative"==d))return a;return p}
function Xc(a){var c,d=vb(a),e=Sc(a,"position"),f=G&&d.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==e&&(c=d.getBoxObjectFor(a))&&(0>c.screenX||0>c.screenY),h=new J(0,0),j;c=d?vb(d):document;if(j=F)if(j=!fb(9))tb(c),j=q;j=j?c.body:c.documentElement;if(a==j)return h;if(a.getBoundingClientRect)c=Vc(a),a=Gb(tb(d)),h.x=c.left+a.x,h.y=c.top+a.y;else if(d.getBoxObjectFor&&!f)c=d.getBoxObjectFor(a),a=d.getBoxObjectFor(j),h.x=c.screenX-a.screenX,h.y=c.screenY-a.screenY;else{f=a;do{h.x+=f.offsetLeft;
h.y+=f.offsetTop;f!=a&&(h.x+=f.clientLeft||0,h.y+=f.clientTop||0);if(H&&"fixed"==Sc(f,"position")){h.x+=d.body.scrollLeft;h.y+=d.body.scrollTop;break}f=f.offsetParent}while(f&&f!=a);if(Ua||H&&"absolute"==e)h.y-=d.body.offsetTop;for(f=a;(f=Wc(f))&&f!=d.body&&f!=j;)if(h.x-=f.scrollLeft,!Ua||"TR"!=f.tagName)h.y-=f.scrollTop}return h}function Yc(a,c){var d=Zc(a),e=Zc(c);return new J(d.x-e.x,d.y-e.y)}
function Zc(a){var c=new J;if(1==a.nodeType){if(a.getBoundingClientRect){var d=Vc(a);c.x=d.left;c.y=d.top}else{var d=Gb(tb(a)),e=Xc(a);c.x=e.x-d.x;c.y=e.y-d.y}if(G&&!I(12)){var f;F?f="-ms-transform":H?f="-webkit-transform":Ua?f="-o-transform":G&&(f="-moz-transform");var h;f&&(h=Sc(a,f));h||(h=Sc(a,"transform"));h?(a=h.match($c),a=!a?new J(0,0):new J(parseFloat(a[1]),parseFloat(a[2]))):a=new J(0,0);c=new J(c.x+a.x,c.y+a.y)}}else f=w(a.$d),h=a,a.targetTouches?h=a.targetTouches[0]:f&&a.n.targetTouches&&
(h=a.n.targetTouches[0]),c.x=h.clientX,c.y=h.clientY;return c}function ad(a,c,d){c instanceof pb?(d=c.height,c=c.width):d==k&&i(Error("missing height argument"));a.style.width=Uc(c,m);a.style.height=Uc(d,m)}function Uc(a,c){"number"==typeof a&&(a=(c?Math.round(a):a)+"px");return a}
function bd(a){if("none"!=Sc(a,"display"))return cd(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=cd(a);c.display=d;c.position=f;c.visibility=e;return a}function cd(a){var c=a.offsetWidth,d=a.offsetHeight,e=H&&!c&&!d;return(!ea(c)||e)&&a.getBoundingClientRect?(a=Vc(a),new pb(a.right-a.left,a.bottom-a.top)):new pb(c,d)}function dd(a){var c=Xc(a),a=bd(a);return new Pc(c.x,c.y,a.width,a.height)}
function R(a,c){var d=a.style;"opacity"in d?d.opacity=c:"MozOpacity"in d?d.MozOpacity=c:"filter"in d&&(d.filter=""===c?"":"alpha(opacity="+100*c+")")}function T(a,c){a.style.display=c?"":"none"}function ed(a){return"rtl"==Sc(a,"direction")}var fd=G?"MozUserSelect":H?"WebkitUserSelect":p;
function gd(a,c){if(/^\d+px?$/.test(c))return parseInt(c,10);var d=a.style.left,e=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=c;var f=a.style.pixelLeft;a.style.left=d;a.runtimeStyle.left=e;return f}
function hd(a,c){if(F){var d=gd(a,Rc(a,c+"Left")),e=gd(a,Rc(a,c+"Right")),f=gd(a,Rc(a,c+"Top")),h=gd(a,Rc(a,c+"Bottom"));return new Oc(f,e,h,d)}d=Q(a,c+"Left");e=Q(a,c+"Right");f=Q(a,c+"Top");h=Q(a,c+"Bottom");return new Oc(parseFloat(f),parseFloat(e),parseFloat(h),parseFloat(d))}var id={thin:2,medium:4,thick:6};function jd(a,c){if("none"==Rc(a,c+"Style"))return 0;var d=Rc(a,c+"Width");return d in id?id[d]:gd(a,d)}
function kd(a){if(F){var c=jd(a,"borderLeft"),d=jd(a,"borderRight"),e=jd(a,"borderTop"),a=jd(a,"borderBottom");return new Oc(e,d,a,c)}c=Q(a,"borderLeftWidth");d=Q(a,"borderRightWidth");e=Q(a,"borderTopWidth");a=Q(a,"borderBottomWidth");return new Oc(parseFloat(e),parseFloat(d),parseFloat(a),parseFloat(c))}var $c=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function ld(a,c,d){qc.call(this);this.target=a;this.handle=c||a;this.Hc=d||new Pc(NaN,NaN,NaN,NaN);this.N=vb(a);this.oa=new Kc(this);N(this.handle,["touchstart","mousedown"],this.re,q,this)}x(ld,Nc);var md=F||G&&I("1.9.3");u=ld.prototype;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.Pd=0;u.Qd=0;u.Ma=0;u.Na=0;u.qd=m;u.Aa=q;u.Dd=0;u.je=0;u.ge=q;u.Tc=q;u.Gb=aa("oa");function nd(a){ea(a.va)||(a.va=ed(a.target));return a.va}
u.re=function(a){var c="mousedown"==a.type;if(this.qd&&!this.Aa&&(!c||xc(a))){od(a);if(0==this.Dd)if(this.dispatchEvent(new pd("start",this,a.clientX,a.clientY,a)))this.Aa=m,a.preventDefault();else return;else a.preventDefault();var c=this.N,d=c.documentElement,e=!md;O(this.oa,c,["touchmove","mousemove"],this.ee,e);O(this.oa,c,["touchend","mouseup"],this.Eb,e);md?(d.setCapture(q),O(this.oa,d,"losecapture",this.Eb)):O(this.oa,c?c.parentWindow||c.defaultView:window,"blur",this.Eb);F&&this.ge&&O(this.oa,
c,"dragstart",tc);this.pe&&O(this.oa,this.pe,"scroll",this.me,e);this.clientX=this.Pd=a.clientX;this.clientY=this.Qd=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Tc?(a=this.target,c=a.offsetLeft,d=a.offsetParent,!d&&"fixed"==Sc(a,"position")&&(d=vb(a).documentElement),d?(G?(e=kd(d),c+=e.left):fb(8)&&(e=kd(d),c-=e.left),a=ed(d)?d.clientWidth-(c+a.offsetWidth):c):a=c):a=this.target.offsetLeft;this.Ma=a;this.Na=this.target.offsetTop;this.Lc=Gb(tb(this.N));this.je=sa()}else this.dispatchEvent("earlycancel")};
u.Eb=function(a,c){this.oa.Ub();md&&this.N.releaseCapture();if(this.Aa){od(a);this.Aa=q;var d=qd(this,this.Ma),e=rd(this,this.Na);this.dispatchEvent(new pd("end",this,a.clientX,a.clientY,a,d,e,c||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function od(a){var c=a.type;"touchstart"==c||"touchmove"==c?a.init(a.n.targetTouches[0],a.currentTarget):("touchend"==c||"touchcancel"==c)&&a.init(a.n.changedTouches[0],a.currentTarget)}
u.ee=function(a){if(this.qd){od(a);var c=(this.Tc&&nd(this)?-1:1)*(a.clientX-this.clientX),d=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Aa){var e=this.Pd-this.clientX,f=this.Qd-this.clientY;if(e*e+f*f>this.Dd)if(this.dispatchEvent(new pd("start",this,a.clientX,a.clientY,a)))this.Aa=m;else{this.pd||this.Eb(a);return}}d=sd(this,c,d);c=d.x;d=d.y;this.Aa&&this.dispatchEvent(new pd("beforedrag",this,a.clientX,a.clientY,a,
c,d))&&(td(this,a,c,d),a.preventDefault())}};function sd(a,c,d){var e=Gb(tb(a.N)),c=c+(e.x-a.Lc.x),d=d+(e.y-a.Lc.y);a.Lc=e;a.Ma+=c;a.Na+=d;c=qd(a,a.Ma);a=rd(a,a.Na);return new J(c,a)}u.me=function(a){var c=sd(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;td(this,a,c.x,c.y)};function td(a,c,d,e){a.od(d,e);a.dispatchEvent(new pd("drag",a,c.clientX,c.clientY,c,d,e))}
function qd(a,c){var d=a.Hc,e=!isNaN(d.left)?d.left:p,d=!isNaN(d.width)?d.width:0;return Math.min(e!=p?e+d:Infinity,Math.max(e!=p?e:-Infinity,c))}function rd(a,c){var d=a.Hc,e=!isNaN(d.top)?d.top:p,d=!isNaN(d.height)?d.height:0;return Math.min(e!=p?e+d:Infinity,Math.max(e!=p?e:-Infinity,c))}u.od=function(a,c){this.Tc&&nd(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=c+"px"};
function pd(a,c,d,e,f,h,j,l){sc.call(this,a);this.clientX=d;this.clientY=e;this.xe=f;this.left=ea(h)?h:c.Ma;this.top=ea(j)?j:c.Na;this.Be=c;this.Ae=!!l}x(pd,sc);function ud(a){for(var c=0,d=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft-a.scrollLeft,d+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:d,left:c}};function vd(){this.bb=[]}vd.prototype.addHandler=function(a,c){this.bb[a]||(this.bb[a]=[]);this.bb[a].push(c)};vd.prototype.Vb=function(a,c){var d=this.bb[a];d&&E(d,c)};vd.prototype.fireEvent=function(a,c,d){var e=q;(a=this.bb[a])&&C(a,function(a){a=a(c,d);ea(a)&&!a&&(e=m)});return e};function wd(a,c){this.$={};this.j=[];var d=arguments.length;if(1<d){d%2&&i(Error("Uneven number of arguments"));for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+1])}else if(a){var f;if(a instanceof wd)xd(a),f=a.j.concat(),e=U(a);else{var d=[],h=0;for(f in a)d[h++]=f;f=d;d=[];h=0;for(e in a)d[h++]=a[e];e=d}for(d=0;d<f.length;d++)this.set(f[d],e[d])}}u=wd.prototype;u.m=0;u.Uc=0;function U(a){xd(a);for(var c=[],d=0;d<a.j.length;d++)c.push(a.$[a.j[d]]);return c}
u.clear=function(){this.$={};this.Uc=this.m=this.j.length=0};u.remove=function(a){return yd(this.$,a)?(delete this.$[a],this.m--,this.Uc++,this.j.length>2*this.m&&xd(this),m):q};function xd(a){if(a.m!=a.j.length){for(var c=0,d=0;c<a.j.length;){var e=a.j[c];yd(a.$,e)&&(a.j[d++]=e);c++}a.j.length=d}if(a.m!=a.j.length){for(var f={},d=c=0;c<a.j.length;)e=a.j[c],yd(f,e)||(a.j[d++]=e,f[e]=1),c++;a.j.length=d}}u.get=function(a,c){return yd(this.$,a)?this.$[a]:c};
u.set=function(a,c){yd(this.$,a)||(this.m++,this.j.push(a),this.Uc++);this.$[a]=c};function yd(a,c){return Object.prototype.hasOwnProperty.call(a,c)};function zd(a,c){this.x=a;this.y=c};function Ad(a){this.points=a}function Bd(a){for(var c=0,d=a.length-1,e=0;e<a.length;e++)c+=(a[d].x+a[e].x)*(a[d].y-a[e].y),d=e;return c/2}
function Cd(a,c){for(var d,e=d=0,f,h=a.length-1,j=0;j<a.length;j++)f=a[j].x*a[h].y-a[h].x*a[j].y,d+=(a[j].x+a[h].x)*f,e+=(a[j].y+a[h].y)*f,h=j;f=6*Bd(a);d=new zd(Math.abs(d/f),Math.abs(e/f));e=[];for(f=0;f<a.length;f++){var h=a[f],l=(0>Bd(a)?-1:1)*c,j=h.x-d.x,n=h.y-d.y,t=0<l?1:0>l?-1:0,l=Math.sqrt(Math.pow(l,2)/(1+Math.pow(j/n,2)));e.push({x:h.x+Math.abs(j/n*l)*(0<j?1:0>j?-1:0)*t,y:h.y+Math.abs(l)*(0<n?1:0>n?-1:0)*t})}return e};function Dd(a,c,d,e){0<d?(this.x=a,this.width=d):(this.x=a+d,this.width=-d);0<e?(this.y=c,this.height=e):(this.y=c+e,this.height=-e)};function Ed(a,c,d,e){this.type=a;this.geometry=c;d&&(this.units=d);this.style=e?e:{}}function Fd(a){return"rect"==a.type?a.geometry.width*a.geometry.height:"polygon"==a.type?Math.abs(Bd(a.geometry.points)):0}function Gd(a){if("rect"==a.type)return a;if("polygon"==a.type){for(var c=a.geometry.points,d=c[0].x,e=c[0].x,f=c[0].y,h=c[0].y,j=1;j<c.length;j++)c[j].x>e&&(e=c[j].x),c[j].x<d&&(d=c[j].x),c[j].y>h&&(h=c[j].y),c[j].y<f&&(f=c[j].y);return new Ed("rect",new Dd(d,f,e-d,h-f),q,a.style)}}
function Hd(a,c){var d;d=a.geometry.points;var e=0>Bd(d)?-1:1;if(4>d.length)d=Cd(d,e*c);else{for(var f=d.length-1,h=1,j=[],l=0;l<d.length;l++)f=Cd([d[f],d[l],d[h]],e*c),j.push(f[1]),f=l,h++,h>d.length-1&&(h=0);d=j}return new Ed("polygon",new Ad(d),q,a.style)}function Id(a,c){if("rect"==a.type){var d=c(a.geometry);return new Ed("rect",d,q,a.style)}if("polygon"==a.type){var e=[];C(a.geometry.points,function(a){e.push(c(a))});return new Ed("polygon",new Ad(e),q,a.style)}}
function Jd(a){return JSON.stringify(a.geometry)};function Kd(a,c,d){this.src=a;this.text=c;this.shapes=[d];this.context=document.URL};function Ld(){}function Md(a,c){a.h=new wd;a.vb=new wd;a.Xc=[];a.eb=[];a.Ja=[];a.Ha=[];a.kc=[];a.xb={Ua:q,Ta:q};a.Ia=new wd;a.mc=k;a.fd=c}function Nd(a,c){var d=a.Ia.get(c);d||(d={Ua:q,Ta:q},a.Ia.set(c,d));return d}
function Od(a,c){var d=a.Hb(c),e=c.id;if(!("undefined"!==typeof e&&a.vb.get(e))){var f=a.Kc(c);if("undefined"===typeof e||""===e)e=a.vb.m+1,c.setAttribute("id","annotorious_"+e.toString());a.vb.set(e,f);var h=[],j=[];C(a.Xc,function(a){f.addHandler(a.type,a.Sa)});C(a.eb,function(a){if(a.onInitAnnotator)a.onInitAnnotator(f)});C(a.Ha,function(a){a.src==d&&(f.J(a),h.push(a))});C(a.kc,function(a){a.src==d&&(f.A(a),j.push(a))});C(h,function(c){E(a.Ha,c)});C(j,function(c){E(a.kc,c)});(e=a.Ia.get(d))?(e.Ua&&
f.O(),e.Ta&&f.ha(),a.Ia.remove(d)):(a.xb.Ua&&f.O(),a.xb.Ta&&f.ha());a.mc&&f.ja(a.mc);a.h.set(d,f);E(a.Ja,c)}}function Pd(a){var c,d;for(d=a.Ja.length;0<d;d--){for(var e=c=a.Ja[d-1],f=e.offsetTop,h=e.offsetLeft,j=e.offsetWidth,l=e.offsetHeight;e.offsetParent;)e=e.offsetParent,f+=e.offsetTop,h+=e.offsetLeft;f<window.pageYOffset+window.innerHeight&&(h<window.pageXOffset+window.innerWidth&&f+l>window.pageYOffset&&h+j>window.pageXOffset)&&Od(a,c)}}
function Qd(a,c,d){if(c){var e=a.h.get(c);e?d?e.Ga():e.ha():Nd(a,c).Ta=d}else C(U(a.h),function(a){d?a.Ga():a.ha()}),a.xb.Ta=!d,C(U(a.Ia),function(a){a.Ta=!d})}function Rd(a,c,d){if(c){var e=a.h.get(c);e?d?e.aa():e.O():Nd(a,c).Ua=d}else C(U(a.h),function(a){d?a.aa():a.O()}),a.xb.Ua=!d,C(U(a.Ia),function(a){a.Ua=!d})}u=Ld.prototype;u.ca=function(a,c){var d=k,e=k;v(a)?(d=a,e=c):w(a)&&(e=a);d?(d=this.h.get(d))&&d.ca(e):C(U(this.h),function(a){a.ca(e)})};
u.J=function(a,c){if(Sd(this,a.src)){var d=this.h.get(a.src);d?d.J(a,c):(this.Ha.push(a),c&&E(this.Ha,c))}};u.addHandler=function(a,c){C(U(this.h),function(d){d.addHandler(a,c)});this.Xc.push({type:a,Sa:c})};u.Bb=function(a){this.eb.push(a);C(U(this.h),function(c){if(a.onInitAnnotator)a.onInitAnnotator(c)})};function Sd(a,c){return yd(a.h.$,c)?m:Fa(a.Ja,function(d){return a.Hb(d)==c})!=p}u.Bc=function(){C(U(this.vb),function(a){console.log(a)})};
u.destroy=function(a){if(a){var c=this.h.get(a);c&&(c.destroy(),this.h.remove(a))}else C(U(this.h),function(a){a.destroy()}),this.h.clear()};u.pa=function(a){if(Sd(this,a)&&(a=this.h.get(a)))return a.pa().getName()};u.w=function(a){if(a){var c=this.h.get(a);return c?c.w():Ca(this.Ha,function(c){return c.src==a})}var d=[];C(U(this.h),function(a){Ia(d,a.w())});Ia(d,this.Ha);return d};u.fa=function(a){if(a){if(a=this.h.get(a))return a.fa()}else{var c=[];C(U(this.h),function(a){Ia(c,a.fa())});return c}};
u.ga=function(a){if(Sd(this,a)&&(a=this.h.get(a)))return Da(a.ga(),function(a){return a.getName()})};u.ha=function(a){Qd(this,a,q)};u.O=function(a){Rd(this,a,q)};u.r=function(a){if(a){if(Sd(this,a.src)){var c=this.h.get(a.src);c&&c.r(a)}}else C(U(this.h),function(a){a.r()})};u.init=function(){this.fd&&Ia(this.Ja,this.fd());Pd(this);var a=this,c=N(window,"scroll",function(){0<a.Ja.length?Pd(a):Gc(c)})};u.Ic=function(a){this.Yb(a)&&Od(this,a)};
u.A=function(a){if(Sd(this,a.src)){var c=this.h.get(a.src);c?c.A(a):this.kc.push(a)}};u.Oc=function(a){this.h.get(a).stopSelection()};u.ub=function(a,c){if(Sd(this,a)){var d=this.h.get(a);d&&d.Nd(c)}};u.ja=function(a){this.mc=a;C(U(this.h),function(c){c.ja(a)})};u.ua=function(a,c){if(a){var d=this.h.get(a);d&&d.ua(c)}};u.Ga=function(a){Qd(this,a,m)};u.aa=function(a){Rd(this,a,m)};function Td(a,c){var d=tb().createElement("DIV");d.innerHTML=a(c||Ud,k,k);if(1==d.childNodes.length){var e=d.firstChild;if(1==e.nodeType)return e}return d}var Ud={};function Vd(a,c){a!=p&&this.append.apply(this,arguments)}u=Vd.prototype;u.za="";u.set=function(a){this.za=""+a};u.append=function(a,c,d){this.za+=a;if(c!=p)for(var e=1;e<arguments.length;e++)this.za+=arguments[e];return this};u.clear=function(){this.za=""};u.toString=aa("za");/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function Wd(){}
var Xd={De:"<",Ce:">",ve:"&",Ee:"\u00a0",Ge:'"',we:"'"},Yd={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,
ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},Zd=/&/g,$d=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,ae=/</g,be=/>/g,ce=/\"/g,de=/=/g,ee=/\0/g,fe=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,ge=/^#(\d+)$/,he=/^#x([0-9A-Fa-f]+)$/,ie=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)",
"i"),je=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?--\>|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");
Wd.prototype.parse=function(a,c){var d=p,e=q,f=[],h,j,l;a.R=[];for(a.ra=q;c;){var n=c.match(e?ie:je),c=c.substring(n[0].length);if(e)if(n[1]){var t=n[1].toLowerCase();if(n[2]){n=n[3];switch(n.charCodeAt(0)){case 34:case 39:n=n.substring(1,n.length-1)}n=n.replace(ee,"").replace(fe,qa(this.he,this))}else n=t;f.push(t,n)}else n[4]&&(j!==k&&(l?a.Od&&a.Od(h,f):a.rd&&a.rd(h)),l&&j&12&&(d=d===p?c.toLowerCase():d.substring(d.length-c.length),e=d.indexOf("</"+h),0>e&&(e=c.length),j&4?a.kd&&a.kd(c.substring(0,
e)):a.Md&&a.Md(c.substring(0,e).replace($d,"&amp;$1").replace(ae,"&lt;").replace(be,"&gt;")),c=c.substring(e)),h=j=l=k,f.length=0,e=q);else if(n[1])ke(a,n[0]);else if(n[3])l=!n[2],e=m,h=n[3].toLowerCase(),j=Yd.hasOwnProperty(h)?Yd[h]:k;else if(n[4])ke(a,n[4]);else if(n[5])switch(n[5]){case "<":ke(a,"&lt;");break;case ">":ke(a,"&gt;");break;default:ke(a,"&amp;")}}for(d=a.R.length;0<=--d;)a.ka.append("</",a.R[d],">");a.R.length=0};
Wd.prototype.he=function(a){a=a.toLowerCase();if(Xd.hasOwnProperty(a))return Xd[a];var c=a.match(ge);return c?String.fromCharCode(parseInt(c[1],10)):(c=a.match(he))?String.fromCharCode(parseInt(c[1],16)):""};function le(){};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function me(a,c,d){this.ka=a;this.R=[];this.ra=q;this.Sd=c;this.Qb=d}x(me,le);
var ne={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,
"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,
"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,
"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,
"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,
"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};
me.prototype.Od=function(a,c){if(!this.ra&&Yd.hasOwnProperty(a)){var d=Yd[a];if(!(d&32))if(d&16)this.ra=!(d&2);else{for(var e=c,f=0;f<e.length;f+=2){var h=e[f],j=e[f+1],l=p,n;if((n=a+"::"+h,ne.hasOwnProperty(n))||(n="*::"+h,ne.hasOwnProperty(n)))l=ne[n];if(l!==p)switch(l){case 0:break;case 2:case 3:j=p;break;case 4:case 5:case 6:case 7:case 8:case 9:j=this.Qb?this.Qb(j):j;break;case 1:j=this.Sd&&this.Sd(j);break;case 11:j&&"#"===j.charAt(0)?(j=this.Qb?this.Qb(j):j)&&(j="#"+j):j=p;break;default:j=
p}else j=p;e[f+1]=j}if(c=e){d&2||this.R.push(a);this.ka.append("<",a);d=0;for(e=c.length;d<e;d+=2)f=c[d],h=c[d+1],h!==p&&h!==k&&this.ka.append(" ",f,'="',h.replace(Zd,"&amp;").replace(ae,"&lt;").replace(be,"&gt;").replace(ce,"&#34;").replace(de,"&#61;"),'"');this.ka.append(">")}}}};
me.prototype.rd=function(a){if(this.ra)this.ra=q;else if(Yd.hasOwnProperty(a)){var c=Yd[a];if(!(c&50)){if(c&1)for(c=this.R.length;0<=--c;){var d=this.R[c];if(d===a)break;if(!(Yd[d]&1))return}else for(c=this.R.length;0<=--c&&this.R[c]!==a;);if(!(0>c)){for(var e=this.R.length;--e>c;)d=this.R[e],Yd[d]&1||this.ka.append("</",d,">");this.R.length=c;this.ka.append("</",a,">")}}}};function ke(a,c){a.ra||a.ka.append(c)}me.prototype.Md=function(a){this.ra||this.ka.append(a)};
me.prototype.kd=function(a){this.ra||this.ka.append(a)};function oe(a,c,d,e,f){if(!F&&(!H||!I("525")))return m;if(Pa&&f)return pe(a);if(f&&!e||!d&&(17==c||18==c)||F&&e&&c==a)return q;switch(a){case 13:return!(F&&fb(9));case 27:return!H}return pe(a)}function pe(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||H&&0==a)return m;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return m;default:return q}}
function qe(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function re(a,c){qc.call(this);a&&se(this,a,c)}x(re,Nc);u=re.prototype;u.F=p;u.Kb=p;u.Fc=p;u.Lb=p;u.ta=-1;u.sa=-1;u.wc=q;
var te={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},ue={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},ve=F||H&&I("525"),we=Pa&&G;u=re.prototype;
u.be=function(a){if(H&&(17==this.ta&&!a.ctrlKey||18==this.ta&&!a.altKey))this.sa=this.ta=-1;ve&&!oe(a.keyCode,this.ta,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.sa=G?qe(a.keyCode):a.keyCode,we&&(this.wc=a.altKey))};u.de=function(a){this.sa=this.ta=-1;this.wc=a.altKey};
u.handleEvent=function(a){var c=a.n,d,e,f=c.altKey;F&&"keypress"==a.type?(d=this.sa,e=13!=d&&27!=d?c.keyCode:0):H&&"keypress"==a.type?(d=this.sa,e=0<=c.charCode&&63232>c.charCode&&pe(d)?c.charCode:0):Ua?(d=this.sa,e=pe(d)?c.keyCode:0):(d=c.keyCode||this.sa,e=c.charCode||0,we&&(f=this.wc),Pa&&(63==e&&224==d)&&(d=191));var h=d,j=c.keyIdentifier;d?63232<=d&&d in te?h=te[d]:25==d&&a.shiftKey&&(h=9):j&&j in ue&&(h=ue[j]);a=h==this.ta;this.ta=h;c=new xe(h,e,a,c);c.altKey=f;this.dispatchEvent(c)};u.e=aa("F");
function se(a,c,d){a.Lb&&a.detach();a.F=c;a.Kb=N(a.F,"keypress",a,d);a.Fc=N(a.F,"keydown",a.be,d,a);a.Lb=N(a.F,"keyup",a.de,d,a)}u.detach=function(){this.Kb&&(Gc(this.Kb),Gc(this.Fc),Gc(this.Lb),this.Lb=this.Fc=this.Kb=p);this.F=p;this.sa=this.ta=-1};function xe(a,c,d,e){e&&this.init(e,k);this.type="key";this.keyCode=a;this.charCode=c;this.repeat=d}x(xe,vc);function ye(){}ga(ye);ye.prototype.le=0;ye.rb();function ze(a){qc.call(this);this.nb=a||tb();this.va=Ae}x(ze,Nc);ze.prototype.fe=ye.rb();var Ae=p;function Be(a,c){switch(a){case 1:return c?"disable":"enable";case 2:return c?"highlight":"unhighlight";case 4:return c?"activate":"deactivate";case 8:return c?"select":"unselect";case 16:return c?"check":"uncheck";case 32:return c?"focus":"blur";case 64:return c?"open":"close"}i(Error("Invalid component state"))}u=ze.prototype;u.Jb=p;u.ia=q;u.F=p;u.va=p;u.Ca=p;u.kb=p;u.La=p;u.te=q;u.e=aa("F");
u.Gb=function(){return this.Dc||(this.Dc=new Kc(this))};u.Sc=function(a){this.Ca&&this.Ca!=a&&i(Error("Method not supported"));ze.K.Sc.call(this,a)};u.ud=aa("nb");u.mb=function(a){this.ia&&i(Error("Component already rendered"));if(a&&this.jb(a)){this.te=m;if(!this.nb||this.nb.N!=vb(a))this.nb=tb(a);this.nd(a);this.Oa()}else i(Error("Invalid element to decorate"))};u.jb=ba(m);u.nd=function(a){this.F=a};u.Oa=function(){function a(a){!a.ia&&a.e()&&a.Oa()}this.ia=m;this.kb&&C(this.kb,a,k)};
u.Fb=function(){function a(a){a.ia&&a.Fb()}this.kb&&C(this.kb,a,k);this.Dc&&this.Dc.Ub();this.ia=q};u.pb=aa("F");u.Ya=function(a){this.ia&&i(Error("Component already rendered"));this.va=a};
u.removeChild=function(a,c){if(a){var d=v(a)?a:a.Jb||(a.Jb=":"+(a.fe.le++).toString(36)),e;this.La&&d?(e=this.La,e=(d in e?e[d]:k)||p):e=p;a=e;d&&a&&(e=this.La,d in e&&delete e[d],E(this.kb,a),c&&(a.Fb(),a.F&&Cb(a.F)),d=a,d==p&&i(Error("Unable to set parent component")),d.Ca=p,ze.K.Sc.call(d,p))}a||i(Error("Child is not in parent component"));return a};function Ce(){}var De;ga(Ce);u=Ce.prototype;u.pb=function(a){return a};u.ob=function(a,c,d){if(a=a.e?a.e():a)if(F&&!I("7")){var e=Ee(jb(a),c);e.push(c);ra(d?kb:mb,a).apply(p,e)}else d?kb(a,c):mb(a,c)};u.jb=ba(m);
u.mb=function(a,c){if(c.id){var d=c.id;if(a.Ca&&a.Ca.La){var e=a.Ca.La,f=a.Jb;f in e&&delete e[f];e=a.Ca.La;d in e&&i(Error('The object already contains the key "'+d+'"'));e[d]=a}a.Jb=d}(d=this.pb(c))&&d.firstChild?(d=d.firstChild.nextSibling?Ha(d.childNodes):d.firstChild,a.lb=d):a.lb=p;var h=0,j=this.qb(),l=this.qb(),n=q,t=q,d=q,e=jb(c);C(e,function(a){if(!n&&a==j)n=m,l==j&&(t=m);else if(!t&&a==l)t=m;else{var c=h;if(!this.Rd){this.Db||Fe(this);var d=this.Db,e={},f;for(f in d)e[d[f]]=f;this.Rd=e}a=
parseInt(this.Rd[a],10);h=c|(isNaN(a)?0:a)}},this);a.t=h;n||(e.push(j),l==j&&(t=m));t||e.push(l);(f=a.ea)&&e.push.apply(e,f);if(F&&!I("7")){var z=Ee(e);0<z.length&&(e.push.apply(e,z),d=m)}if(!n||!t||f||d)c.className=e.join(" ");a.isEnabled()||this.Za(c,1,m);a.t&8&&this.Za(c,8,m);a.W&16&&this.Za(c,16,!!(a.t&16));a.W&64&&this.Za(c,64,!!(a.t&64));return c};
u.Xb=function(a,c){var d=!c,e=F||Ua?a.getElementsByTagName("*"):p;if(fd){if(d=d?"none":"",a.style[fd]=d,e)for(var f=0,h;h=e[f];f++)h.style[fd]=d}else if(F||Ua)if(d=d?"on":"",a.setAttribute("unselectable",d),e)for(f=0;h=e[f];f++)h.setAttribute("unselectable",d)};u.Ya=function(a,c){this.ob(a,this.qb()+"-rtl",c)};u.Gd=function(a){var c;return a.W&32&&(c=a.Qa())?Fb(c):q};
u.Rc=function(a,c){var d;if(a.W&32&&(d=a.Qa())){if(!c&&a.t&32){try{d.blur()}catch(e){}a.t&32&&a.vd()}Fb(d)!=c&&(c?d.tabIndex=0:(d.tabIndex=-1,d.removeAttribute("tabIndex")))}};u.Q=function(a,c,d){var e=a.e();if(e){var f;this.Db||Fe(this);(f=this.Db[c])&&this.ob(a,f,d);this.Za(e,c,d)}};u.Za=function(a,c,d){De||(De={1:"disabled",8:"selected",16:"checked",64:"expanded"});(c=De[c])&&a.setAttribute("aria-"+c,d)};
u.wa=function(a,c){var d=this.pb(a);if(d&&(Bb(d),c))if(v(c))if("textContent"in d)d.textContent=c;else if(d.firstChild&&3==d.firstChild.nodeType){for(;d.lastChild!=d.firstChild;)d.removeChild(d.lastChild);d.firstChild.data=c}else Bb(d),d.appendChild(vb(d).createTextNode(c));else{var e=function(a){if(a){var c=vb(d);d.appendChild(v(a)?c.createTextNode(a):a)}};ia(c)?C(c,e):ja(c)&&!("nodeType"in c)?C(Ha(c),e):e(c)}};u.Qa=function(a){return a.e()};u.qb=ba("goog-control");
function Ee(a,c){var d=[];c&&(a=a.concat([c]));C([],function(e){Ea(e,ra(Ga,a))&&(!c||Ga(e,c))&&d.push(e.join("_"))});return d}function Fe(a){var c=a.qb();a.Db={1:c+"-disabled",2:c+"-hover",4:c+"-active",8:c+"-selected",16:c+"-checked",32:c+"-focused",64:c+"-open"}};var Ge={};function He(a,c,d){ze.call(this,d);if(!c){for(var c=this.constructor,e;c;){e=la(c);if(e=Ge[e])break;c=c.K?c.K.constructor:p}c=e?w(e.rb)?e.rb():new e:p}this.G=c;this.lb=a}x(He,ze);u=He.prototype;u.lb=p;u.t=0;u.W=39;u.yc=255;u.se=0;u.$b=m;u.ea=p;u.Ec=m;u.vc=q;u.oe=p;function Ie(a){a.ia&&q!=a.Ec&&Je(a,q);a.Ec=q}u.Qa=function(){return this.G.Qa(this)};
u.ob=function(a,c){c?a&&(this.ea?Ga(this.ea,a)||this.ea.push(a):this.ea=[a],this.G.ob(this,a,m)):a&&this.ea&&(E(this.ea,a),0==this.ea.length&&(this.ea=p),this.G.ob(this,a,q))};u.pb=function(){return this.G.pb(this.e())};u.jb=function(a){return this.G.jb(a)};u.nd=function(a){this.F=a=this.G.mb(this,a);var c=this.oe||k;c&&a.setAttribute("role",c);this.vc||this.G.Xb(a,q);this.$b="none"!=a.style.display};
u.Oa=function(){He.K.Oa.call(this);var a=this.G;this.va==p&&(this.va=ed(this.ia?this.F:this.nb.N.body));this.va&&a.Ya(this.e(),m);this.isEnabled()&&a.Rc(this,this.$b);if(this.W&-2&&(this.Ec&&Je(this,m),this.W&32&&(a=this.Qa()))){var c=this.Gc||(this.Gc=new re);se(c,a);O(O(O(this.Gb(),c,"key",this.ce),a,"focus",this.ae),a,"blur",this.vd)}};
function Je(a,c){var d=a.Gb(),e=a.e();c?(O(O(O(O(d,e,"mouseover",a.zd),e,"mousedown",a.xd),e,"mouseup",a.Ad),e,"mouseout",a.yd),a.Ib!=fa&&O(d,e,"contextmenu",a.Ib),F&&O(d,e,"dblclick",a.wd)):(Mc(Mc(Mc(Mc(d,e,"mouseover",a.zd),e,"mousedown",a.xd),e,"mouseup",a.Ad),e,"mouseout",a.yd),a.Ib!=fa&&Mc(d,e,"contextmenu",a.Ib),F&&Mc(d,e,"dblclick",a.wd))}u.Fb=function(){He.K.Fb.call(this);this.Gc&&this.Gc.detach();this.$b&&this.isEnabled()&&this.G.Rc(this,q)};
u.wa=function(a){this.G.wa(this.e(),a);this.lb=a};u.Ya=function(a){He.K.Ya.call(this,a);var c=this.e();c&&this.G.Ya(c,a)};u.Xb=function(a){this.vc=a;var c=this.e();c&&this.G.Xb(c,a)};u.isEnabled=function(){return!(this.t&1)};function Ke(a,c){Le(a,2,c)&&a.Q(2,c)}u.setActive=function(a){Le(this,4,a)&&this.Q(4,a)};u.Q=function(a,c){this.W&a&&c!=!!(this.t&a)&&(this.G.Q(this,a,c),this.t=c?this.t|a:this.t&~a)};function V(a,c){return!!(a.yc&c)&&!!(a.W&c)}
function Le(a,c,d){return!!(a.W&c)&&!!(a.t&c)!=d&&(!(a.se&c)||a.dispatchEvent(Be(c,d)))&&!a.pd}u.zd=function(a){(!a.relatedTarget||!Eb(this.e(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&V(this,2))&&Ke(this,m)};u.yd=function(a){if((!a.relatedTarget||!Eb(this.e(),a.relatedTarget))&&this.dispatchEvent("leave"))V(this,4)&&this.setActive(q),V(this,2)&&Ke(this,q)};u.Ib=fa;
u.xd=function(a){this.isEnabled()&&(V(this,2)&&Ke(this,m),xc(a)&&(V(this,4)&&this.setActive(m),this.G.Gd(this)&&this.Qa().focus()));!this.vc&&xc(a)&&a.preventDefault()};u.Ad=function(a){this.isEnabled()&&(V(this,2)&&Ke(this,m),this.t&4&&(Me(this,a)&&V(this,4))&&this.setActive(q))};u.wd=function(a){this.isEnabled()&&Me(this,a)};
function Me(a,c){if(V(a,16)){var d=!(a.t&16);Le(a,16,d)&&a.Q(16,d)}V(a,8)&&Le(a,8,m)&&a.Q(8,m);V(a,64)&&(d=!(a.t&64),Le(a,64,d)&&a.Q(64,d));d=new sc("action",a);c&&(d.altKey=c.altKey,d.ctrlKey=c.ctrlKey,d.metaKey=c.metaKey,d.shiftKey=c.shiftKey,d.Nc=c.Nc);return a.dispatchEvent(d)}u.ae=function(){V(this,32)&&Le(this,32,m)&&this.Q(32,m)};u.vd=function(){V(this,4)&&this.setActive(q);V(this,32)&&Le(this,32,q)&&this.Q(32,q)};
u.ce=function(a){return this.$b&&this.isEnabled()&&13==a.keyCode&&Me(this,a)?(a.preventDefault(),a.stopPropagation(),m):q};w(He)||i(Error("Invalid component class "+He));w(Ce)||i(Error("Invalid renderer class "+Ce));var Ne=la(He);Ge[Ne]=Ce;function Oe(){return new He(p)}w(Oe)||i(Error("Invalid decorator function "+Oe));function Qe(){}x(Qe,Ce);ga(Qe);u=Qe.prototype;u.mb=function(a,c){Ie(a);a.yc&=-256;a.ia&&a.t&32&&i(Error("Component already rendered"));a.t&32&&a.Q(32,q);a.W&=-33;Qe.K.mb.call(this,a,c);a.wa(c.value);return c};u.jb=function(a){return"TEXTAREA"==a.tagName};u.Ya=fa;u.Gd=function(a){return a.isEnabled()};u.Rc=fa;u.Q=function(a,c,d){Qe.K.Q.call(this,a,c,d);if((a=a.e())&&1==c)a.disabled=d};u.Za=fa;u.wa=function(a,c){a&&(a.value=c)};u.qb=ba("goog-textarea");function Re(a,c,d){He.call(this,a,c||Qe.rb(),d);Ie(this);this.Xb(m);a||(this.lb="")}x(Re,He);var Se=G||H;u=Re.prototype;u.Va=q;u.qa=0;u.ie=0;u.Jd=0;u.Cd=q;u.Pb=q;u.Qc=q;u.Pc=q;function Te(a){return a.tb.top+a.tb.bottom+a.hd.top+a.hd.bottom}function Ue(a){var c=a.Jd,d=a.e();c&&(d&&a.Pb)&&(c-=Te(a));return c}function Ve(a){var c=a.ie,d=a.e();c&&(d&&a.Pb)&&(c-=Te(a));return c}u.wa=function(a){Re.K.wa.call(this,a);this.e()&&this.Ra()};
u.Oa=function(){Re.K.Oa.call(this);var a=this.e();P(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.tb=hd(a,"padding");this.hd=kd(a);O(O(O(O(this.Gb(),a,"scroll",this.Ra),a,"focus",this.Ra),a,"keyup",this.Ra),a,"mouseup",this.ke);this.e()&&this.Ra()};
function We(a){if(!a.Cd){var c=a.e().cloneNode(q);P(c,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.ud().N.body.appendChild(c);var d=c.scrollHeight;c.style.padding="10px";var e=c.scrollHeight;a.Qc=e>d;c.style.borderWidth="10px";a.Pc=c.scrollHeight>e;c.style.height="100px";100!=c.offsetHeight&&(a.Pb=m);Cb(c);a.Cd=m}var c=a.e(),d=a.e().scrollHeight,f=a.e(),e=f.offsetHeight-f.clientHeight;if(!a.Qc)var h=a.tb,e=e-(h.top+h.bottom);
a.Pc||(f=kd(f),e-=f.top+f.bottom);d+=0<e?e:0;a.Pb?d-=Te(a):(a.Qc||(e=a.tb,d+=e.top+e.bottom),a.Pc||(a=kd(c),d+=a.top+a.bottom));return d}function Xe(a,c){a.qa!=c&&(a.qa=c,a.e().style.height=c+"px")}function Ye(a){a=a.e();a.style.height="auto";var c=a.value.match(/\n/g)||[];a.rows=c.length+1}
u.Ra=function(){if(!this.Va){var a=q;this.Va=m;var c=this.e(),d=this.qa;if(c.scrollHeight){var e=q,f=q,h=We(this),j=c.offsetHeight,l=Ue(this),n=Ve(this);l&&h<l?(Xe(this,l),e=m):n&&h>n?(Xe(this,n),c.style.overflowY="",f=m):j!=h?Xe(this,h):this.qa||(this.qa=h);!e&&(!f&&Se)&&(a=m)}else Ye(this);this.Va=q;a&&(a=this.e(),this.Va||(this.Va=m,c=q,a.value||(a.value=" ",c=m),(f=a.scrollHeight)?(h=We(this),e=Ue(this),j=Ve(this),!(e&&h<=e)&&!(j&&h>=j)&&(j=this.tb,a.style.paddingBottom=j.bottom+1+"px",We(this)==
h&&(a.style.paddingBottom=j.bottom+f+"px",a.scrollTop=0,f=We(this)-f,f>=e?Xe(this,f):Xe(this,e)),a.style.paddingBottom=j.bottom+"px")):Ye(this),c&&(a.value=""),this.Va=q));d!=this.qa&&this.dispatchEvent("resize")}};u.ke=function(){var a=this.e(),c=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(c-=a.offX);c!=this.qa&&(this.qa=this.Jd=c)};F&&I(8);function Ze(a){return"object"===typeof a&&a&&0===a.ye?a.content:String(a).replace($e,af)}var bf={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function af(a){return bf[a]}var $e=/[\x00\x22\x26\x27\x3c\x3e]/g;function cf(){return'<div class="annotorious-popup top-left" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Edit" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>'}
function df(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Add a Comment..." tabindex="1"></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3">Cancel</a><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2">Save</a></div></form></div>'};function ef(a){function c(){var a=e.Ka;a.e()&&a.Ra()}this.element=Td(df);this.d=a;this.Vd=a.getItem();this.Ka=new Re("");this.Td=L(".annotorious-editor-button-cancel",this.element)[0];this.Wc=L(".annotorious-editor-button-save",this.element)[0];var d;d=this.Wc;ib?d=d.parentElement:(d=d.parentNode,d=Db(d)?d:p);this.Ud=d;this.ab=[];var e=this;N(this.Td,"click",function(c){c.preventDefault();a.stopSelection(e.ad);e.close()});N(this.Wc,"click",function(c){c.preventDefault();c=e.sd();a.J(c);a.stopSelection();
e.ad?a.fireEvent("onAnnotationUpdated",c,a.getItem()):a.fireEvent("onAnnotationCreated",c,a.getItem());e.close()});T(this.element,q);a.element.appendChild(this.element);this.Ka.mb(L(".annotorious-editor-text",this.element)[0]);var f=this.element;d=document.createElement("div");P(d,"position","absolute");P(d,"top","0px");P(d,"right","0px");P(d,"width","5px");P(d,"height","100%");P(d,"cursor","e-resize");f.appendChild(d);var h=kd(f),h=dd(f).width-h.right-h.left;d=new ld(d);d.Hc=new Pc(h,0,800,0)||new Pc(NaN,
NaN,NaN,NaN);d.od=function(a){P(f,"width",a+"px");c&&c()}}u=ef.prototype;u.uc=function(a){var c=zb("div","annotorious-editor-field");v(a)?c.innerHTML=a:w(a)?this.ab.push({D:c,Ac:a}):Db(a)&&c.appendChild(a);a=this.Ud;a.parentNode&&a.parentNode.insertBefore(c,a)};u.open=function(a){(this.yb=this.ad=a)&&this.Ka.wa(String(a.text));T(this.element,m);this.Ka.e().focus();C(this.ab,function(c){var d=c.Ac(a);v(d)?c.D.innerHTML=d:Db(d)&&(Bb(c.D),c.D.appendChild(d))});this.d.fireEvent("onEditorShown",a)};
u.close=function(){T(this.element,q);this.Ka.wa("")};u.setPosition=function(a){Tc(this.element,a.x,a.y)};u.sd=function(){var a;a=this.Ka.e().value;var c=new Vd;(new Wd).parse(new me(c,function(a){return a},k),a);a=c.toString();this.yb?this.yb.text=a:this.yb=new Kd(this.Vd.src,a,this.d.pa().getShape());return this.yb};ef.prototype.addField=ef.prototype.uc;ef.prototype.getAnnotation=ef.prototype.sd;function ff(a,c,d){var e=this;d||(d="Interactive");this.element=Td(gf,{Ob:d});this.d=a;this.$c=L(".annotorious-hint-msg",this.element)[0];this.Yc=L(".annotorious-hint-icon",this.element)[0];this.ed=function(){e.show()};this.cd=function(){hf(e)};this.jc();hf(this);c.appendChild(this.element)}
ff.prototype.jc=function(){var a=this;this.Xd=N(this.Yc,"mouseover",function(){a.show();window.clearTimeout(a.qc)});this.Wd=N(this.Yc,"mouseout",function(){hf(a)});this.d.addHandler("onMouseOverItem",this.ed);this.d.addHandler("onMouseOutOfItem",this.cd)};ff.prototype.oc=function(){Gc(this.Xd);Gc(this.Wd);this.d.Vb("onMouseOverItem",this.ed);this.d.Vb("onMouseOutOfItem",this.cd)};
ff.prototype.show=function(){window.clearTimeout(this.qc);R(this.$c,0.8);var a=this;this.qc=window.setTimeout(function(){hf(a)},3E3)};function hf(a){window.clearTimeout(a.qc);R(a.$c,0)}ff.prototype.destroy=s();function jf(a){this.element=Td(cf);this.d=a;this.Yd=L(".annotorious-popup-text",this.element)[0];this.S=L(".annotorious-popup-buttons",this.element)[0];this.nc=q;this.ab=[];var c=L(".annotorious-popup-button-edit",this.S)[0],d=L(".annotorious-popup-button-delete",this.S)[0],e=this;N(c,"mouseover",function(){kb(c,"annotorious-popup-button-active")});N(c,"mouseout",function(){mb(c,"annotorious-popup-button-active")});N(c,"click",function(){R(e.element,0);P(e.element,"pointer-events","none");a.zc(e.g)});
N(d,"mouseover",function(){kb(d,"annotorious-popup-button-active")});N(d,"mouseout",function(){mb(d,"annotorious-popup-button-active")});N(d,"click",function(){a.fireEvent("beforeAnnotationRemoved",e.g)||(R(e.element,0),P(e.element,"pointer-events","none"),a.A(e.g),a.fireEvent("onAnnotationRemoved",e.g))});kf&&(N(this.element,"mouseover",function(){window.clearTimeout(e.lc);0.9>(e.S.style[Aa("opacity")]||"")&&R(e.S,0.9);e.clearHideTimer()}),N(this.element,"mouseout",function(){R(e.S,0);e.startHideTimer()}),
a.addHandler("onMouseOutOfItem",function(){e.startHideTimer()}));R(this.S,0);R(this.element,0);P(this.element,"pointer-events","none");a.element.appendChild(this.element)}u=jf.prototype;u.uc=function(a){var c=zb("div","annotorious-popup-field");v(a)?c.innerHTML=a:w(a)?this.ab.push({D:c,Ac:a}):Db(a)&&c.appendChild(a);this.element.appendChild(c)};
u.startHideTimer=function(){this.nc=q;if(!this.fb){var a=this;this.fb=window.setTimeout(function(){a.d.fireEvent("beforePopupHide",a);a.nc||(R(a.element,0),P(a.element,"pointer-events","none"),R(a.S,0.9),delete a.fb)},150)}};u.clearHideTimer=function(){this.nc=m;this.fb&&(window.clearTimeout(this.fb),delete this.fb)};
u.show=function(a,c){this.clearHideTimer();c&&this.setPosition(c);a&&this.setAnnotation(a);this.lc&&window.clearTimeout(this.lc);R(this.S,0.9);if(kf){var d=this;this.lc=window.setTimeout(function(){R(d.S,0)},1E3)}R(this.element,0.9);P(this.element,"pointer-events","auto");this.d.fireEvent("onPopupShown",this.g)};u.setPosition=function(a){var c=this.d.ba.width,c=-(198-(c-a.x)-Math.floor((window.innerWidth-c)/2));0>c?Tc(this.element,new J(a.x+c,a.y)):Tc(this.element,new J(a.x,a.y))};
u.setAnnotation=function(a){this.g=a;this.Yd.innerHTML=a.text?a.text.replace(/\n/g,"<br/>"):'<span class="annotorious-popup-empty">No comment</span>';console.log(a);"editable"in a&&a.editable==q?(T(this.S,q),a.text||T(this.element,q)):(T(this.S,m),T(this.element,m));C(this.ab,function(c){var d=c.Ac(a);v(d)?c.D.innerHTML=d:Db(d)&&(Bb(c.D),c.D.appendChild(d))})};jf.prototype.addField=jf.prototype.uc;function lf(){}u=lf.prototype;u.J=function(a,c){this.f.J(a,c)};u.addHandler=function(a,c){this.v.addHandler(a,c)};u.fireEvent=function(a,c,d){return this.v.fireEvent(a,c,d)};u.pa=aa("z");u.r=function(a){this.f.r(a)};u.A=function(a){this.f.A(a)};u.Vb=function(a,c){this.v.Vb(a,c)};u.stopSelection=function(a){kf&&T(this.c,q);this.hb&&(this.hb(),delete this.hb);this.z.stopSelection();a&&this.f.J(a)};
function mf(a,c){a.ld=p;N(c,nf,function(){clearTimeout(this.ld)});N(c,of,function(d){d=pf(d,c);a.f.r(q);var e=a.f.Pa(d.x,d.y);a.gb&&0===e.length?(T(a.c,m),a.z.startSelection(d.x,d.y)):(e=a.f.Pa(d.x,d.y),0<e.length&&a.f.r(e[0]));kf||(-1==jb(a.f.o).indexOf("annotorious-item-focus")?ob(a.f.o,"annotorious-item-unfocus","annotorious-item-focus"):0==e.length&&ob(a.f.o,"annotorious-item-focus","annotorious-item-unfocus"));0!==e.length&&!kf&&(this.ld=setTimeout(function(){a.f.d.v.fireEvent("onAnnotationClickedLong",
e[0])},200))})};function qf(a,c){this.o=a;this.d=c;this.la=[];this.Z=[];this.ma=this.o.getContext("2d");this.xa=m;this.Ab=q;var d=this;N(this.o,rf,function(a){if(d.xa){var c=sf(d,a.offsetX,a.offsetY);c?(d.Ab=d.Ab&&c==d.g,d.g?d.g!=c&&(d.xa=q,d.d.popup.startHideTimer()):(d.g=c,tf(d),d.d.fireEvent("onMouseOverAnnotation",{annotation:d.g,mouseEvent:a}))):!d.Ab&&d.g&&(d.xa=q,d.d.popup.startHideTimer())}else d.$a=a});N(this.o,uf,function(){d.g!==k&&d.g!=q?d.d.fireEvent("onAnnotationClicked",d.g):d.d.gb||d.d.fireEvent("onNonAnnotationNonEditableClicked",
d.d)});c.addHandler("onMouseOutOfItem",function(){delete d.g;d.xa=m});c.addHandler("beforePopupHide",function(){if(!d.xa&&d.$a){var a=d.g;d.g=sf(d,d.$a.offsetX,d.$a.offsetY);d.xa=m;a!=d.g?(tf(d),d.d.fireEvent("onMouseOutOfAnnotation",{M:a,mouseEvent:d.$a}),d.d.fireEvent("onMouseOverAnnotation",{M:d.g,mouseEvent:d.$a})):d.g&&d.d.popup.clearHideTimer()}else tf(d)})}u=qf.prototype;
u.J=function(a,c){c&&(c==this.g&&delete this.g,E(this.la,c),delete this.Z[Jd(c.shapes[0])]);this.la.push(a);var d=a.shapes[0];if("pixel"!=d.units)var e=this,d=Id(d,function(a){return e.d.Ba(a)});this.Z[Jd(a.shapes[0])]=d;tf(this)};u.A=function(a){a==this.g&&delete this.g;E(this.la,a);delete this.Z[Jd(a.shapes[0])];tf(this)};u.w=function(){return Ha(this.la)};
u.fa=function(){var a=[];C(this.la,function(c){var c=c.shapes[0].geometry,d=document.createElement("section");d.className="annotText";d.style.borderWidth="1px";d.style.width=(100*c.width).toString()+"%";d.style.height=(100*c.height).toString()+"%";d.style.top=(100*c.y).toString()+"%";d.style.left=(100*c.x).toString()+"%";d.style.position="absolute";Ia(a,d)});return a};u.r=function(a){(this.g=a)?this.Ab=m:this.d.popup.startHideTimer();tf(this);this.xa=m};
function sf(a,c,d){a=a.Pa(c,d);if(0<a.length)return a[0]}
u.Pa=function(a,c){var d=[],e=this;C(this.la,function(f){var h;h=e.Z[Jd(f.shapes[0])];if("rect"==h.type)h=a<h.geometry.x||c<h.geometry.y||a>h.geometry.x+h.geometry.width||c>h.geometry.y+h.geometry.height?q:m;else if("polygon"==h.type){h=h.geometry.points;for(var j=q,l=h.length-1,n=0;n<h.length;n++)h[n].y>c!=h[l].y>c&&a<(h[l].x-h[n].x)*(c-h[n].y)/(h[l].y-h[n].y)+h[n].x&&(j=!j),l=n;h=j}else h=q;h&&d.push(f)});y.sort.call(d,function(a,c){var d=e.Z[Jd(a.shapes[0])],l=e.Z[Jd(c.shapes[0])];return Fd(d)-
Fd(l)}||Ka);return d};function vf(a,c,d){var e=Fa(a.d.ga(),function(a){return a.getSupportedShapeType()==c.type});e?e.drawShape(a.ma,c,d):console.log("WARNING unsupported shape type: "+c.type)}function tf(a){a.ma.clearRect(0,0,a.o.width,a.o.height);C(a.la,function(c){c!=a.g&&vf(a,a.Z[Jd(c.shapes[0])])});if(a.g){var c=a.Z[Jd(a.g.shapes[0])];vf(a,c,m);c=Gd(c).geometry;a.d.popup.show(a.g,new zd(c.x,c.y+c.height+5))}}
u.ua=function(a){var c=this,d=[];C(this.la,function(a){d.push(c.Z[Jd(a.shapes[0])])});if(0<d.length){var e=function(){if(t){g2d.clearRect(0,0,f.o.width,f.o.height);for(var a=d.length-1;0<=a;a--)geom=d[a].geometry,g2d.beginPath(),g2d.lineJoin="miter",g2d.lineWidth=h.stroke_width,g2d.strokeStyle="rgb(255,255,255)",g2d.strokeRect(geom.x+h.outline_width+h.stroke_width/2,geom.y+h.outline_width+h.stroke_width/2,geom.width-2*h.outline_width-h.stroke_width,geom.height-2*h.outline_width-h.stroke_width),g2d.fillStyle=
"rgba("+colour_in_rgb[0]+","+colour_in_rgb[1]+","+colour_in_rgb[2]+","+l+")",g2d.fillRect(geom.x+h.outline_width+h.hi_stroke_width/2,geom.y+h.outline_width+h.hi_stroke_width/2,geom.width-2*h.outline_width-h.hi_stroke_width,geom.height-2*h.outline_width-h.hi_stroke_width),g2d.closePath();l=n?l+0.005:l-0.005;0>=l?n=m:0.26<=l&&(n=q);requestAnimationFrame(e)}};g2d=c.ma;var f=c,h,j=Fa(c.d.ga(),function(a){return a.getSupportedShapeType()==d[0].type});h={outline:j.fc,stroke:j.hc,fill:j.Vc,hi_outline:j.bc,
hi_stroke:j.dc,hi_fill:j.ac,outline_width:j.gc,stroke_width:j.ic,hi_outline_width:j.cc,hi_stroke_width:j.ec};var l=0,n=m,t=m;ob(f.o,"annotorious-item-unglow","annotorious-item-glow");setTimeout(function(){t=q;tf(f);ob(f.o,"annotorious-item-glow","annotorious-item-unglow")},a);a=h.hi_fill;a=a.replace("#","");r=parseInt(a.substring(0,2),16);g=parseInt(a.substring(2,4),16);b=parseInt(a.substring(4,6),16);colour_in_rgb=result=[r,g,b];requestAnimationFrame(e)}};var wf=navigator.userAgent&&-1<navigator.userAgent.indexOf("Win")&&-1<navigator.userAgent.indexOf("Chrome")?q:"ontouchstart"in window,kf=!wf,of=wf?"touchstart":"mousedown",xf=wf?"touchenter":"mouseover",rf=wf?"touchmove":"mousemove",nf=wf?"touchend":"mouseup",yf=wf?"touchleave":"mouseout",uf=wf?"touchend":"click";
function pf(a,c){var d=q;a.offsetX=a.offsetX?a.offsetX:q;a.offsetY=a.offsetY?a.offsetY:q;return d=(!a.offsetX||!a.offsetY)&&a.n.changedTouches?{x:a.n.changedTouches[0].clientX-ud(c).left,y:a.n.changedTouches[0].clientY-ud(c).top}:{x:a.offsetX,y:a.offsetY}};function zf(){}u=zf.prototype;u.init=function(a,c){this.fc="#111111";this.hc="#ffffff";this.Vc=q;this.bc="#111111";this.dc="#ffffff";this.ac="#FFDC00";this.cc=this.ic=this.gc=1;this.ec=1.2;this.o=c;this.d=a;this.ma=c.getContext("2d");this.ma.lineWidth=1;this.pc=q};
u.jc=function(){var a=this,c=this.o;this.rc=N(this.o,rf,function(d){var e=pf(d,c),d=8*Math.round(e.x/8),e=8*Math.round(e.y/8);console.log(this.ue,8,d);a.pc&&(a.B={x:d,y:e},a.ma.clearRect(0,0,c.width,c.height),d=a.B.x-a.L.x,e=a.B.y-a.L.y,a.drawShape(a.ma,{type:"rect",geometry:{x:0<d?a.L.x:a.B.x,y:0<e?a.L.y:a.B.y,width:Math.abs(d),height:Math.abs(e)},style:{}}))});this.sc=N(c,nf,function(d){var e=pf(d,c),f=a.getShape(),d=d.n?d.n:d;a.pc=q;f?(a.oc(),a.d.fireEvent("onSelectionCompleted",{mouseEvent:d,
shape:f,viewportBounds:a.getViewportBounds(),annotorious:a.d,image:a.d.X})):(a.d.fireEvent("onSelectionCanceled"),d=a.d.Pa(e.x,e.y),0<d.length&&a.d.r(d[0]))})};u.oc=function(){this.rc&&(Gc(this.rc),delete this.rc);this.sc&&(Gc(this.sc),delete this.sc)};u.getName=ba("rect_drag");u.getSupportedShapeType=ba("rect");
u.ja=function(a){a.hasOwnProperty("outline")&&(this.fc=a.outline);a.hasOwnProperty("stroke")&&(this.hc=a.stroke);a.hasOwnProperty("fill")&&(this.Vc=a.fill);a.hasOwnProperty("hi_outline")&&(this.bc=a.hi_outline);a.hasOwnProperty("hi_stroke")&&(this.dc=a.hi_stroke);a.hasOwnProperty("hi_fill")&&(this.ac=a.hi_fill);a.hasOwnProperty("outline_width")&&(this.gc=a.outline_width);a.hasOwnProperty("stroke_width")&&(this.ic=a.stroke_width);a.hasOwnProperty("hi_outline_width")&&(this.cc=a.hi_outline_width);a.hasOwnProperty("hi_stroke_width")&&
(this.ec=a.hi_stroke_width)};u.startSelection=function(a,c){var d=8*Math.round(a/8),e=8*Math.round(c/8),f={x:d,y:e};this.pc=m;this.jc(f);this.L=new zd(d,e);this.d.fireEvent("onSelectionStarted",{offsetX:d,offsetY:e});P(document.body,"-webkit-user-select","none")};u.stopSelection=function(){this.oc();this.ma.clearRect(0,0,this.o.width,this.o.height);P(document.body,"-webkit-user-select","auto");delete this.B};
u.getShape=function(){if(this.B&&3<Math.abs(this.B.x-this.L.x)&&3<Math.abs(this.B.y-this.L.y)){var a=this.getViewportBounds(),a=this.d.Zb({x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top});return new Ed("rect",a)}};u.getViewportBounds=function(){var a,c;this.B.x>this.L.x?(a=this.B.x,c=this.L.x):(a=this.L.x,c=this.B.x);var d,e;this.B.y>this.L.y?(d=this.L.y,e=this.B.y):(d=this.B.y,e=this.L.y);return{top:d,right:a,bottom:e,left:c}};
u.drawShape=function(a,c,d){var e,f,h,j,l;c.style||(c.style={});"rect"==c.type&&(d?(f=c.style.hi_stroke||this.dc,h=c.style.hi_outline||this.bc,j=c.style.hi_outline_width||this.cc,l=c.style.hi_stroke_width||this.ec):(f=c.style.stroke||this.hc,h=c.style.outline||this.fc,j=c.style.outline_width||this.gc,l=c.style.stroke_width||this.ic),e=c.geometry,h&&(a.lineJoin="round",a.lineWidth=j,a.strokeStyle=h),c=c.style.hi_fill||this.ac,c=c.replace("#",""),r=parseInt(c.substring(0,2),16),g=parseInt(c.substring(2,
4),16),b=parseInt(c.substring(4,6),16),fill_color=result=[r,g,b],f&&(a.lineJoin="miter",a.lineWidth=l,a.strokeStyle=f,a.fillStyle=d?"rgba("+fill_color[0]+","+fill_color[1]+","+fill_color[2]+",0.26)":"rgba("+fill_color[0]+","+fill_color[1]+","+fill_color[2]+",0.15)",a.strokeRect(e.x+j+l/2,e.y+j+l/2,e.width-2*j-l,e.height-2*j-l),a.fillRect(e.x+j+l/2,e.y+j+l/2,e.width-2*j-l,e.height-2*j-l)))};function Af(a){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+Ze(a.width)+"px; height:"+Ze(a.height)+'px; z-index:0" width="'+Ze(a.width)+'" height="'+Ze(a.height)+'"></canvas>'}
function gf(a){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; bottom: 4px; left:0; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">'+Ze(a.Ob)+'</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'};function W(a,c){function d(c,d){P(e,"margin-"+c,d+"px");P(a,"margin-"+c,0);P(a,"padding-"+c,0)}this.X=a;this.bd={padding:a.style.padding,margin:a.style.margin};this.v=new vd;this.na=[];this.gb=m;this.element=zb("div","annotorious-annotationlayer");P(this.element,"position","relative");P(this.element,"display","inline-block");var e=this.element,f=hd(a,"margin"),h=hd(a,"padding");(0!=f.top||0!=h.top)&&d("top",f.top+h.top);(0!=f.right||0!=h.right)&&d("right",f.right+h.right);(0!=f.bottom||0!=h.bottom)&&
d("bottom",f.bottom+h.bottom);(0!=f.left||0!=h.left)&&d("left",f.left+h.left);(f=a.parentNode)&&f.replaceChild(this.element,a);this.element.appendChild(a);f=dd(a);this.ba=Td(Af,{width:f.width,height:f.height});kf&&kb(this.ba,"annotorious-item-unfocus");this.element.appendChild(this.ba);this.c=Td(Af,{width:f.width,height:f.height});kf&&T(this.c,q);this.element.appendChild(this.c);this.popup=c?c:new jf(this);f=new zf;f.init(this,this.c);this.na.push(f);this.z=f;this.editor=new ef(this);this.f=new qf(this.ba,
this);var j=this;kf&&(N(this.element,xf,function(a){a=a.relatedTarget;if(!a||!Eb(j.element,a))j.v.fireEvent("onMouseOverItem"),ob(j.ba,"annotorious-item-unfocus","annotorious-item-focus")}),N(this.element,yf,function(a){a=a.relatedTarget;if(!a||!Eb(j.element,a))j.v.fireEvent("onMouseOutOfItem"),ob(j.ba,"annotorious-item-focus","annotorious-item-unfocus")}));mf(this,wf?this.c:this.ba);this.v.addHandler("onSelectionCompleted",function(a){a=a.viewportBounds;j.editor.setPosition(new zd(a.left+j.X.offsetLeft,
a.bottom+4+j.X.offsetTop))});this.v.addHandler("onSelectionCanceled",function(){kf&&T(j.c,q);j.z.stopSelection()})}x(W,lf);u=W.prototype;u.ca=s();u.gd=function(a){a.init(this,this.c);this.na.push(a)};u.destroy=function(){var a=this.X;a.style.margin=this.bd.margin;a.style.padding=this.bd.padding;var c=this.element,d=c.parentNode;d&&d.replaceChild(a,c)};
u.zc=function(a){this.f.A(a);var c=Fa(this.na,function(c){return c.getSupportedShapeType()==a.shapes[0].type});if(c){T(this.c,m);this.f.r(q);var d=this.c.getContext("2d"),e=a.shapes[0],f=this,e="pixel"==e.units?e:Id(e,function(a){return f.Ba(a)});c.drawShape(d,e)}c=Gd(a.shapes[0]).geometry;c="pixel"==a.shapes[0].units?new zd(c.x,c.y+c.height):this.Ba(new zd(c.x,c.y+c.height));this.editor.setPosition(new zd(c.x+this.X.offsetLeft,c.y+4+this.X.offsetTop));this.editor.open(a)};
u.Ba=function(a){var c=bd(this.X);return a.width?{x:a.x*c.width,y:a.y*c.height,width:a.width*c.width,height:a.height*c.height}:{x:a.x*c.width,y:a.y*c.height}};u.pa=aa("z");u.w=function(){return this.f.w()};u.fa=function(){return this.f.fa()};u.Pa=function(a,c){return Ha(this.f.Pa(a,c))};u.ga=aa("na");u.getItem=function(){return{src:Bf(this.X),element:this.X}};function Bf(a){var c=a.getAttribute("data-original");return c?c:a.src}u.ha=function(){T(this.ba,q)};
u.O=function(){this.gb=q;this.zb&&(this.zb.destroy(),delete this.zb)};u.Nd=function(a){(this.z=Fa(this.na,function(c){return c.getName()==a}))||console.log('WARNING: selector "'+a+'" not available')};u.ja=function(a){C(this.na,function(c){c.ja(a)});tf(this.f)};u.Ga=function(){T(this.ba,m)};u.aa=function(){this.gb=m;this.zb||(this.zb=new ff(this,this.element))};u.stopSelection=function(a){kf&&T(this.c,q);this.z.stopSelection();a&&this.f.J(a)};
u.Zb=function(a){var c=bd(this.X);return a.width?{x:a.x/c.width,y:a.y/c.height,width:a.width/c.width,height:a.height/c.height}:{x:a.x/c.width,y:a.y/c.height}};u.ua=function(a){this.f.ua(a)};W.prototype.redrawGlow=W.prototype.ua;W.prototype.addSelector=W.prototype.gd;W.prototype.stopSelection=W.prototype.stopSelection;W.prototype.fireEvent=W.prototype.fireEvent;W.prototype.setCurrentSelector=W.prototype.Nd;W.prototype.toItemCoordinates=W.prototype.Zb;function Cf(){Md(this,function(){return L("img.annotatable",document)})}x(Cf,Ld);Cf.prototype.Hb=function(a){return Bf(a)};Cf.prototype.Kc=function(a){return new W(a)};Cf.prototype.Yb=function(a){return Db(a)?"IMG"==a.tagName||"CANVAS"==a.tagName:q};function Df(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint" style="width: 400px; margin:0px auto;">'+Ze(a.Ob)+"</dvi></div>"};function Ef(a,c){this.Y=a;this.T=dd(c.element);this.l=c.popup;P(this.l.element,"z-index",99E3);this.C=[];this.wb=new OpenLayers.Layer.Boxes("Annotorious");this.Y.addLayer(this.wb);var d=this;this.Y.events.register("move",this.Y,function(){d.I&&d.cb()});c.addHandler("beforePopupHide",function(){d.ya==d.I?d.l.clearHideTimer():d.ib(d.ya,d.I)})}u=Ef.prototype;u.destroy=function(){this.wb.destroy()};
u.cb=function(){var a=this.I.Nb.div,c=dd(a),d=Yc(a,this.Y.div),a=d.y,d=d.x,e=c.width,f=c.height,c=dd(this.l.element),a={y:a+f+5};d+c.width>this.T.width?(ob(this.l.element,"top-left","top-right"),a.x=d+e-c.width):(ob(this.l.element,"top-right","top-left"),a.x=d);0>a.x&&(a.x=0);a.x+c.width>this.T.width&&(a.x=this.T.width-c.width);a.y+c.height>this.T.height&&(a.y=this.T.height-c.height);this.l.setPosition(a)};u.tc=function(a){this.l.setAnnotation(a);this.cb();this.l.show()};
u.ib=function(a,c){a?(Yc(a.Nb.div,this.Y.div),Aa("height"),P(a.sb,"border-color","#fff000"),this.I=a,this.tc(a.M)):delete this.I;c&&P(c.sb,"border-color","#fff")};
u.J=function(a){var c=a.shapes[0].geometry,c=new OpenLayers.Marker.Box(new OpenLayers.Bounds(c.x,c.y,c.x+c.width,c.y+c.height));kb(c.div,"annotorious-ol-boxmarker-outer");P(c.div,"border",p);var d=zb("div","annotorious-ol-boxmarker-inner");ad(d,"100%","100%");c.div.appendChild(d);var e={M:a,Nb:c,sb:d},f=this;N(d,"mouseover",function(){f.I||f.ib(e);f.ya=e});N(d,"mouseout",function(){delete f.ya;f.l.startHideTimer()});this.C.push(e);y.sort.call(this.C,function(a,c){return Fd(c.M.shapes[0])-Fd(a.M.shapes[0])}||
Ka);var h=1E4;C(this.C,function(a){P(a.Nb.div,"z-index",h);h++});this.wb.addMarker(c)};u.A=function(a){var c=Fa(this.C,function(c){return c.M==a});c&&(E(this.C,c),this.wb.removeMarker(c.Nb))};u.w=s();u.r=function(a){a||this.l.startHideTimer()};function Ff(a){function c(){var a=parseInt(Q(e.element,"width"),10),c=parseInt(Q(e.element,"height"),10);ad(e.c,a,c);e.c.width=a;e.c.height=c}this.Y=a;this.element=a.div;var d=this.element.style[Aa("position")]||"";"absolute"!=d&&"relative"!=d&&P(this.element,"position","relative");this.v=new vd;this.V=Td(Df,{Ob:"Click and Drag"});P(this.V,"z-index",9998);R(this.V,0);this.element.appendChild(this.V);this.popup=new jf(this);this.f=new Ef(a,this);this.c=Td(Af,{width:"0",height:"0"});T(this.c,q);P(this.c,
"position","absolute");P(this.c,"top","0px");P(this.c,"z-index",9999);this.element.appendChild(this.c);var e=this;c();this.z=new zf;this.z.init(this,this.c);this.hb=k;this.editor=new ef(this);P(this.editor.element,"z-index",1E4);window.addEventListener?window.addEventListener("resize",c,q):window.attachEvent&&window.attachEvent("onresize",c);N(this.element,"mouseover",function(a){a=a.relatedTarget;(!a||!Eb(e.element,a))&&e.v.fireEvent("onMouseOverItem")});N(this.element,"mouseout",function(a){a=a.relatedTarget;
(!a||!Eb(e.element,a))&&e.v.fireEvent("onMouseOutOfItem")});N(this.c,"mousedown",function(a){var c=Zc(e.element);e.z.startSelection(a.clientX-c.x,a.clientY-c.y)});this.v.addHandler("onSelectionCompleted",function(a){P(e.c,"pointer-events","none");a=a.viewportBounds;e.editor.setPosition(new zd(a.left,a.bottom+4));e.editor.open()});this.v.addHandler("onSelectionCanceled",function(){e.stopSelection()})}x(Ff,lf);u=Ff.prototype;u.aa=s();u.O=s();
u.ca=function(a){P(this.c,"pointer-events","auto");var c=this;T(this.c,m);R(this.V,0.8);window.setTimeout(function(){R(c.V,0)},2E3);a&&(this.hb=a)};u.destroy=function(){this.f.destroy();Cb(this.V);Cb(this.c)};u.gd=s();u.zc=function(a){this.f.A(a);var c=this.z,d=this;if(c){T(this.c,m);this.f.r(k);var e=this.c.getContext("2d"),f=Id(a.shapes[0],function(a){return d.Ba(a)});console.log(f);c.drawShape(e,f);c=Gd(f).geometry;this.editor.setPosition(new zd(c.x,c.y+c.height));this.editor.open(a)}};
u.Ba=function(a){var c=this.Y.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return(a=a.width?this.Y.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x+a.width,a.y+a.height)):q)?{x:c.x,y:a.y,width:a.x-c.x+2,height:c.y-a.y+2}:{x:c.x,y:c.y}};u.w=function(){return this.f.w()};u.ga=s();u.getItem=function(){return{src:"map://openlayers/something"}};u.ub=s();
u.Zb=function(a){var c=this.Y.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return(a=a.width?new OpenLayers.Pixel(a.x+a.width-2,a.y+a.height-2):q)?(a=this.Y.getLonLatFromPixel(a),c={x:c.lon,y:a.lat,width:a.lon-c.lon,height:c.lat-a.lat},console.log(c),c):{x:c.lon,y:c.lat}};function Gf(){Md(this)}x(Gf,Ld);Gf.prototype.Hb=ba("map://openlayers/something");Gf.prototype.Kc=function(a){return new Ff(a)};Gf.prototype.Yb=function(a){return a instanceof OpenLayers.Map};function Hf(a,c){this.U=a;this.T=dd(a.element);this.l=c.popup;P(this.l.element,"z-index",99E3);this.C=[];var d=this;this.U.addHandler("animation",function(){d.I&&d.cb()});c.addHandler("beforePopupHide",function(){d.ya==d.I?d.l.clearHideTimer():d.ib(d.ya,d.I)})}u=Hf.prototype;
u.cb=function(){var a=this.U.element,c=this.I.Tb,d=dd(c),c=Yc(c,a),a=c.y,c=c.x,e=d.width,f=d.height,d=dd(this.l.element),a={x:c,y:a+f+12};ob(this.l.element,"top-right","top-left");this.U.isFullPage()||(c+d.width>this.T.width&&(ob(this.l.element,"top-left","top-right"),a.x=c+e-d.width),0>a.x&&(a.x=0),a.x+d.width>this.T.width&&(a.x=this.T.width-d.width),a.y+d.height>this.T.height&&(a.y=this.T.height-d.height));this.l.setPosition(a)};u.tc=function(a){this.l.setAnnotation(a);this.cb();this.l.show()};
u.ib=function(a,c){a?(P(a.sb,"border-color","#fff000"),this.I=a,this.tc(a.M)):delete this.I;c&&P(c.sb,"border-color","#fff")};
u.J=function(a){var c=a.shapes[0].geometry,d=zb("div","annotorious-ol-boxmarker-outer"),e=zb("div","annotorious-ol-boxmarker-inner");ad(e,"100%","100%");d.appendChild(e);var c=new OpenSeadragon.Rect(c.x,c.y,c.width,c.height),f={M:a,Tb:d,sb:e},h=this;N(e,"mouseover",function(){h.I||h.ib(f);h.ya=f});N(e,"mouseout",function(){delete h.ya;h.l.startHideTimer()});this.C.push(f);y.sort.call(this.C,function(a,c){return Fd(c.M.shapes[0])-Fd(a.M.shapes[0])}||Ka);var j=1;C(this.C,function(a){P(a.Tb,"z-index",
j);j++});this.U.drawer.addOverlay(d,c)};u.A=function(a){var c=Fa(this.C,function(c){return c.M==a});c&&(E(this.C,c),this.U.drawer.removeOverlay(c.Tb))};u.w=function(){return Da(this.C,function(a){console.log(a);return a.M})};u.r=s();u.destroy=function(){var a=this;C(this.C,function(c){a.U.removeOverlay(c.Tb)});this.C=[]};function If(a){this.element=a.element;var c=document;c.querySelectorAll&&c.querySelector?c=c.querySelector(".openseadragon-container"):(c=document,c=(c.querySelectorAll&&c.querySelector?c.querySelectorAll(".openseadragon-container"):c.getElementsByClassName?c.getElementsByClassName("openseadragon-container"):wb())[0]);P(c||p,"z-index",0);this.U=a;this.v=new vd;this.na=[];this.gb=m;this.V=Td(Df,{Ob:"Click and Drag"});R(this.V,0);this.element.appendChild(this.V);this.popup=new jf(this);this.f=new Hf(a,
this);this.c=Td(Af,{width:"0",height:"0"});T(this.c,q);this.element.appendChild(this.c);var d=this,a=parseInt(Q(d.element,"width"),10),c=parseInt(Q(d.element,"height"),10);ad(d.c,a,c);d.c.width=a;d.c.height=c;a=new zf;a.init(this,this.c);this.na.push(a);this.z=a;this.editor=new ef(this);mf(this,this.c);this.v.addHandler("onSelectionCompleted",function(a){a=a.viewportBounds;d.editor.setPosition(new zd(a.left,a.bottom+4));d.editor.open()});this.v.addHandler("onSelectionCanceled",function(){d.stopSelection()})}
x(If,lf);u=If.prototype;u.aa=s();u.O=s();u.destroy=function(){this.f.destroy();delete this.f};u.ca=function(a){P(this.c,"pointer-events","auto");var c=this;T(this.c,m);R(this.V,0.8);window.setTimeout(function(){R(c.V,0)},2E3);a&&(this.hb=a)};u.zc=function(a){this.f.A(a);var c=this.z,d=this;if(c){T(this.c,m);this.f.r(k);var e=this.c.getContext("2d"),f=Id(a.shapes[0],function(a){return d.Ba(a)});c.drawShape(e,f);c=Gd(f).geometry;this.editor.setPosition(new zd(c.x,c.y+c.height+4));this.editor.open(a)}};
u.Ba=function(a){var c=ud(this.element);c.top+=window.pageYOffset;c.left+=window.pageXOffset;var d=new OpenSeadragon.Point(a.x,a.y),a=a.width?new OpenSeadragon.Point(a.x+a.width,a.y+a.height):q,d=this.U.viewport.viewportToWindowCoordinates(d);return a?(a=this.U.viewport.viewportToWindowCoordinates(a),{x:d.x-c.left,y:d.y-c.top,width:a.x-d.x+2,height:a.y-d.y+2}):d};u.w=function(){return this.f.w()};u.ga=s();u.getItem=function(){return{src:"dzi://openseadragon/something"}};u.ub=s();u.pa=aa("z");
u.Zb=function(a){var c=ud(this.element);c.top+=window.pageYOffset;c.left+=window.pageXOffset;var d=new OpenSeadragon.Point(a.x+c.left,a.y+c.top),a=a.width?new OpenSeadragon.Point(a.x+c.left+a.width-2,a.y+c.top+a.height-2):q,d=this.U.viewport.windowToViewportCoordinates(d);return a?(a=this.U.viewport.windowToViewportCoordinates(a),{x:d.x,y:d.y,width:a.x-d.x,height:a.y-d.y}):d};function Jf(){Md(this)}x(Jf,Ld);Jf.prototype.Hb=ba("dzi://openseadragon/something");Jf.prototype.Kc=function(a){return new If(a)};Jf.prototype.Yb=function(a){return!a.id||0!=a.id.indexOf("openseadragon")||!a.hasOwnProperty("drawer")?q:m};function X(){function a(){Kf(c)}this.Zc=q;this.k=[new Cf];window.OpenLayers&&this.k.push(new Gf);window.OpenSeadragon&&this.k.push(new Jf);this.eb=[];var c=this;window.addEventListener?window.addEventListener("load",a,q):window.attachEvent&&window.attachEvent("onload",a)}function Kf(a){a.Zc||(C(a.k,function(a){a.init()}),C(a.eb,function(c){c.initPlugin&&c.initPlugin(a);C(a.k,function(a){a.Bb(c)})}),a.Zc=m)}function Z(a,c){return Fa(a.k,function(a){return Sd(a,c)})}u=X.prototype;
u.ca=function(a,c){var d=k,e=k;v(a)?(d=a,e=c):w(a)&&(e=a);if(d){var f=Z(this,d);f&&f.ca(d,e)}else C(this.k,function(a){a.ca(e)})};u.J=function(a,c){var d=Z(this,a.src);d&&d.J(a,c)};u.addHandler=function(a,c){C(this.k,function(d){d.addHandler(a,c)})};u.Bb=function(a,c){try{var d=new window.annotorious.plugin[a](c);"complete"==document.readyState?(d.initPlugin&&d.initPlugin(this),C(this.k,function(a){a.Bb(d)})):this.eb.push(d)}catch(e){console.log("Could not load plugin: "+a)}};
u.Bc=function(){C(this.k,function(a){a.Bc()})};u.destroy=function(a){if(a){var c=Z(this,a);c&&c.destroy(a)}else C(this.k,function(a){a.destroy()})};u.pa=function(a){var c=Z(this,a);if(c)return c.pa(a)};u.w=function(a){if(a){var c=Z(this,a);return c?c.w(a):[]}var d=[];C(this.k,function(a){Ia(d,a.w())});return d};u.fa=function(a){if(a){var c=Z(this,a);return c?c.fa(a):[]}var d=[];C(this.k,function(a){Ia(d,a.fa())});return d};u.ga=function(a){var c=Z(this,a);return c?c.ga(a):[]};
u.ha=function(a){if(a){var c=Z(this,a);c&&c.ha(a)}else C(this.k,function(a){a.ha()})};u.O=function(a){if(a){var c=Z(this,a);c&&c.O(a)}else C(this.k,function(a){a.O()})};u.r=function(a){if(a){var c=Z(this,a.src);c&&c.r(a)}else C(this.k,function(a){a.r()})};u.Ic=function(a){Kf(this);var c=Fa(this.k,function(c){return c.Yb(a)});c?c.Ic(a):i("Error: Annotorious does not support this media type in the current version or build configuration.")};u.Ub=function(a){var c=this;C(this.w(a),function(a){c.A(a)})};
u.A=function(a){var c=Z(this,a.src);c&&c.A(a)};u.Oc=function(a){var c=k;v(a)&&(c=a);c&&(c=Z(this,c))&&c.Oc(a)};u.reset=function(){C(this.k,function(a){a.destroy();a.init()})};u.ub=function(a,c){var d=Z(this,a);d&&d.ub(a,c)};u.ja=function(a){C(this.k,function(c){c.ja(a)})};u.ua=function(a,c){if(a){var d=Z(this,a);d&&d.ua(a,c)}};u.qe=function(a){a?this.aa(k):this.O(k)};u.Ga=function(a){if(a){var c=Z(this,a);c&&c.Ga(a)}else C(this.k,function(a){a.Ga()})};
u.aa=function(a){if(a){var c=Z(this,a);c&&c.aa(a)}else C(this.k,function(a){a.aa()})};window.anno=new X;X.prototype.activateSelector=X.prototype.ca;X.prototype.addAnnotation=X.prototype.J;X.prototype.addHandler=X.prototype.addHandler;X.prototype.addPlugin=X.prototype.Bb;X.prototype.getItems=X.prototype.Bc;X.prototype.destroy=X.prototype.destroy;X.prototype.getActiveSelector=X.prototype.pa;X.prototype.getAnnotations=X.prototype.w;X.prototype.getAnnotationsAsDOM=X.prototype.fa;X.prototype.getAvailableSelectors=X.prototype.ga;X.prototype.hideAnnotations=X.prototype.ha;X.prototype.hideSelectionWidget=X.prototype.O;
X.prototype.highlightAnnotation=X.prototype.r;X.prototype.makeAnnotatable=X.prototype.Ic;X.prototype.removeAll=X.prototype.Ub;X.prototype.removeAnnotation=X.prototype.A;X.prototype.removeCurrentSelection=X.prototype.Oc;X.prototype.reset=X.prototype.reset;X.prototype.setActiveSelector=X.prototype.ub;X.prototype.setProperties=X.prototype.ja;X.prototype.showAnnotations=X.prototype.Ga;X.prototype.showSelectionWidget=X.prototype.aa;X.prototype.redrawGlow=X.prototype.ua;
window.annotorious||(window.annotorious={});window.annotorious.plugin||(window.annotorious.plugin={});window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=Hd,window.annotorious.geometry.getBoundingRect=Gd);X.prototype.setSelectionEnabled=X.prototype.qe;
