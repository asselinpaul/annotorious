function i(a){throw a;}var k=void 0,l=!0,p=null,q=!1;function s(){return function(){}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}var u,ca=this;function da(a,c){var d=a.split("."),e=ca;!(d[0]in e)&&e.execScript&&e.execScript("var "+d[0]);for(var h;d.length&&(h=d.shift());)!d.length&&ea(c)?e[h]=c:e=e[h]?e[h]:e[h]={}}function fa(){}function ga(a){a.rb=function(){return a.Fd?a.Fd:a.Fd=new a}}
function ha(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c}function ea(a){return a!==k}function ia(a){return"array"==ha(a)}function ja(a){var c=ha(a);return"array"==c||"object"==c&&"number"==typeof a.length}function v(a){return"string"==typeof a}function w(a){return"function"==ha(a)}function ka(a){var c=typeof a;return"object"==c&&a!=p||"function"==c}function la(a){return a[ma]||(a[ma]=++na)}var ma="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),na=0;
function oa(a,c,d){return a.call.apply(a.bind,arguments)}function pa(a,c,d){a||i(Error());if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return a.apply(c,d)}}return function(){return a.apply(c,arguments)}}function qa(a,c,d){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oa:pa;return qa.apply(p,arguments)}
function ra(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,d);return a.apply(this,c)}}var sa=Date.now||function(){return+new Date};function x(a,c){function d(){}d.prototype=c.prototype;a.K=c.prototype;a.prototype=new d;a.prototype.constructor=a};function ta(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ua(a){if(!va.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(wa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(xa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ya,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(za,"&quot;"));return a}var wa=/&/g,xa=/</g,ya=/>/g,za=/\"/g,va=/[&<>\"]/;function Aa(a){return String(a).replace(/\-([a-z])/g,function(a,d){return d.toUpperCase()})};var y=Array.prototype,Ba=y.indexOf?function(a,c,d){return y.indexOf.call(a,c,d)}:function(a,c,d){d=d==p?0:0>d?Math.max(0,a.length+d):d;if(v(a))return!v(c)||1!=c.length?-1:a.indexOf(c,d);for(;d<a.length;d++)if(d in a&&a[d]===c)return d;return-1},C=y.forEach?function(a,c,d){y.forEach.call(a,c,d)}:function(a,c,d){for(var e=a.length,h=v(a)?a.split(""):a,f=0;f<e;f++)f in h&&c.call(d,h[f],f,a)},Ca=y.filter?function(a,c,d){return y.filter.call(a,c,d)}:function(a,c,d){for(var e=a.length,h=[],f=0,j=v(a)?a.split(""):
a,m=0;m<e;m++)if(m in j){var n=j[m];c.call(d,n,m,a)&&(h[f++]=n)}return h},Da=y.map?function(a,c,d){return y.map.call(a,c,d)}:function(a,c,d){for(var e=a.length,h=Array(e),f=v(a)?a.split(""):a,j=0;j<e;j++)j in f&&(h[j]=c.call(d,f[j],j,a));return h},Ea=y.every?function(a,c,d){return y.every.call(a,c,d)}:function(a,c,d){for(var e=a.length,h=v(a)?a.split(""):a,f=0;f<e;f++)if(f in h&&!c.call(d,h[f],f,a))return q;return l};
function Fa(a,c){var d;a:{d=a.length;for(var e=v(a)?a.split(""):a,h=0;h<d;h++)if(h in e&&c.call(k,e[h],h,a)){d=h;break a}d=-1}return 0>d?p:v(a)?a.charAt(d):a[d]}function Ga(a,c){return 0<=Ba(a,c)}function E(a,c){var d=Ba(a,c);0<=d&&y.splice.call(a,d,1)}function Ha(a){var c=a.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=a[e];return d}return[]}
function Ia(a,c){for(var d=1;d<arguments.length;d++){var e=arguments[d],h;if(ia(e)||(h=ja(e))&&e.hasOwnProperty("callee"))a.push.apply(a,e);else if(h)for(var f=a.length,j=e.length,m=0;m<j;m++)a[f+m]=e[m];else a.push(e)}}function Ja(a,c,d){return 2>=arguments.length?y.slice.call(a,c):y.slice.call(a,c,d)}function Ka(a,c){return a>c?1:a<c?-1:0};var La,Ma,Na,Oa,Pa;function Qa(){return ca.navigator?ca.navigator.userAgent:p}function Ra(){return ca.navigator}Oa=Na=Ma=La=q;var Sa;if(Sa=Qa()){var Ta=Ra();La=0==Sa.indexOf("Opera");Ma=!La&&-1!=Sa.indexOf("MSIE");Na=!La&&-1!=Sa.indexOf("WebKit");Oa=!La&&!Na&&"Gecko"==Ta.product}var Ua=La,F=Ma,G=Oa,H=Na,Va=Ra();Pa=-1!=(Va&&Va.platform||"").indexOf("Mac");var Wa=!!Ra()&&-1!=(Ra().appVersion||"").indexOf("X11"),Xa;
a:{var Ya="",Za;if(Ua&&ca.opera)var $a=ca.opera.version,Ya="function"==typeof $a?$a():$a;else if(G?Za=/rv\:([^\);]+)(\)|;)/:F?Za=/MSIE\s+([^\);]+)(\)|;)/:H&&(Za=/WebKit\/(\S+)/),Za)var ab=Za.exec(Qa()),Ya=ab?ab[1]:"";if(F){var bb,cb=ca.document;bb=cb?cb.documentMode:k;if(bb>parseFloat(Ya)){Xa=String(bb);break a}}Xa=Ya}var db={};
function I(a){var c;if(!(c=db[a])){c=0;for(var d=ta(String(Xa)).split("."),e=ta(String(a)).split("."),h=Math.max(d.length,e.length),f=0;0==c&&f<h;f++){var j=d[f]||"",m=e[f]||"",n=RegExp("(\\d*)(\\D*)","g"),t=RegExp("(\\d*)(\\D*)","g");do{var z=n.exec(j)||["","",""],B=t.exec(m)||["","",""];if(0==z[0].length&&0==B[0].length)break;c=((0==z[1].length?0:parseInt(z[1],10))<(0==B[1].length?0:parseInt(B[1],10))?-1:(0==z[1].length?0:parseInt(z[1],10))>(0==B[1].length?0:parseInt(B[1],10))?1:0)||((0==z[2].length)<
(0==B[2].length)?-1:(0==z[2].length)>(0==B[2].length)?1:0)||(z[2]<B[2]?-1:z[2]>B[2]?1:0)}while(0==c)}c=db[a]=0<=c}return c}var eb={};function fb(a){return eb[a]||(eb[a]=F&&!!document.documentMode&&document.documentMode>=a)};var gb,hb=!F||fb(9);!G&&!F||F&&fb(9)||G&&I("1.9.1");F&&I("9");var ib=F||Ua||H;function jb(a){a=a.className;return v(a)&&a.match(/\S+/g)||[]}function kb(a,c){var d=jb(a),e=Ja(arguments,1),h=d.length+e.length;lb(d,e);a.className=d.join(" ");return d.length==h}function mb(a,c){var d=jb(a),e=Ja(arguments,1),h=nb(d,e);a.className=h.join(" ");return h.length==d.length-e.length}function lb(a,c){for(var d=0;d<c.length;d++)Ga(a,c[d])||a.push(c[d])}function nb(a,c){return Ca(a,function(a){return!Ga(c,a)})}
function ob(a,c,d){var e=jb(a);v(c)?E(e,c):ia(c)&&(e=nb(e,c));v(d)&&!Ga(e,d)?e.push(d):ia(d)&&lb(e,d);a.className=e.join(" ")};function pb(a,c){this.x=ea(a)?a:0;this.y=ea(c)?c:0};function qb(a,c){this.width=a;this.height=c}qb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};qb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function rb(a,c){for(var d in a)c.call(k,a[d],d,a)}var sb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tb(a,c){for(var d,e,h=1;h<arguments.length;h++){e=arguments[h];for(d in e)a[d]=e[d];for(var f=0;f<sb.length;f++)d=sb[f],Object.prototype.hasOwnProperty.call(e,d)&&(a[d]=e[d])}};function ub(a){return a?new vb(wb(a)):gb||(gb=new vb)}function xb(){var a,c,d,e;a=document;if(a.querySelectorAll&&a.querySelector)return a.querySelectorAll(".openseadragon-container");if(a.getElementsByClassName){var h=a.getElementsByClassName("openseadragon-container");return h}h=a.getElementsByTagName("*");e={};for(c=d=0;a=h[c];c++){var f=a.className;"function"==typeof f.split&&Ga(f.split(/\s+/),"openseadragon-container")&&(e[d++]=a)}e.length=d;return e}
function yb(a,c){rb(c,function(c,e){"style"==e?a.style.cssText=c:"class"==e?a.className=c:"for"==e?a.htmlFor=c:e in zb?a.setAttribute(zb[e],c):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,c):a[e]=c})}var zb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Ab(a,c,d){var e=arguments,h=document,f=e[0],j=e[1];if(!hb&&j&&(j.name||j.type)){f=["<",f];j.name&&f.push(' name="',ua(j.name),'"');if(j.type){f.push(' type="',ua(j.type),'"');var m={};tb(m,j);delete m.type;j=m}f.push(">");f=f.join("")}f=h.createElement(f);j&&(v(j)?f.className=j:ia(j)?kb.apply(p,[f].concat(j)):yb(f,j));2<e.length&&Bb(h,f,e,2);return f}
function Bb(a,c,d,e){function h(d){d&&c.appendChild(v(d)?a.createTextNode(d):d)}for(;e<d.length;e++){var f=d[e];if(ja(f)&&!(ka(f)&&0<f.nodeType)){var j;a:{if(f&&"number"==typeof f.length){if(ka(f)){j="function"==typeof f.item||"string"==typeof f.item;break a}if(w(f)){j="function"==typeof f.item;break a}}j=q}C(j?Ha(f):f,h)}else h(f)}}function Cb(a){for(var c;c=a.firstChild;)a.removeChild(c)}function Db(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Eb(a){return ka(a)&&1==a.nodeType}
function Fb(a,c){if(a.contains&&1==c.nodeType)return a==c||a.contains(c);if("undefined"!=typeof a.compareDocumentPosition)return a==c||Boolean(a.compareDocumentPosition(c)&16);for(;c&&a!=c;)c=c.parentNode;return c==a}function wb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Gb(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?(a=a.tabIndex,"number"==typeof a&&0<=a&&32768>a):q}function vb(a){this.N=a||ca.document||document}u=vb.prototype;u.ud=ub;
u.e=function(a){return v(a)?this.N.getElementById(a):a};u.ha=yb;u.createElement=function(a){return this.N.createElement(a)};u.createTextNode=function(a){return this.N.createTextNode(a)};function Hb(a){var c=a.N,a=!H?c.documentElement:c.body,c=c.parentWindow||c.defaultView;return new pb(c.pageXOffset||a.scrollLeft,c.pageYOffset||a.scrollTop)}u.appendChild=function(a,c){a.appendChild(c)};u.append=function(a,c){Bb(wb(a),a,arguments,1)};u.contains=Fb;var Ib;Ib=ba(l);/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function Jb(a,c){var d=c||[];a&&d.push(a);return d}var Kb=H&&"BackCompat"==document.compatMode,Lb=document.firstChild.children?"children":"childNodes",Mb=q;
function Nb(a){function c(){0<=t&&(A.id=d(t,D).replace(/\\/g,""),t=-1);if(0<=z){var a=z==D?p:d(z,D);0>">~+".indexOf(a)?A.H=a:A.Rb=a;z=-1}0<=n&&(A.ca.push(d(n+1,D).replace(/\\/g,"")),n=-1)}function d(c,d){return ta(a.slice(c,d))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",e=[],h=-1,f=-1,j=-1,m=-1,n=-1,t=-1,z=-1,B="",K="",W,D=0,Pe=a.length,A=p,Q=p;B=K,K=a.charAt(D),D<Pe;D++)if("\\"!=B)if(A||(W=D,A={Wa:p,Da:[],Bb:[],ca:[],H:p,Rb:p,id:p,Dc:function(){return Mb?this.le:this.H}},z=D),0<=h)if("]"==
K){Q.zc?Q.Kc=d(j||h+1,D):Q.zc=d(h+1,D);if((h=Q.Kc)&&('"'==h.charAt(0)||"'"==h.charAt(0)))Q.Kc=h.slice(1,-1);A.Bb.push(Q);Q=p;h=j=-1}else"="==K&&(j=0<="|~^$*".indexOf(B)?B:"",Q.type=j+K,Q.zc=d(h+1,D-j.length),j=D+1);else 0<=f?")"==K&&(0<=m&&(Q.value=d(f+1,D)),m=f=-1):"#"==K?(c(),t=D+1):"."==K?(c(),n=D):":"==K?(c(),m=D):"["==K?(c(),h=D,Q={}):"("==K?(0<=m&&(Q={name:d(m+1,D),value:p},A.Da.push(Q)),f=D):" "==K&&B!=K&&(c(),0<=m&&A.Da.push({name:d(m+1,D)}),A.Id=A.Da.length||A.Bb.length||A.ca.length,A.Ce=
A.Wa=d(W,D),A.le=A.H=A.Rb?p:A.H||"*",A.H&&(A.H=A.H.toUpperCase()),e.length&&e[e.length-1].Rb&&(A.Ed=e.pop(),A.Wa=A.Ed.Wa+" "+A.Wa),e.push(A),A=p);return e}function Ob(a,c){return!a?c:!c?a:function(){return a.apply(window,arguments)&&c.apply(window,arguments)}}function Pb(a){return 1==a.nodeType}function Qb(a,c){return!a?"":"class"==c?a.className||"":"for"==c?a.htmlFor||"":"style"==c?a.style.cssText||"":(Mb?a.getAttribute(c):a.getAttribute(c,2))||""}
var Rb={"*=":function(a,c){return function(d){return 0<=Qb(d,a).indexOf(c)}},"^=":function(a,c){return function(d){return 0==Qb(d,a).indexOf(c)}},"$=":function(a,c){return function(d){d=" "+Qb(d,a);return d.lastIndexOf(c)==d.length-c.length}},"~=":function(a,c){var d=" "+c+" ";return function(c){return 0<=(" "+Qb(c,a)+" ").indexOf(d)}},"|=":function(a,c){c=" "+c;return function(d){d=" "+Qb(d,a);return d==c||0==d.indexOf(c+"-")}},"=":function(a,c){return function(d){return Qb(d,a)==c}}},Sb="undefined"==
typeof document.firstChild.nextElementSibling,Tb=!Sb?"nextElementSibling":"nextSibling",Ub=!Sb?"previousElementSibling":"previousSibling",Vb=Sb?Pb:Ib;function Wb(a){for(;a=a[Ub];)if(Vb(a))return q;return l}function Xb(a){for(;a=a[Tb];)if(Vb(a))return q;return l}function Yb(a){var c=a.parentNode,d=0,e=c[Lb],h=a._i||-1,f=c._l||-1;if(!e)return-1;e=e.length;if(f==e&&0<=h&&0<=f)return h;c._l=e;h=-1;for(c=c.firstElementChild||c.firstChild;c;c=c[Tb])Vb(c)&&(c._i=++d,a===c&&(h=d));return h}
function Zb(a){return!(Yb(a)%2)}function $b(a){return Yb(a)%2}
var bc={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Wb},"last-child":function(){return Xb},"only-child":function(){return function(a){return!Wb(a)||!Xb(a)?q:l}},empty:function(){return function(a){for(var c=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var d=c[a].nodeType;if(1===d||3==d)return q}return l}},contains:function(a,c){var d=c.charAt(0);if('"'==d||"'"==d)c=c.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(c)}},
not:function(a,c){var d=Nb(c)[0],e={D:1};"*"!=d.H&&(e.H=1);d.ca.length||(e.ca=1);var h=ac(d,e);return function(a){return!h(a)}},"nth-child":function(a,c){if("odd"==c)return $b;if("even"==c)return Zb;if(-1!=c.indexOf("n")){var d=c.split("n",2),e=d[0]?"-"==d[0]?-1:parseInt(d[0],10):1,h=d[1]?parseInt(d[1],10):0,f=0,j=-1;0<e?0>h?h=h%e&&e+h%e:0<h&&(h>=e&&(f=h-h%e),h%=e):0>e&&(e*=-1,0<h&&(j=h,h%=e));if(0<e)return function(a){a=Yb(a);return a>=f&&(0>j||a<=j)&&a%e==h};c=h}var m=parseInt(c,10);return function(a){return Yb(a)==
m}}},cc=F?function(a){var c=a.toLowerCase();"class"==c&&(a="className");return function(d){return Mb?d.getAttribute(a):d[a]||d[c]}}:function(a){return function(c){return c&&c.getAttribute&&c.hasAttribute(a)}};
function ac(a,c){if(!a)return Ib;var c=c||{},d=p;c.D||(d=Ob(d,Pb));c.H||"*"!=a.H&&(d=Ob(d,function(c){return c&&c.tagName==a.Dc()}));c.ca||C(a.ca,function(a,c){var f=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");d=Ob(d,function(a){return f.test(a.className)});d.count=c});c.Da||C(a.Da,function(a){var c=a.name;bc[c]&&(d=Ob(d,bc[c](c,a.value)))});c.Bb||C(a.Bb,function(a){var c,f=a.zc;a.type&&Rb[a.type]?c=Rb[a.type](f,a.Kc):f.length&&(c=cc(f));c&&(d=Ob(d,c))});c.id||a.id&&(d=Ob(d,function(c){return!!c&&c.id==a.id}));
d||"default"in c||(d=Ib);return d}var dc={};
function ec(a){var c=dc[a.Wa];if(c)return c;var d=a.Ed,d=d?d.Rb:"",e=ac(a,{D:1}),h="*"==a.H,f=document.getElementsByClassName;if(d)if(f={D:1},h&&(f.H=1),e=ac(a,f),"+"==d)var j=e,c=function(a,c,d){for(;a=a[Tb];)if(!Sb||Pb(a)){(!d||fc(a,d))&&j(a)&&c.push(a);break}return c};else if("~"==d)var m=e,c=function(a,c,d){for(a=a[Tb];a;){if(Vb(a)){if(d&&!fc(a,d))break;m(a)&&c.push(a)}a=a[Tb]}return c};else{if(">"==d)var n=e,n=n||Ib,c=function(a,c,d){for(var e=0,h=a[Lb];a=h[e++];)Vb(a)&&((!d||fc(a,d))&&n(a,e))&&
c.push(a);return c}}else if(a.id)e=!a.Id&&h?Ib:ac(a,{D:1,id:1}),c=function(c,d){var h=ub(c).e(a.id),f;if(f=h&&e(h))if(!(f=9==c.nodeType)){for(f=h.parentNode;f&&f!=c;)f=f.parentNode;f=!!f}if(f)return Jb(h,d)};else if(f&&/\{\s*\[native code\]\s*\}/.test(String(f))&&a.ca.length&&!Kb)var e=ac(a,{D:1,ca:1,id:1}),t=a.ca.join(" "),c=function(a,c){for(var d=Jb(0,c),h,f=0,j=a.getElementsByClassName(t);h=j[f++];)e(h,a)&&d.push(h);return d};else!h&&!a.Id?c=function(c,d){for(var e=Jb(0,d),h,f=0,j=c.getElementsByTagName(a.Dc());h=
j[f++];)e.push(h);return e}:(e=ac(a,{D:1,H:1,id:1}),c=function(c,d){for(var h=Jb(0,d),f,j=0,m=c.getElementsByTagName(a.Dc());f=m[j++];)e(f,c)&&h.push(f);return h});return dc[a.Wa]=c}var gc={},hc={};function ic(a){var c=Nb(ta(a));if(1==c.length){var d=ec(c[0]);return function(a){if(a=d(a,[]))a.Qb=l;return a}}return function(a){for(var a=Jb(a),d,f,j=c.length,m,n,t=0;t<j;t++){n=[];d=c[t];f=a.length-1;0<f&&(m={},n.Qb=l);f=ec(d);for(var z=0;d=a[z];z++)f(d,n,m);if(!n.length)break;a=n}return n}}
var jc=!!document.querySelectorAll&&(!H||I("526"));
function kc(a,c){if(jc){var d=hc[a];if(d&&!c)return d}if(d=gc[a])return d;var d=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&e&&(c=l);if(jc&&!c&&-1==">~+".indexOf(d)&&(!F||-1==a.indexOf(":"))&&!(Kb&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var h=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return hc[a]=function(c){try{9==c.nodeType||e||i("");var d=c.querySelectorAll(h);F?d.Xd=l:d.Qb=l;return d}catch(f){return kc(a,l)(c)}}}var f=a.split(/\s*,\s*/);return gc[a]=
2>f.length?ic(a):function(a){for(var c=0,d=[],e;e=f[c++];)d=d.concat(ic(e)(a));return d}}var lc=0,mc=F?function(a){return Mb?a.getAttribute("_uid")||a.setAttribute("_uid",++lc)||lc:a.uniqueID}:function(a){return a._uid||(a._uid=++lc)};function fc(a,c){if(!c)return 1;var d=mc(a);return!c[d]?c[d]=1:0}
function nc(a){if(a&&a.Qb)return a;var c=[];if(!a||!a.length)return c;a[0]&&c.push(a[0]);if(2>a.length)return c;lc++;if(F&&Mb){var d=lc+"";a[0].setAttribute("_zipIdx",d);for(var e=1,h;h=a[e];e++)a[e].getAttribute("_zipIdx")!=d&&c.push(h),h.setAttribute("_zipIdx",d)}else if(F&&a.Xd)try{for(e=1;h=a[e];e++)Pb(h)&&c.push(h)}catch(f){}else{a[0]&&(a[0]._zipIdx=lc);for(e=1;h=a[e];e++)a[e]._zipIdx!=lc&&c.push(h),h._zipIdx=lc}return c}
function J(a,c){if(!a)return[];if(a.constructor==Array)return a;if(!v(a))return[a];if(v(c)&&(c=v(c)?document.getElementById(c):c,!c))return[];var c=c||document,d=c.ownerDocument||c.documentElement;Mb=c.contentType&&"application/xml"==c.contentType||Ua&&(c.doctype||"[object XMLDocument]"==d.toString())||!!d&&(F?d.xml:c.xmlVersion||d.xmlVersion);return(d=kc(a)(c))&&d.Qb?d:nc(d)}J.Da=bc;da("goog.dom.query",J);da("goog.dom.query.pseudos",J.Da);var oc=!F||fb(9),pc=!F||fb(9),qc=F&&!I("9");!H||I("528");G&&I("1.9b")||F&&I("8")||Ua&&I("9.5")||H&&I("528");G&&!I("8")||F&&I("9");function rc(){0!=sc&&(this.we=Error().stack,la(this))}var sc=0;rc.prototype.pd=q;function tc(a,c){this.type=a;this.currentTarget=this.target=c}u=tc.prototype;u.Ca=q;u.defaultPrevented=q;u.Vb=l;u.stopPropagation=function(){this.Ca=l};u.preventDefault=function(){this.defaultPrevented=l;this.Vb=q};function uc(a){a.preventDefault()};function vc(a){vc[" "](a);return a}vc[" "]=fa;function wc(a,c){a&&this.init(a,c)}x(wc,tc);var xc=[1,4,2];u=wc.prototype;u.target=p;u.relatedTarget=p;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=q;u.altKey=q;u.shiftKey=q;u.metaKey=q;u.Oc=q;u.n=p;
u.init=function(a,c){var d=this.type=a.type;tc.call(this,d);this.target=a.target||a.srcElement;this.currentTarget=c;var e=a.relatedTarget;if(e){if(G){var h;a:{try{vc(e.nodeName);h=l;break a}catch(f){}h=q}h||(e=p)}}else"mouseover"==d?e=a.fromElement:"mouseout"==d&&(e=a.toElement);this.relatedTarget=e;this.offsetX=H||a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=H||a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==d?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Oc=Pa?a.metaKey:a.ctrlKey;this.state=a.state;this.n=a;a.defaultPrevented&&this.preventDefault();delete this.Ca};function yc(a){return(oc?0==a.n.button:"click"==a.type?l:!!(a.n.button&xc[0]))&&!(H&&Pa&&a.ctrlKey)}
u.stopPropagation=function(){wc.K.stopPropagation.call(this);this.n.stopPropagation?this.n.stopPropagation():this.n.cancelBubble=l};u.preventDefault=function(){wc.K.preventDefault.call(this);var a=this.n;if(a.preventDefault)a.preventDefault();else if(a.returnValue=q,qc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(c){}};u.Yd=aa("n");function zc(){}var Ac=0;u=zc.prototype;u.key=0;u.Ea=q;u.jd=q;u.init=function(a,c,d,e,h,f){w(a)?this.Hd=l:a&&a.handleEvent&&w(a.handleEvent)?this.Hd=q:i(Error("Invalid listener argument"));this.Va=a;this.Ld=c;this.src=d;this.type=e;this.capture=!!h;this.Ra=f;this.jd=q;this.key=++Ac;this.Ea=q};u.handleEvent=function(a){return this.Hd?this.Va.call(this.Ra||this.src,a):this.Va.handleEvent.call(this.Va,a)};var Bc={},L={},Cc={},Dc={};
function M(a,c,d,e,h){if(c){if(ia(c)){for(var f=0;f<c.length;f++)M(a,c[f],d,e,h);return p}var e=!!e,j=L;c in j||(j[c]={l:0,P:0});j=j[c];e in j||(j[e]={l:0,P:0},j.l++);var j=j[e],m=la(a),n;j.P++;if(j[m]){n=j[m];for(f=0;f<n.length;f++)if(j=n[f],j.Va==d&&j.Ra==h){if(j.Ea)break;return n[f].key}}else n=j[m]=[],j.l++;var t=Ec,z=pc?function(a){return t.call(z.src,z.key,a)}:function(a){a=t.call(z.src,z.key,a);if(!a)return a},f=z;f.src=a;j=new zc;j.init(d,f,a,c,e,h);d=j.key;f.key=d;n.push(j);Bc[d]=j;Cc[m]||
(Cc[m]=[]);Cc[m].push(j);a.addEventListener?(a==ca||!a.md)&&a.addEventListener(c,f,e):a.attachEvent(c in Dc?Dc[c]:Dc[c]="on"+c,f);return d}i(Error("Invalid event type"))}function Fc(a,c,d,e,h){if(ia(c))for(var f=0;f<c.length;f++)Fc(a,c[f],d,e,h);else if(e=!!e,a=Gc(a,c,e))for(f=0;f<a.length;f++)if(a[f].Va==d&&a[f].capture==e&&a[f].Ra==h){N(a[f].key);break}}
function N(a){if(!Bc[a])return q;var c=Bc[a];if(c.Ea)return q;var d=c.src,e=c.type,h=c.Ld,f=c.capture;d.removeEventListener?(d==ca||!d.md)&&d.removeEventListener(e,h,f):d.detachEvent&&d.detachEvent(e in Dc?Dc[e]:Dc[e]="on"+e,h);d=la(d);Cc[d]&&(h=Cc[d],E(h,c),0==h.length&&delete Cc[d]);c.Ea=l;if(c=L[e][f][d])c.Kd=l,Hc(e,f,d,c);delete Bc[a];return l}
function Hc(a,c,d,e){if(!e.Lb&&e.Kd){for(var h=0,f=0;h<e.length;h++)e[h].Ea?e[h].Ld.src=p:(h!=f&&(e[f]=e[h]),f++);e.length=f;e.Kd=q;0==f&&(delete L[a][c][d],L[a][c].l--,0==L[a][c].l&&(delete L[a][c],L[a].l--),0==L[a].l&&delete L[a])}}function Gc(a,c,d){var e=L;return c in e&&(e=e[c],d in e&&(e=e[d],a=la(a),e[a]))?e[a]:p}
function Ic(a,c,d,e,h){var f=1,c=la(c);if(a[c]){a.P--;a=a[c];a.Lb?a.Lb++:a.Lb=1;try{for(var j=a.length,m=0;m<j;m++){var n=a[m];n&&!n.Ea&&(f&=Jc(n,h)!==q)}}finally{a.Lb--,Hc(d,e,c,a)}}return Boolean(f)}function Jc(a,c){a.jd&&N(a.key);return a.handleEvent(c)}
function Ec(a,c){if(!Bc[a])return l;var d=Bc[a],e=d.type,h=L;if(!(e in h))return l;var h=h[e],f,j;if(!pc){var m;if(!(m=c))a:{m=["window","event"];for(var n=ca;f=m.shift();)if(n[f]!=p)n=n[f];else{m=p;break a}m=n}f=m;m=l in h;n=q in h;if(m){if(0>f.keyCode||f.returnValue!=k)return l;a:{var t=q;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(z){t=l}if(t||f.returnValue==k)f.returnValue=l}}t=new wc;t.init(f,this);f=l;try{if(m){for(var B=[],K=t.currentTarget;K;K=K.parentNode)B.push(K);j=h[l];j.P=j.l;for(var W=
B.length-1;!t.Ca&&0<=W&&j.P;W--)t.currentTarget=B[W],f&=Ic(j,B[W],e,l,t);if(n){j=h[q];j.P=j.l;for(W=0;!t.Ca&&W<B.length&&j.P;W++)t.currentTarget=B[W],f&=Ic(j,B[W],e,q,t)}}else f=Jc(d,t)}finally{B&&(B.length=0)}return f}e=new wc(c,this);return f=Jc(d,e)};function Kc(a){rc.call(this);this.Bd=a;this.j=[]}x(Kc,rc);var Lc=[];function O(a,c,d,e,h){ia(d)||(Lc[0]=d,d=Lc);for(var f=0;f<d.length;f++){var j=M(c,d[f],e||a,h||q,a.Bd||a);a.j.push(j)}return a}function Mc(a,c,d,e,h,f){if(ia(d))for(var j=0;j<d.length;j++)Mc(a,c,d[j],e,h,f);else{a:{e=e||a;f=f||a.Bd||a;h=!!h;if(c=Gc(c,d,h))for(d=0;d<c.length;d++)if(!c[d].Ea&&c[d].Va==e&&c[d].capture==h&&c[d].Ra==f){c=c[d];break a}c=p}c&&(c=c.key,N(c),E(a.j,c))}return a}
Kc.prototype.Tb=function(){C(this.j,N);this.j.length=0};Kc.prototype.handleEvent=function(){i(Error("EventHandler.handleEvent not implemented"))};function Nc(){rc.call(this)}x(Nc,rc);u=Nc.prototype;u.md=l;u.Nc=p;u.Tc=function(a){this.Nc=a};u.addEventListener=function(a,c,d,e){M(this,a,c,d,e)};u.removeEventListener=function(a,c,d,e){Fc(this,a,c,d,e)};
u.dispatchEvent=function(a){var c=a.type||a,d=L;if(c in d){if(v(a))a=new tc(a,this);else if(a instanceof tc)a.target=a.target||this;else{var e=a,a=new tc(c,this);tb(a,e)}var e=1,h,d=d[c],c=l in d,f;if(c){h=[];for(f=this;f;f=f.Nc)h.push(f);f=d[l];f.P=f.l;for(var j=h.length-1;!a.Ca&&0<=j&&f.P;j--)a.currentTarget=h[j],e&=Ic(f,h[j],a.type,l,a)&&a.Vb!=q}if(q in d)if(f=d[q],f.P=f.l,c)for(j=0;!a.Ca&&j<h.length&&f.P;j++)a.currentTarget=h[j],e&=Ic(f,h[j],a.type,q,a)&&a.Vb!=q;else for(h=this;!a.Ca&&h&&f.P;h=
h.Nc)a.currentTarget=h,e&=Ic(f,h,a.type,q,a)&&a.Vb!=q;a=Boolean(e)}else a=l;return a};function Oc(a,c,d,e){this.top=a;this.right=c;this.bottom=d;this.left=e}Oc.prototype.contains=function(a){return!this||!a?q:a instanceof Oc?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Pc(a,c,d,e){this.left=a;this.top=c;this.width=d;this.height=e}Pc.prototype.contains=function(a){return a instanceof Pc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function P(a,c,d){v(c)?Qc(a,d,c):rb(c,ra(Qc,a))}function Qc(a,c,d){a.style[Aa(d)]=c}function R(a,c){var d=wb(a);return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(a,p))?d[c]||d.getPropertyValue(c)||"":""}function Rc(a,c){return a.currentStyle?a.currentStyle[c]:p}function Sc(a,c){return R(a,c)||Rc(a,c)||a.style&&a.style[c]}function Tc(a,c,d){var e,h=G&&(Pa||Wa)&&I("1.9");c instanceof pb?(e=c.x,c=c.y):(e=c,c=d);a.style.left=Uc(e,h);a.style.top=Uc(c,h)}
function Vc(a){var c=a.getBoundingClientRect();F&&(a=a.ownerDocument,c.left-=a.documentElement.clientLeft+a.body.clientLeft,c.top-=a.documentElement.clientTop+a.body.clientTop);return c}
function Wc(a){if(F&&!fb(8))return a.offsetParent;for(var c=wb(a),d=Sc(a,"position"),e="fixed"==d||"absolute"==d,a=a.parentNode;a&&a!=c;a=a.parentNode)if(d=Sc(a,"position"),e=e&&"static"==d&&a!=c.documentElement&&a!=c.body,!e&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==d||"absolute"==d||"relative"==d))return a;return p}
function Xc(a){var c,d=wb(a),e=Sc(a,"position"),h=G&&d.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==e&&(c=d.getBoxObjectFor(a))&&(0>c.screenX||0>c.screenY),f=new pb(0,0),j;c=d?wb(d):document;if(j=F)if(j=!fb(9))ub(c),j=q;j=j?c.body:c.documentElement;if(a==j)return f;if(a.getBoundingClientRect)c=Vc(a),a=Hb(ub(d)),f.x=c.left+a.x,f.y=c.top+a.y;else if(d.getBoxObjectFor&&!h)c=d.getBoxObjectFor(a),a=d.getBoxObjectFor(j),f.x=c.screenX-a.screenX,f.y=c.screenY-a.screenY;else{h=a;do{f.x+=h.offsetLeft;
f.y+=h.offsetTop;h!=a&&(f.x+=h.clientLeft||0,f.y+=h.clientTop||0);if(H&&"fixed"==Sc(h,"position")){f.x+=d.body.scrollLeft;f.y+=d.body.scrollTop;break}h=h.offsetParent}while(h&&h!=a);if(Ua||H&&"absolute"==e)f.y-=d.body.offsetTop;for(h=a;(h=Wc(h))&&h!=d.body&&h!=j;)if(f.x-=h.scrollLeft,!Ua||"TR"!=h.tagName)f.y-=h.scrollTop}return f}function Yc(a,c){var d=Zc(a),e=Zc(c);return new pb(d.x-e.x,d.y-e.y)}
function Zc(a){var c=new pb;if(1==a.nodeType){if(a.getBoundingClientRect){var d=Vc(a);c.x=d.left;c.y=d.top}else{var d=Hb(ub(a)),e=Xc(a);c.x=e.x-d.x;c.y=e.y-d.y}if(G&&!I(12)){var h;F?h="-ms-transform":H?h="-webkit-transform":Ua?h="-o-transform":G&&(h="-moz-transform");var f;h&&(f=Sc(a,h));f||(f=Sc(a,"transform"));f?(a=f.match($c),a=!a?new pb(0,0):new pb(parseFloat(a[1]),parseFloat(a[2]))):a=new pb(0,0);c=new pb(c.x+a.x,c.y+a.y)}}else h=w(a.Yd),f=a,a.targetTouches?f=a.targetTouches[0]:h&&a.n.targetTouches&&
(f=a.n.targetTouches[0]),c.x=f.clientX,c.y=f.clientY;return c}function ad(a,c,d){c instanceof qb?(d=c.height,c=c.width):d==k&&i(Error("missing height argument"));a.style.width=Uc(c,l);a.style.height=Uc(d,l)}function Uc(a,c){"number"==typeof a&&(a=(c?Math.round(a):a)+"px");return a}
function bd(a){if("none"!=Sc(a,"display"))return cd(a);var c=a.style,d=c.display,e=c.visibility,h=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=cd(a);c.display=d;c.position=h;c.visibility=e;return a}function cd(a){var c=a.offsetWidth,d=a.offsetHeight,e=H&&!c&&!d;return(!ea(c)||e)&&a.getBoundingClientRect?(a=Vc(a),new qb(a.right-a.left,a.bottom-a.top)):new qb(c,d)}function dd(a){var c=Xc(a),a=bd(a);return new Pc(c.x,c.y,a.width,a.height)}
function S(a,c){var d=a.style;"opacity"in d?d.opacity=c:"MozOpacity"in d?d.MozOpacity=c:"filter"in d&&(d.filter=""===c?"":"alpha(opacity="+100*c+")")}function T(a,c){a.style.display=c?"":"none"}function ed(a){return"rtl"==Sc(a,"direction")}var fd=G?"MozUserSelect":H?"WebkitUserSelect":p;
function gd(a,c){if(/^\d+px?$/.test(c))return parseInt(c,10);var d=a.style.left,e=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=c;var h=a.style.pixelLeft;a.style.left=d;a.runtimeStyle.left=e;return h}
function hd(a,c){if(F){var d=gd(a,Rc(a,c+"Left")),e=gd(a,Rc(a,c+"Right")),h=gd(a,Rc(a,c+"Top")),f=gd(a,Rc(a,c+"Bottom"));return new Oc(h,e,f,d)}d=R(a,c+"Left");e=R(a,c+"Right");h=R(a,c+"Top");f=R(a,c+"Bottom");return new Oc(parseFloat(h),parseFloat(e),parseFloat(f),parseFloat(d))}var id={thin:2,medium:4,thick:6};function jd(a,c){if("none"==Rc(a,c+"Style"))return 0;var d=Rc(a,c+"Width");return d in id?id[d]:gd(a,d)}
function kd(a){if(F){var c=jd(a,"borderLeft"),d=jd(a,"borderRight"),e=jd(a,"borderTop"),a=jd(a,"borderBottom");return new Oc(e,d,a,c)}c=R(a,"borderLeftWidth");d=R(a,"borderRightWidth");e=R(a,"borderTopWidth");a=R(a,"borderBottomWidth");return new Oc(parseFloat(e),parseFloat(d),parseFloat(a),parseFloat(c))}var $c=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function ld(a,c,d){rc.call(this);this.target=a;this.handle=c||a;this.Ic=d||new Pc(NaN,NaN,NaN,NaN);this.N=wb(a);this.ma=new Kc(this);M(this.handle,["touchstart","mousedown"],this.pe,q,this)}x(ld,Nc);var md=F||G&&I("1.9.3");u=ld.prototype;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.Pd=0;u.Qd=0;u.La=0;u.Ma=0;u.qd=l;u.za=q;u.Dd=0;u.he=0;u.ee=q;u.Uc=q;u.Fb=aa("ma");function nd(a){ea(a.ta)||(a.ta=ed(a.target));return a.ta}
u.pe=function(a){var c="mousedown"==a.type;if(this.qd&&!this.za&&(!c||yc(a))){od(a);if(0==this.Dd)if(this.dispatchEvent(new pd("start",this,a.clientX,a.clientY,a)))this.za=l,a.preventDefault();else return;else a.preventDefault();var c=this.N,d=c.documentElement,e=!md;O(this.ma,c,["touchmove","mousemove"],this.ce,e);O(this.ma,c,["touchend","mouseup"],this.Db,e);md?(d.setCapture(q),O(this.ma,d,"losecapture",this.Db)):O(this.ma,c?c.parentWindow||c.defaultView:window,"blur",this.Db);F&&this.ee&&O(this.ma,
c,"dragstart",uc);this.ne&&O(this.ma,this.ne,"scroll",this.ke,e);this.clientX=this.Pd=a.clientX;this.clientY=this.Qd=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Uc?(a=this.target,c=a.offsetLeft,d=a.offsetParent,!d&&"fixed"==Sc(a,"position")&&(d=wb(a).documentElement),d?(G?(e=kd(d),c+=e.left):fb(8)&&(e=kd(d),c-=e.left),a=ed(d)?d.clientWidth-(c+a.offsetWidth):c):a=c):a=this.target.offsetLeft;this.La=a;this.Ma=this.target.offsetTop;this.Mc=Hb(ub(this.N));this.he=sa()}else this.dispatchEvent("earlycancel")};
u.Db=function(a,c){this.ma.Tb();md&&this.N.releaseCapture();if(this.za){od(a);this.za=q;var d=qd(this,this.La),e=rd(this,this.Ma);this.dispatchEvent(new pd("end",this,a.clientX,a.clientY,a,d,e,c||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function od(a){var c=a.type;"touchstart"==c||"touchmove"==c?a.init(a.n.targetTouches[0],a.currentTarget):("touchend"==c||"touchcancel"==c)&&a.init(a.n.changedTouches[0],a.currentTarget)}
u.ce=function(a){if(this.qd){od(a);var c=(this.Uc&&nd(this)?-1:1)*(a.clientX-this.clientX),d=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.za){var e=this.Pd-this.clientX,h=this.Qd-this.clientY;if(e*e+h*h>this.Dd)if(this.dispatchEvent(new pd("start",this,a.clientX,a.clientY,a)))this.za=l;else{this.pd||this.Db(a);return}}d=sd(this,c,d);c=d.x;d=d.y;this.za&&this.dispatchEvent(new pd("beforedrag",this,a.clientX,a.clientY,a,
c,d))&&(td(this,a,c,d),a.preventDefault())}};function sd(a,c,d){var e=Hb(ub(a.N)),c=c+(e.x-a.Mc.x),d=d+(e.y-a.Mc.y);a.Mc=e;a.La+=c;a.Ma+=d;c=qd(a,a.La);a=rd(a,a.Ma);return new pb(c,a)}u.ke=function(a){var c=sd(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;td(this,a,c.x,c.y)};function td(a,c,d,e){a.od(d,e);a.dispatchEvent(new pd("drag",a,c.clientX,c.clientY,c,d,e))}
function qd(a,c){var d=a.Ic,e=!isNaN(d.left)?d.left:p,d=!isNaN(d.width)?d.width:0;return Math.min(e!=p?e+d:Infinity,Math.max(e!=p?e:-Infinity,c))}function rd(a,c){var d=a.Ic,e=!isNaN(d.top)?d.top:p,d=!isNaN(d.height)?d.height:0;return Math.min(e!=p?e+d:Infinity,Math.max(e!=p?e:-Infinity,c))}u.od=function(a,c){this.Uc&&nd(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=c+"px"};
function pd(a,c,d,e,h,f,j,m){tc.call(this,a);this.clientX=d;this.clientY=e;this.ue=h;this.left=ea(f)?f:c.La;this.top=ea(j)?j:c.Ma;this.ye=c;this.xe=!!m}x(pd,tc);function ud(a){for(var c=0,d=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft-a.scrollLeft,d+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:d,left:c}};function vd(){this.ab=[]}vd.prototype.addHandler=function(a,c){this.ab[a]||(this.ab[a]=[]);this.ab[a].push(c)};vd.prototype.Ub=function(a,c){var d=this.ab[a];d&&E(d,c)};vd.prototype.fireEvent=function(a,c,d){var e=q;(a=this.ab[a])&&C(a,function(a){a=a(c,d);ea(a)&&!a&&(e=l)});return e};function wd(a,c){this.$={};this.j=[];var d=arguments.length;if(1<d){d%2&&i(Error("Uneven number of arguments"));for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+1])}else if(a){var h;if(a instanceof wd)xd(a),h=a.j.concat(),e=U(a);else{var d=[],f=0;for(h in a)d[f++]=h;h=d;d=[];f=0;for(e in a)d[f++]=a[e];e=d}for(d=0;d<h.length;d++)this.set(h[d],e[d])}}u=wd.prototype;u.l=0;u.Vc=0;function U(a){xd(a);for(var c=[],d=0;d<a.j.length;d++)c.push(a.$[a.j[d]]);return c}
u.clear=function(){this.$={};this.Vc=this.l=this.j.length=0};u.remove=function(a){return yd(this.$,a)?(delete this.$[a],this.l--,this.Vc++,this.j.length>2*this.l&&xd(this),l):q};function xd(a){if(a.l!=a.j.length){for(var c=0,d=0;c<a.j.length;){var e=a.j[c];yd(a.$,e)&&(a.j[d++]=e);c++}a.j.length=d}if(a.l!=a.j.length){for(var h={},d=c=0;c<a.j.length;)e=a.j[c],yd(h,e)||(a.j[d++]=e,h[e]=1),c++;a.j.length=d}}u.get=function(a,c){return yd(this.$,a)?this.$[a]:c};
u.set=function(a,c){yd(this.$,a)||(this.l++,this.j.push(a),this.Vc++);this.$[a]=c};function yd(a,c){return Object.prototype.hasOwnProperty.call(a,c)};function zd(a,c){this.x=a;this.y=c};function Ad(a){this.points=a}function Bd(a){for(var c=0,d=a.length-1,e=0;e<a.length;e++)c+=(a[d].x+a[e].x)*(a[d].y-a[e].y),d=e;return c/2}
function Cd(a,c){for(var d,e=d=0,h,f=a.length-1,j=0;j<a.length;j++)h=a[j].x*a[f].y-a[f].x*a[j].y,d+=(a[j].x+a[f].x)*h,e+=(a[j].y+a[f].y)*h,f=j;h=6*Bd(a);d=new zd(Math.abs(d/h),Math.abs(e/h));e=[];for(h=0;h<a.length;h++){var f=a[h],m=(0>Bd(a)?-1:1)*c,j=f.x-d.x,n=f.y-d.y,t=0<m?1:0>m?-1:0,m=Math.sqrt(Math.pow(m,2)/(1+Math.pow(j/n,2)));e.push({x:f.x+Math.abs(j/n*m)*(0<j?1:0>j?-1:0)*t,y:f.y+Math.abs(m)*(0<n?1:0>n?-1:0)*t})}return e};function Dd(a,c,d,e){0<d?(this.x=a,this.width=d):(this.x=a+d,this.width=-d);0<e?(this.y=c,this.height=e):(this.y=c+e,this.height=-e)};function Ed(a,c,d,e){this.type=a;this.geometry=c;d&&(this.units=d);this.style=e?e:{}}function Fd(a){return"rect"==a.type?a.geometry.width*a.geometry.height:"polygon"==a.type?Math.abs(Bd(a.geometry.points)):0}function Gd(a){if("rect"==a.type)return a;if("polygon"==a.type){for(var c=a.geometry.points,d=c[0].x,e=c[0].x,h=c[0].y,f=c[0].y,j=1;j<c.length;j++)c[j].x>e&&(e=c[j].x),c[j].x<d&&(d=c[j].x),c[j].y>f&&(f=c[j].y),c[j].y<h&&(h=c[j].y);return new Ed("rect",new Dd(d,h,e-d,f-h),q,a.style)}}
function Hd(a,c){var d;d=a.geometry.points;var e=0>Bd(d)?-1:1;if(4>d.length)d=Cd(d,e*c);else{for(var h=d.length-1,f=1,j=[],m=0;m<d.length;m++)h=Cd([d[h],d[m],d[f]],e*c),j.push(h[1]),h=m,f++,f>d.length-1&&(f=0);d=j}return new Ed("polygon",new Ad(d),q,a.style)}function Id(a,c){if("rect"==a.type){var d=c(a.geometry);return new Ed("rect",d,q,a.style)}if("polygon"==a.type){var e=[];C(a.geometry.points,function(a){e.push(c(a))});return new Ed("polygon",new Ad(e),q,a.style)}}
function Jd(a){return JSON.stringify(a.geometry)};function Kd(a,c,d){this.src=a;this.text=c;this.shapes=[d];this.context=document.URL};function Ld(){}function Md(a,c){a.g=new wd;a.jc=new wd;a.Xc=[];a.eb=[];a.Ia=[];a.Ga=[];a.lc=[];a.wb={Ta:q,Sa:q};a.Ha=new wd;a.nc=k;a.fd=c}function Nd(a,c){var d=a.Ha.get(c);d||(d={Ta:q,Sa:q},a.Ha.set(c,d));return d}
function Od(a,c){var d=a.Gb(c),e=c.id;if(!("undefined"!==typeof e&&a.jc.get(e))){var h=a.Lc(c);if("undefined"===typeof e||""===e)e=a.jc.l+1,c.setAttribute("id","annotorious_"+e.toString());a.jc.set(e,h);var f=[],j=[];C(a.Xc,function(a){h.addHandler(a.type,a.Ra)});C(a.eb,function(a){if(a.onInitAnnotator)a.onInitAnnotator(h)});C(a.Ga,function(a){a.src==d&&(h.J(a),f.push(a))});C(a.lc,function(a){a.src==d&&(h.z(a),j.push(a))});C(f,function(c){E(a.Ga,c)});C(j,function(c){E(a.lc,c)});(e=a.Ha.get(d))?(e.Ta&&
h.O(),e.Sa&&h.fa(),a.Ha.remove(d)):(a.wb.Ta&&h.O(),a.wb.Sa&&h.fa());a.nc&&h.ha(a.nc);a.g.set(d,h);E(a.Ia,c)}}function Pd(a){var c,d;for(d=a.Ia.length;0<d;d--){for(var e=c=a.Ia[d-1],h=e.offsetTop,f=e.offsetLeft,j=e.offsetWidth,m=e.offsetHeight;e.offsetParent;)e=e.offsetParent,h+=e.offsetTop,f+=e.offsetLeft;h<window.pageYOffset+window.innerHeight&&(f<window.pageXOffset+window.innerWidth&&h+m>window.pageYOffset&&f+j>window.pageXOffset)&&Od(a,c)}}
function Qd(a,c,d){if(c){var e=a.g.get(c);e?d?e.Fa():e.fa():Nd(a,c).Sa=d}else C(U(a.g),function(a){d?a.Fa():a.fa()}),a.wb.Sa=!d,C(U(a.Ha),function(a){a.Sa=!d})}function Rd(a,c,d){if(c){var e=a.g.get(c);e?d?e.aa():e.O():Nd(a,c).Ta=d}else C(U(a.g),function(a){d?a.aa():a.O()}),a.wb.Ta=!d,C(U(a.Ha),function(a){a.Ta=!d})}u=Ld.prototype;u.ba=function(a,c){var d=k,e=k;v(a)?(d=a,e=c):w(a)&&(e=a);d?(d=this.g.get(d))&&d.ba(e):C(U(this.g),function(a){a.ba(e)})};
u.J=function(a,c){if(Sd(this,a.src)){var d=this.g.get(a.src);d?d.J(a,c):(this.Ga.push(a),c&&E(this.Ga,c))}};u.addHandler=function(a,c){C(U(this.g),function(d){d.addHandler(a,c)});this.Xc.push({type:a,Ra:c})};u.Ab=function(a){this.eb.push(a);C(U(this.g),function(c){if(a.onInitAnnotator)a.onInitAnnotator(c)})};function Sd(a,c){return yd(a.g.$,c)?l:Fa(a.Ia,function(d){return a.Gb(d)==c})!=p}
u.destroy=function(a){if(a){var c=this.g.get(a);c&&(c.destroy(),this.g.remove(a))}else C(U(this.g),function(a){a.destroy()}),this.g.clear()};u.na=function(a){if(Sd(this,a)&&(a=this.g.get(a)))return a.na().getName()};u.t=function(a){if(a){var c=this.g.get(a);return c?c.t():Ca(this.Ga,function(c){return c.src==a})}var d=[];C(U(this.g),function(a){Ia(d,a.t())});Ia(d,this.Ga);return d};u.ea=function(a){if(Sd(this,a)&&(a=this.g.get(a)))return Da(a.ea(),function(a){return a.getName()})};
u.fa=function(a){Qd(this,a,q)};u.O=function(a){Rd(this,a,q)};u.o=function(a){if(a){if(Sd(this,a.src)){var c=this.g.get(a.src);c&&c.o(a)}}else C(U(this.g),function(a){a.o()})};u.init=function(){this.fd&&Ia(this.Ia,this.fd());Pd(this);var a=this,c=M(window,"scroll",function(){0<a.Ia.length?Pd(a):N(c)})};u.Jc=function(a){this.Xb(a)&&Od(this,a)};u.z=function(a){if(Sd(this,a.src)){var c=this.g.get(a.src);c?c.z(a):this.lc.push(a)}};u.Pc=function(a){this.g.get(a).stopSelection()};
u.ub=function(a,c){if(Sd(this,a)){var d=this.g.get(a);d&&d.Nd(c)}};u.ha=function(a){this.nc=a;C(U(this.g),function(c){c.ha(a)})};u.sa=function(a,c){if(a){var d=this.g.get(a);d&&d.sa(c)}};u.Fa=function(a){Qd(this,a,l)};u.aa=function(a){Rd(this,a,l)};function Td(a,c){var d=ub().createElement("DIV");d.innerHTML=a(c||Ud,k,k);if(1==d.childNodes.length){var e=d.firstChild;if(1==e.nodeType)return e}return d}var Ud={};function Vd(a,c){a!=p&&this.append.apply(this,arguments)}u=Vd.prototype;u.ya="";u.set=function(a){this.ya=""+a};u.append=function(a,c,d){this.ya+=a;if(c!=p)for(var e=1;e<arguments.length;e++)this.ya+=arguments[e];return this};u.clear=function(){this.ya=""};u.toString=aa("ya");/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function Wd(){}
var Xd={Ae:"<",ze:">",se:"&",Be:"\u00a0",De:'"',te:"'"},Yd={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,
ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},Zd=/&/g,$d=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,ae=/</g,be=/>/g,ce=/\"/g,de=/=/g,ee=/\0/g,fe=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,ge=/^#(\d+)$/,he=/^#x([0-9A-Fa-f]+)$/,ie=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)",
"i"),je=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?--\>|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");
Wd.prototype.parse=function(a,c){var d=p,e=q,h=[],f,j,m;a.R=[];for(a.pa=q;c;){var n=c.match(e?ie:je),c=c.substring(n[0].length);if(e)if(n[1]){var t=n[1].toLowerCase();if(n[2]){n=n[3];switch(n.charCodeAt(0)){case 34:case 39:n=n.substring(1,n.length-1)}n=n.replace(ee,"").replace(fe,qa(this.fe,this))}else n=t;h.push(t,n)}else n[4]&&(j!==k&&(m?a.Od&&a.Od(f,h):a.rd&&a.rd(f)),m&&j&12&&(d=d===p?c.toLowerCase():d.substring(d.length-c.length),e=d.indexOf("</"+f),0>e&&(e=c.length),j&4?a.kd&&a.kd(c.substring(0,
e)):a.Md&&a.Md(c.substring(0,e).replace($d,"&amp;$1").replace(ae,"&lt;").replace(be,"&gt;")),c=c.substring(e)),f=j=m=k,h.length=0,e=q);else if(n[1])ke(a,n[0]);else if(n[3])m=!n[2],e=l,f=n[3].toLowerCase(),j=Yd.hasOwnProperty(f)?Yd[f]:k;else if(n[4])ke(a,n[4]);else if(n[5])switch(n[5]){case "<":ke(a,"&lt;");break;case ">":ke(a,"&gt;");break;default:ke(a,"&amp;")}}for(d=a.R.length;0<=--d;)a.ia.append("</",a.R[d],">");a.R.length=0};
Wd.prototype.fe=function(a){a=a.toLowerCase();if(Xd.hasOwnProperty(a))return Xd[a];var c=a.match(ge);return c?String.fromCharCode(parseInt(c[1],10)):(c=a.match(he))?String.fromCharCode(parseInt(c[1],16)):""};function le(){};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function me(a,c,d){this.ia=a;this.R=[];this.pa=q;this.Sd=c;this.Pb=d}x(me,le);
var ne={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,
"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,
"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,
"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,
"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,
"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};
me.prototype.Od=function(a,c){if(!this.pa&&Yd.hasOwnProperty(a)){var d=Yd[a];if(!(d&32))if(d&16)this.pa=!(d&2);else{for(var e=c,h=0;h<e.length;h+=2){var f=e[h],j=e[h+1],m=p,n;if((n=a+"::"+f,ne.hasOwnProperty(n))||(n="*::"+f,ne.hasOwnProperty(n)))m=ne[n];if(m!==p)switch(m){case 0:break;case 2:case 3:j=p;break;case 4:case 5:case 6:case 7:case 8:case 9:j=this.Pb?this.Pb(j):j;break;case 1:j=this.Sd&&this.Sd(j);break;case 11:j&&"#"===j.charAt(0)?(j=this.Pb?this.Pb(j):j)&&(j="#"+j):j=p;break;default:j=
p}else j=p;e[h+1]=j}if(c=e){d&2||this.R.push(a);this.ia.append("<",a);d=0;for(e=c.length;d<e;d+=2)h=c[d],f=c[d+1],f!==p&&f!==k&&this.ia.append(" ",h,'="',f.replace(Zd,"&amp;").replace(ae,"&lt;").replace(be,"&gt;").replace(ce,"&#34;").replace(de,"&#61;"),'"');this.ia.append(">")}}}};
me.prototype.rd=function(a){if(this.pa)this.pa=q;else if(Yd.hasOwnProperty(a)){var c=Yd[a];if(!(c&50)){if(c&1)for(c=this.R.length;0<=--c;){var d=this.R[c];if(d===a)break;if(!(Yd[d]&1))return}else for(c=this.R.length;0<=--c&&this.R[c]!==a;);if(!(0>c)){for(var e=this.R.length;--e>c;)d=this.R[e],Yd[d]&1||this.ia.append("</",d,">");this.R.length=c;this.ia.append("</",a,">")}}}};function ke(a,c){a.pa||a.ia.append(c)}me.prototype.Md=function(a){this.pa||this.ia.append(a)};
me.prototype.kd=function(a){this.pa||this.ia.append(a)};function oe(a,c,d,e,h){if(!F&&(!H||!I("525")))return l;if(Pa&&h)return pe(a);if(h&&!e||!d&&(17==c||18==c)||F&&e&&c==a)return q;switch(a){case 13:return!(F&&fb(9));case 27:return!H}return pe(a)}function pe(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||H&&0==a)return l;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return l;default:return q}}
function qe(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function re(a,c){rc.call(this);a&&se(this,a,c)}x(re,Nc);u=re.prototype;u.F=p;u.Jb=p;u.Gc=p;u.Kb=p;u.ra=-1;u.qa=-1;u.yc=q;
var te={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},ue={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},ve=F||H&&I("525"),we=Pa&&G;u=re.prototype;
u.$d=function(a){if(H&&(17==this.ra&&!a.ctrlKey||18==this.ra&&!a.altKey))this.qa=this.ra=-1;ve&&!oe(a.keyCode,this.ra,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.qa=G?qe(a.keyCode):a.keyCode,we&&(this.yc=a.altKey))};u.be=function(a){this.qa=this.ra=-1;this.yc=a.altKey};
u.handleEvent=function(a){var c=a.n,d,e,h=c.altKey;F&&"keypress"==a.type?(d=this.qa,e=13!=d&&27!=d?c.keyCode:0):H&&"keypress"==a.type?(d=this.qa,e=0<=c.charCode&&63232>c.charCode&&pe(d)?c.charCode:0):Ua?(d=this.qa,e=pe(d)?c.keyCode:0):(d=c.keyCode||this.qa,e=c.charCode||0,we&&(h=this.yc),Pa&&(63==e&&224==d)&&(d=191));var f=d,j=c.keyIdentifier;d?63232<=d&&d in te?f=te[d]:25==d&&a.shiftKey&&(f=9):j&&j in ue&&(f=ue[j]);a=f==this.ra;this.ra=f;c=new xe(f,e,a,c);c.altKey=h;this.dispatchEvent(c)};u.e=aa("F");
function se(a,c,d){a.Kb&&a.detach();a.F=c;a.Jb=M(a.F,"keypress",a,d);a.Gc=M(a.F,"keydown",a.$d,d,a);a.Kb=M(a.F,"keyup",a.be,d,a)}u.detach=function(){this.Jb&&(N(this.Jb),N(this.Gc),N(this.Kb),this.Kb=this.Gc=this.Jb=p);this.F=p;this.qa=this.ra=-1};function xe(a,c,d,e){e&&this.init(e,k);this.type="key";this.keyCode=a;this.charCode=c;this.repeat=d}x(xe,wc);function ye(){}ga(ye);ye.prototype.je=0;ye.rb();function ze(a){rc.call(this);this.nb=a||ub();this.ta=Ae}x(ze,Nc);ze.prototype.de=ye.rb();var Ae=p;function Be(a,c){switch(a){case 1:return c?"disable":"enable";case 2:return c?"highlight":"unhighlight";case 4:return c?"activate":"deactivate";case 8:return c?"select":"unselect";case 16:return c?"check":"uncheck";case 32:return c?"focus":"blur";case 64:return c?"open":"close"}i(Error("Invalid component state"))}u=ze.prototype;u.Ib=p;u.ga=q;u.F=p;u.ta=p;u.Ba=p;u.kb=p;u.Ka=p;u.re=q;u.e=aa("F");
u.Fb=function(){return this.Ec||(this.Ec=new Kc(this))};u.Tc=function(a){this.Ba&&this.Ba!=a&&i(Error("Method not supported"));ze.K.Tc.call(this,a)};u.ud=aa("nb");u.mb=function(a){this.ga&&i(Error("Component already rendered"));if(a&&this.jb(a)){this.re=l;if(!this.nb||this.nb.N!=wb(a))this.nb=ub(a);this.nd(a);this.Na()}else i(Error("Invalid element to decorate"))};u.jb=ba(l);u.nd=function(a){this.F=a};u.Na=function(){function a(a){!a.ga&&a.e()&&a.Na()}this.ga=l;this.kb&&C(this.kb,a,k)};
u.Eb=function(){function a(a){a.ga&&a.Eb()}this.kb&&C(this.kb,a,k);this.Ec&&this.Ec.Tb();this.ga=q};u.pb=aa("F");u.Xa=function(a){this.ga&&i(Error("Component already rendered"));this.ta=a};
u.removeChild=function(a,c){if(a){var d=v(a)?a:a.Ib||(a.Ib=":"+(a.de.je++).toString(36)),e;this.Ka&&d?(e=this.Ka,e=(d in e?e[d]:k)||p):e=p;a=e;d&&a&&(e=this.Ka,d in e&&delete e[d],E(this.kb,a),c&&(a.Eb(),a.F&&Db(a.F)),d=a,d==p&&i(Error("Unable to set parent component")),d.Ba=p,ze.K.Tc.call(d,p))}a||i(Error("Child is not in parent component"));return a};function Ce(){}var De;ga(Ce);u=Ce.prototype;u.pb=function(a){return a};u.ob=function(a,c,d){if(a=a.e?a.e():a)if(F&&!I("7")){var e=Ee(jb(a),c);e.push(c);ra(d?kb:mb,a).apply(p,e)}else d?kb(a,c):mb(a,c)};u.jb=ba(l);
u.mb=function(a,c){if(c.id){var d=c.id;if(a.Ba&&a.Ba.Ka){var e=a.Ba.Ka,h=a.Ib;h in e&&delete e[h];e=a.Ba.Ka;d in e&&i(Error('The object already contains the key "'+d+'"'));e[d]=a}a.Ib=d}(d=this.pb(c))&&d.firstChild?(d=d.firstChild.nextSibling?Ha(d.childNodes):d.firstChild,a.lb=d):a.lb=p;var f=0,j=this.qb(),m=this.qb(),n=q,t=q,d=q,e=jb(c);C(e,function(a){if(!n&&a==j)n=l,m==j&&(t=l);else if(!t&&a==m)t=l;else{var c=f;if(!this.Rd){this.Cb||Fe(this);var d=this.Cb,e={},h;for(h in d)e[d[h]]=h;this.Rd=e}a=
parseInt(this.Rd[a],10);f=c|(isNaN(a)?0:a)}},this);a.r=f;n||(e.push(j),m==j&&(t=l));t||e.push(m);(h=a.da)&&e.push.apply(e,h);if(F&&!I("7")){var z=Ee(e);0<z.length&&(e.push.apply(e,z),d=l)}if(!n||!t||h||d)c.className=e.join(" ");a.isEnabled()||this.Ya(c,1,l);a.r&8&&this.Ya(c,8,l);a.W&16&&this.Ya(c,16,!!(a.r&16));a.W&64&&this.Ya(c,64,!!(a.r&64));return c};
u.Wb=function(a,c){var d=!c,e=F||Ua?a.getElementsByTagName("*"):p;if(fd){if(d=d?"none":"",a.style[fd]=d,e)for(var h=0,f;f=e[h];h++)f.style[fd]=d}else if(F||Ua)if(d=d?"on":"",a.setAttribute("unselectable",d),e)for(h=0;f=e[h];h++)f.setAttribute("unselectable",d)};u.Xa=function(a,c){this.ob(a,this.qb()+"-rtl",c)};u.Gd=function(a){var c;return a.W&32&&(c=a.Pa())?Gb(c):q};
u.Sc=function(a,c){var d;if(a.W&32&&(d=a.Pa())){if(!c&&a.r&32){try{d.blur()}catch(e){}a.r&32&&a.vd()}Gb(d)!=c&&(c?d.tabIndex=0:(d.tabIndex=-1,d.removeAttribute("tabIndex")))}};u.Q=function(a,c,d){var e=a.e();if(e){var h;this.Cb||Fe(this);(h=this.Cb[c])&&this.ob(a,h,d);this.Ya(e,c,d)}};u.Ya=function(a,c,d){De||(De={1:"disabled",8:"selected",16:"checked",64:"expanded"});(c=De[c])&&a.setAttribute("aria-"+c,d)};
u.ua=function(a,c){var d=this.pb(a);if(d&&(Cb(d),c))if(v(c))if("textContent"in d)d.textContent=c;else if(d.firstChild&&3==d.firstChild.nodeType){for(;d.lastChild!=d.firstChild;)d.removeChild(d.lastChild);d.firstChild.data=c}else Cb(d),d.appendChild(wb(d).createTextNode(c));else{var e=function(a){if(a){var c=wb(d);d.appendChild(v(a)?c.createTextNode(a):a)}};ia(c)?C(c,e):ja(c)&&!("nodeType"in c)?C(Ha(c),e):e(c)}};u.Pa=function(a){return a.e()};u.qb=ba("goog-control");
function Ee(a,c){var d=[];c&&(a=a.concat([c]));C([],function(e){Ea(e,ra(Ga,a))&&(!c||Ga(e,c))&&d.push(e.join("_"))});return d}function Fe(a){var c=a.qb();a.Cb={1:c+"-disabled",2:c+"-hover",4:c+"-active",8:c+"-selected",16:c+"-checked",32:c+"-focused",64:c+"-open"}};var Ge={};function He(a,c,d){ze.call(this,d);if(!c){for(var c=this.constructor,e;c;){e=la(c);if(e=Ge[e])break;c=c.K?c.K.constructor:p}c=e?w(e.rb)?e.rb():new e:p}this.G=c;this.lb=a}x(He,ze);u=He.prototype;u.lb=p;u.r=0;u.W=39;u.Ac=255;u.qe=0;u.Zb=l;u.da=p;u.Fc=l;u.xc=q;u.me=p;function Ie(a){a.ga&&q!=a.Fc&&Je(a,q);a.Fc=q}u.Pa=function(){return this.G.Pa(this)};
u.ob=function(a,c){c?a&&(this.da?Ga(this.da,a)||this.da.push(a):this.da=[a],this.G.ob(this,a,l)):a&&this.da&&(E(this.da,a),0==this.da.length&&(this.da=p),this.G.ob(this,a,q))};u.pb=function(){return this.G.pb(this.e())};u.jb=function(a){return this.G.jb(a)};u.nd=function(a){this.F=a=this.G.mb(this,a);var c=this.me||k;c&&a.setAttribute("role",c);this.xc||this.G.Wb(a,q);this.Zb="none"!=a.style.display};
u.Na=function(){He.K.Na.call(this);var a=this.G;this.ta==p&&(this.ta=ed(this.ga?this.F:this.nb.N.body));this.ta&&a.Xa(this.e(),l);this.isEnabled()&&a.Sc(this,this.Zb);if(this.W&-2&&(this.Fc&&Je(this,l),this.W&32&&(a=this.Pa()))){var c=this.Hc||(this.Hc=new re);se(c,a);O(O(O(this.Fb(),c,"key",this.ae),a,"focus",this.Zd),a,"blur",this.vd)}};
function Je(a,c){var d=a.Fb(),e=a.e();c?(O(O(O(O(d,e,"mouseover",a.zd),e,"mousedown",a.xd),e,"mouseup",a.Ad),e,"mouseout",a.yd),a.Hb!=fa&&O(d,e,"contextmenu",a.Hb),F&&O(d,e,"dblclick",a.wd)):(Mc(Mc(Mc(Mc(d,e,"mouseover",a.zd),e,"mousedown",a.xd),e,"mouseup",a.Ad),e,"mouseout",a.yd),a.Hb!=fa&&Mc(d,e,"contextmenu",a.Hb),F&&Mc(d,e,"dblclick",a.wd))}u.Eb=function(){He.K.Eb.call(this);this.Hc&&this.Hc.detach();this.Zb&&this.isEnabled()&&this.G.Sc(this,q)};
u.ua=function(a){this.G.ua(this.e(),a);this.lb=a};u.Xa=function(a){He.K.Xa.call(this,a);var c=this.e();c&&this.G.Xa(c,a)};u.Wb=function(a){this.xc=a;var c=this.e();c&&this.G.Wb(c,a)};u.isEnabled=function(){return!(this.r&1)};function Ke(a,c){Le(a,2,c)&&a.Q(2,c)}u.setActive=function(a){Le(this,4,a)&&this.Q(4,a)};u.Q=function(a,c){this.W&a&&c!=!!(this.r&a)&&(this.G.Q(this,a,c),this.r=c?this.r|a:this.r&~a)};function V(a,c){return!!(a.Ac&c)&&!!(a.W&c)}
function Le(a,c,d){return!!(a.W&c)&&!!(a.r&c)!=d&&(!(a.qe&c)||a.dispatchEvent(Be(c,d)))&&!a.pd}u.zd=function(a){(!a.relatedTarget||!Fb(this.e(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&V(this,2))&&Ke(this,l)};u.yd=function(a){if((!a.relatedTarget||!Fb(this.e(),a.relatedTarget))&&this.dispatchEvent("leave"))V(this,4)&&this.setActive(q),V(this,2)&&Ke(this,q)};u.Hb=fa;
u.xd=function(a){this.isEnabled()&&(V(this,2)&&Ke(this,l),yc(a)&&(V(this,4)&&this.setActive(l),this.G.Gd(this)&&this.Pa().focus()));!this.xc&&yc(a)&&a.preventDefault()};u.Ad=function(a){this.isEnabled()&&(V(this,2)&&Ke(this,l),this.r&4&&(Me(this,a)&&V(this,4))&&this.setActive(q))};u.wd=function(a){this.isEnabled()&&Me(this,a)};
function Me(a,c){if(V(a,16)){var d=!(a.r&16);Le(a,16,d)&&a.Q(16,d)}V(a,8)&&Le(a,8,l)&&a.Q(8,l);V(a,64)&&(d=!(a.r&64),Le(a,64,d)&&a.Q(64,d));d=new tc("action",a);c&&(d.altKey=c.altKey,d.ctrlKey=c.ctrlKey,d.metaKey=c.metaKey,d.shiftKey=c.shiftKey,d.Oc=c.Oc);return a.dispatchEvent(d)}u.Zd=function(){V(this,32)&&Le(this,32,l)&&this.Q(32,l)};u.vd=function(){V(this,4)&&this.setActive(q);V(this,32)&&Le(this,32,q)&&this.Q(32,q)};
u.ae=function(a){return this.Zb&&this.isEnabled()&&13==a.keyCode&&Me(this,a)?(a.preventDefault(),a.stopPropagation(),l):q};w(He)||i(Error("Invalid component class "+He));w(Ce)||i(Error("Invalid renderer class "+Ce));var Ne=la(He);Ge[Ne]=Ce;function Oe(){return new He(p)}w(Oe)||i(Error("Invalid decorator function "+Oe));function Qe(){}x(Qe,Ce);ga(Qe);u=Qe.prototype;u.mb=function(a,c){Ie(a);a.Ac&=-256;a.ga&&a.r&32&&i(Error("Component already rendered"));a.r&32&&a.Q(32,q);a.W&=-33;Qe.K.mb.call(this,a,c);a.ua(c.value);return c};u.jb=function(a){return"TEXTAREA"==a.tagName};u.Xa=fa;u.Gd=function(a){return a.isEnabled()};u.Sc=fa;u.Q=function(a,c,d){Qe.K.Q.call(this,a,c,d);if((a=a.e())&&1==c)a.disabled=d};u.Ya=fa;u.ua=function(a,c){a&&(a.value=c)};u.qb=ba("goog-textarea");function Re(a,c,d){He.call(this,a,c||Qe.rb(),d);Ie(this);this.Wb(l);a||(this.lb="")}x(Re,He);var Se=G||H;u=Re.prototype;u.Ua=q;u.oa=0;u.ge=0;u.Jd=0;u.Cd=q;u.Ob=q;u.Rc=q;u.Qc=q;function Te(a){return a.tb.top+a.tb.bottom+a.hd.top+a.hd.bottom}function Ue(a){var c=a.Jd,d=a.e();c&&(d&&a.Ob)&&(c-=Te(a));return c}function Ve(a){var c=a.ge,d=a.e();c&&(d&&a.Ob)&&(c-=Te(a));return c}u.ua=function(a){Re.K.ua.call(this,a);this.e()&&this.Qa()};
u.Na=function(){Re.K.Na.call(this);var a=this.e();P(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.tb=hd(a,"padding");this.hd=kd(a);O(O(O(O(this.Fb(),a,"scroll",this.Qa),a,"focus",this.Qa),a,"keyup",this.Qa),a,"mouseup",this.ie);this.e()&&this.Qa()};
function We(a){if(!a.Cd){var c=a.e().cloneNode(q);P(c,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.ud().N.body.appendChild(c);var d=c.scrollHeight;c.style.padding="10px";var e=c.scrollHeight;a.Rc=e>d;c.style.borderWidth="10px";a.Qc=c.scrollHeight>e;c.style.height="100px";100!=c.offsetHeight&&(a.Ob=l);Db(c);a.Cd=l}var c=a.e(),d=a.e().scrollHeight,h=a.e(),e=h.offsetHeight-h.clientHeight;if(!a.Rc)var f=a.tb,e=e-(f.top+f.bottom);
a.Qc||(h=kd(h),e-=h.top+h.bottom);d+=0<e?e:0;a.Ob?d-=Te(a):(a.Rc||(e=a.tb,d+=e.top+e.bottom),a.Qc||(a=kd(c),d+=a.top+a.bottom));return d}function Xe(a,c){a.oa!=c&&(a.oa=c,a.e().style.height=c+"px")}function Ye(a){a=a.e();a.style.height="auto";var c=a.value.match(/\n/g)||[];a.rows=c.length+1}
u.Qa=function(){if(!this.Ua){var a=q;this.Ua=l;var c=this.e(),d=this.oa;if(c.scrollHeight){var e=q,h=q,f=We(this),j=c.offsetHeight,m=Ue(this),n=Ve(this);m&&f<m?(Xe(this,m),e=l):n&&f>n?(Xe(this,n),c.style.overflowY="",h=l):j!=f?Xe(this,f):this.oa||(this.oa=f);!e&&(!h&&Se)&&(a=l)}else Ye(this);this.Ua=q;a&&(a=this.e(),this.Ua||(this.Ua=l,c=q,a.value||(a.value=" ",c=l),(h=a.scrollHeight)?(f=We(this),e=Ue(this),j=Ve(this),!(e&&f<=e)&&!(j&&f>=j)&&(j=this.tb,a.style.paddingBottom=j.bottom+1+"px",We(this)==
f&&(a.style.paddingBottom=j.bottom+h+"px",a.scrollTop=0,h=We(this)-h,h>=e?Xe(this,h):Xe(this,e)),a.style.paddingBottom=j.bottom+"px")):Ye(this),c&&(a.value=""),this.Ua=q));d!=this.oa&&this.dispatchEvent("resize")}};u.ie=function(){var a=this.e(),c=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(c-=a.offX);c!=this.oa&&(this.oa=this.Jd=c)};F&&I(8);function Ze(a){return"object"===typeof a&&a&&0===a.ve?a.content:String(a).replace($e,af)}var bf={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function af(a){return bf[a]}var $e=/[\x00\x22\x26\x27\x3c\x3e]/g;function cf(){return'<div class="annotorious-popup top-left" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Edit" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>'}
function df(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Add a Comment..." tabindex="1"></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3">Cancel</a><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2">Save</a></div></form></div>'};function ef(a){function c(){var a=e.Ja;a.e()&&a.Qa()}this.element=Td(df);this.d=a;this.Vd=a.getItem();this.Ja=new Re("");this.Td=J(".annotorious-editor-button-cancel",this.element)[0];this.Wc=J(".annotorious-editor-button-save",this.element)[0];var d;d=this.Wc;ib?d=d.parentElement:(d=d.parentNode,d=Eb(d)?d:p);this.Ud=d;this.$a=[];var e=this;M(this.Td,"click",function(c){c.preventDefault();a.stopSelection(e.cd);e.close()});M(this.Wc,"click",function(c){c.preventDefault();c=e.sd();a.J(c);a.stopSelection();
e.cd?a.fireEvent("onAnnotationUpdated",c,a.getItem()):a.fireEvent("onAnnotationCreated",c,a.getItem());e.close()});T(this.element,q);a.element.appendChild(this.element);this.Ja.mb(J(".annotorious-editor-text",this.element)[0]);var h=this.element;d=document.createElement("div");P(d,"position","absolute");P(d,"top","0px");P(d,"right","0px");P(d,"width","5px");P(d,"height","100%");P(d,"cursor","e-resize");h.appendChild(d);var f=kd(h),f=dd(h).width-f.right-f.left;d=new ld(d);d.Ic=new Pc(f,0,800,0)||new Pc(NaN,
NaN,NaN,NaN);d.od=function(a){P(h,"width",a+"px");c&&c()}}u=ef.prototype;u.wc=function(a){var c=Ab("div","annotorious-editor-field");v(a)?c.innerHTML=a:w(a)?this.$a.push({D:c,Cc:a}):Eb(a)&&c.appendChild(a);a=this.Ud;a.parentNode&&a.parentNode.insertBefore(c,a)};u.open=function(a){(this.xb=this.cd=a)&&this.Ja.ua(String(a.text));T(this.element,l);this.Ja.e().focus();C(this.$a,function(c){var d=c.Cc(a);v(d)?c.D.innerHTML=d:Eb(d)&&(Cb(c.D),c.D.appendChild(d))});this.d.fireEvent("onEditorShown",a)};
u.close=function(){T(this.element,q);this.Ja.ua("")};u.setPosition=function(a){Tc(this.element,a.x,a.y)};u.sd=function(){var a;a=this.Ja.e().value;var c=new Vd;(new Wd).parse(new me(c,function(a){return a},k),a);a=c.toString();this.xb?this.xb.text=a:this.xb=new Kd(this.Vd.src,a,this.d.na().getShape());return this.xb};ef.prototype.addField=ef.prototype.wc;ef.prototype.getAnnotation=ef.prototype.sd;function ff(a,c,d){var e=this;d||(d="Click and Drag to Annotate");this.element=Td(gf,{Nb:d});this.d=a;this.$c=J(".annotorious-hint-msg",this.element)[0];this.Yc=J(".annotorious-hint-icon",this.element)[0];this.uc=function(){e.show()};this.tc=function(){hf(e)};this.kc();hf(this);c.appendChild(this.element)}
ff.prototype.kc=function(){var a=this;this.bd=M(this.Yc,"mouseover",function(){a.show();window.clearTimeout(a.qc)});this.ad=M(this.Yc,"mouseout",function(){hf(a)});this.d.addHandler("onMouseOverItem",this.uc);this.d.addHandler("onMouseOutOfItem",this.tc)};ff.prototype.yb=function(){N(this.bd);N(this.ad);this.d.Ub("onMouseOverItem",this.uc);this.d.Ub("onMouseOutOfItem",this.tc)};
ff.prototype.show=function(){window.clearTimeout(this.qc);S(this.$c,0.8);var a=this;this.qc=window.setTimeout(function(){hf(a)},3E3)};function hf(a){window.clearTimeout(a.qc);S(a.$c,0)}ff.prototype.destroy=function(){this.yb();delete this.bd;delete this.ad;delete this.uc;delete this.tc;Db(this.element)};function jf(a){this.element=Td(cf);this.d=a;this.Wd=J(".annotorious-popup-text",this.element)[0];this.S=J(".annotorious-popup-buttons",this.element)[0];this.oc=q;this.$a=[];var c=J(".annotorious-popup-button-edit",this.S)[0],d=J(".annotorious-popup-button-delete",this.S)[0],e=this;M(c,"mouseover",function(){kb(c,"annotorious-popup-button-active")});M(c,"mouseout",function(){mb(c,"annotorious-popup-button-active")});M(c,"click",function(){S(e.element,0);P(e.element,"pointer-events","none");a.Bc(e.f)});
M(d,"mouseover",function(){kb(d,"annotorious-popup-button-active")});M(d,"mouseout",function(){mb(d,"annotorious-popup-button-active")});M(d,"click",function(){a.fireEvent("beforeAnnotationRemoved",e.f)||(S(e.element,0),P(e.element,"pointer-events","none"),a.z(e.f),a.fireEvent("onAnnotationRemoved",e.f))});kf&&(M(this.element,"mouseover",function(){window.clearTimeout(e.mc);0.9>(e.S.style[Aa("opacity")]||"")&&S(e.S,0.9);e.clearHideTimer()}),M(this.element,"mouseout",function(){S(e.S,0);e.startHideTimer()}),
a.addHandler("onMouseOutOfItem",function(){e.startHideTimer()}));S(this.S,0);S(this.element,0);P(this.element,"pointer-events","none");a.element.appendChild(this.element)}u=jf.prototype;u.wc=function(a){var c=Ab("div","annotorious-popup-field");v(a)?c.innerHTML=a:w(a)?this.$a.push({D:c,Cc:a}):Eb(a)&&c.appendChild(a);this.element.appendChild(c)};
u.startHideTimer=function(){this.oc=q;if(!this.fb){var a=this;this.fb=window.setTimeout(function(){a.d.fireEvent("beforePopupHide",a);a.oc||(S(a.element,0),P(a.element,"pointer-events","none"),S(a.S,0.9),delete a.fb)},150)}};u.clearHideTimer=function(){this.oc=l;this.fb&&(window.clearTimeout(this.fb),delete this.fb)};
u.show=function(a,c){this.clearHideTimer();c&&this.setPosition(c);a&&this.setAnnotation(a);this.mc&&window.clearTimeout(this.mc);S(this.S,0.9);if(kf){var d=this;this.mc=window.setTimeout(function(){S(d.S,0)},1E3)}S(this.element,0.9);P(this.element,"pointer-events","auto");this.d.fireEvent("onPopupShown",this.f)};u.setPosition=function(a){Tc(this.element,new pb(a.x,a.y))};
u.setAnnotation=function(a){this.f=a;this.Wd.innerHTML=a.text?a.text.replace(/\n/g,"<br/>"):'<span class="annotorious-popup-empty">No comment</span>';"editable"in a&&a.editable==q?T(this.S,q):T(this.S,l);C(this.$a,function(c){var d=c.Cc(a);v(d)?c.D.innerHTML=d:Eb(d)&&(Cb(c.D),c.D.appendChild(d))})};jf.prototype.addField=jf.prototype.wc;function lf(){}u=lf.prototype;u.J=function(a,c){this.h.J(a,c)};u.addHandler=function(a,c){this.w.addHandler(a,c)};u.fireEvent=function(a,c,d){return this.w.fireEvent(a,c,d)};u.na=aa("v");u.o=function(a){this.h.o(a)};u.z=function(a){this.h.z(a)};u.Ub=function(a,c){this.w.Ub(a,c)};u.stopSelection=function(a){kf&&T(this.c,q);this.hb&&(this.hb(),delete this.hb);this.v.stopSelection();a&&this.h.J(a)};
function mf(a,c){a.ld=p;M(c,nf,function(){clearTimeout(this.ld)});M(c,of,function(d){d=pf(d,c);a.h.o(q);var e=a.h.Oa(d.x,d.y);a.gb&&0===e.length?(T(a.c,l),a.v.startSelection(d.x,d.y)):(e=a.h.Oa(d.x,d.y),0<e.length&&a.h.o(e[0]),kf||(this.ld=setTimeout(function(){a.fireEvent("onAnnotationClickedLong",e[0])},200)))})};function qf(a,c){this.A=a;this.d=c;this.va=[];this.Z=[];this.ja=this.A.getContext("2d");this.wa=l;this.zb=q;var d=this;M(this.A,rf,function(a){if(d.wa){var c=sf(d,a.offsetX,a.offsetY);c?(d.zb=d.zb&&c==d.f,d.f?d.f!=c&&(d.wa=q,d.d.popup.startHideTimer()):(d.f=c,tf(d),d.d.fireEvent("onMouseOverAnnotation",{annotation:d.f,mouseEvent:a}))):!d.zb&&d.f&&(d.wa=q,d.d.popup.startHideTimer())}else d.Za=a});M(this.A,uf,function(){d.f!==k&&d.f!=q?d.d.fireEvent("onAnnotationClicked",d.f):d.d.gb||d.d.fireEvent("onNonAnnotationNonEditableClicked",
d.d)});c.addHandler("onMouseOutOfItem",function(){delete d.f;d.wa=l});c.addHandler("beforePopupHide",function(){if(!d.wa&&d.Za){var a=d.f;d.f=sf(d,d.Za.offsetX,d.Za.offsetY);d.wa=l;a!=d.f?(tf(d),d.d.fireEvent("onMouseOutOfAnnotation",{M:a,mouseEvent:d.Za}),d.d.fireEvent("onMouseOverAnnotation",{M:d.f,mouseEvent:d.Za})):d.f&&d.d.popup.clearHideTimer()}else tf(d)})}u=qf.prototype;
u.J=function(a,c){c&&(c==this.f&&delete this.f,E(this.va,c),delete this.Z[Jd(c.shapes[0])]);this.va.push(a);var d=a.shapes[0];if("pixel"!=d.units)var e=this,d=Id(d,function(a){return e.d.Aa(a)});this.Z[Jd(a.shapes[0])]=d;tf(this)};u.z=function(a){a==this.f&&delete this.f;E(this.va,a);delete this.Z[Jd(a.shapes[0])];tf(this)};u.t=function(){return Ha(this.va)};u.o=function(a){(this.f=a)?this.zb=l:this.d.popup.startHideTimer();tf(this);this.wa=l};
function sf(a,c,d){a=a.Oa(c,d);if(0<a.length)return a[0]}
u.Oa=function(a,c){var d=[],e=this;C(this.va,function(h){var f;f=e.Z[Jd(h.shapes[0])];if("rect"==f.type)f=a<f.geometry.x||c<f.geometry.y||a>f.geometry.x+f.geometry.width||c>f.geometry.y+f.geometry.height?q:l;else if("polygon"==f.type){f=f.geometry.points;for(var j=q,m=f.length-1,n=0;n<f.length;n++)f[n].y>c!=f[m].y>c&&a<(f[m].x-f[n].x)*(c-f[n].y)/(f[m].y-f[n].y)+f[n].x&&(j=!j),m=n;f=j}else f=q;f&&d.push(h)});y.sort.call(d,function(a,c){var d=e.Z[Jd(a.shapes[0])],m=e.Z[Jd(c.shapes[0])];return Fd(d)-
Fd(m)}||Ka);return d};function vf(a,c,d){var e=Fa(a.d.ea(),function(a){return a.getSupportedShapeType()==c.type});e?e.drawShape(a.ja,c,d):console.log("WARNING unsupported shape type: "+c.type)}function tf(a){a.ja.clearRect(0,0,a.A.width,a.A.height);C(a.va,function(c){c!=a.f&&vf(a,a.Z[Jd(c.shapes[0])])});if(a.f){var c=a.Z[Jd(a.f.shapes[0])];vf(a,c,l);c=Gd(c).geometry;a.d.popup.show(a.f,new zd(c.x,c.y+c.height+5))}}
u.sa=function(a){var c=this,d=[];C(this.va,function(a){d.push(c.Z[Jd(a.shapes[0])])});if(0<d.length){var e=function(){if(t){g2d.clearRect(0,0,h.A.width,h.A.height);for(var a=d.length-1;0<=a;a--)geom=d[a].geometry,g2d.beginPath(),g2d.lineJoin="round",g2d.lineWidth=f.outline_width,g2d.strokeStyle=f.outline,g2d.strokeRect(geom.x+f.outline_width/2,geom.y+f.outline_width/2,geom.width-f.outline_width,geom.height-f.outline_width),g2d.lineJoin="miter",g2d.lineWidth=f.stroke_width,g2d.strokeStyle="rgb(255,255,255)",
g2d.strokeRect(geom.x+f.outline_width+f.stroke_width/2,geom.y+f.outline_width+f.stroke_width/2,geom.width-2*f.outline_width-f.stroke_width,geom.height-2*f.outline_width-f.stroke_width),g2d.lineJoin="miter",g2d.lineWidth=f.hi_stroke_width,g2d.strokeStyle="rgba("+colour_in_rgb[0]+","+colour_in_rgb[1]+","+colour_in_rgb[2]+","+m+")",g2d.strokeRect(geom.x+f.outline_width+f.hi_stroke_width/2,geom.y+f.outline_width+f.hi_stroke_width/2,geom.width-2*f.outline_width-f.hi_stroke_width,geom.height-2*f.outline_width-
f.hi_stroke_width),g2d.closePath();m=n?m+0.025:m-0.025;0>=m?n=l:1<=m&&(n=q);requestAnimationFrame(e)}};g2d=c.ja;var h=c,f,j=Fa(c.d.ea(),function(a){return a.getSupportedShapeType()==d[0].type});f={outline:j.fc,stroke:j.hc,fill:j.$b,hi_outline:j.bc,hi_stroke:j.dc,hi_fill:j.ac,outline_width:j.gc,stroke_width:j.ic,hi_outline_width:j.cc,hi_stroke_width:j.ec};var m=0,n=l,t=l;ob(h.A,"annotorious-item-unfocus","annotorious-item-focus");setTimeout(function(){t=q;tf(h);ob(h.A,"annotorious-item-focus","annotorious-item-unfocus")},
a);a=f.hi_stroke;a=a.replace("#","");r=parseInt(a.substring(0,2),16);g=parseInt(a.substring(2,4),16);b=parseInt(a.substring(4,6),16);colour_in_rgb=result=[r,g,b];requestAnimationFrame(e)}};var wf="ontouchstart"in window,kf=!wf,of=wf?"touchstart":"mousedown",xf=wf?"touchenter":"mouseover",rf=wf?"touchmove":"mousemove",nf=wf?"touchend":"mouseup",yf=wf?"touchleave":"mouseout",uf=wf?"touchend":"click";function pf(a,c){var d=q;a.offsetX=a.offsetX?a.offsetX:q;a.offsetY=a.offsetY?a.offsetY:q;return d=(!a.offsetX||!a.offsetY)&&a.n.changedTouches?{x:a.n.changedTouches[0].clientX-ud(c).left,y:a.n.changedTouches[0].clientY-ud(c).top}:{x:a.offsetX,y:a.offsetY}};function zf(){}u=zf.prototype;u.init=function(a,c){this.fc="#111111";this.hc="#ffffff";this.$b=q;this.bc="#111111";this.dc="#FFDC00";this.ac=q;this.cc=this.ic=this.gc=1;this.ec=1.2;this.A=c;this.d=a;this.ja=c.getContext("2d");this.ja.lineWidth=1;this.pc=q};
u.kc=function(){var a=this,c=this.A;this.rc=M(this.A,rf,function(d){d=pf(d,c);if(a.pc){a.B={x:d.x,y:d.y};a.ja.clearRect(0,0,c.width,c.height);var d=a.B.x-a.L.x,e=a.B.y-a.L.y;a.drawShape(a.ja,{type:"rect",geometry:{x:0<d?a.L.x:a.B.x,y:0<e?a.L.y:a.B.y,width:Math.abs(d),height:Math.abs(e)},style:{}})}});this.sc=M(c,nf,function(d){var e=pf(d,c),h=a.getShape(),d=d.n?d.n:d;a.pc=q;h?(a.yb(),a.d.fireEvent("onSelectionCompleted",{mouseEvent:d,shape:h,viewportBounds:a.getViewportBounds(),annotorious:a.d,image:a.d.X})):
(a.d.fireEvent("onSelectionCanceled"),d=a.d.Oa(e.x,e.y),0<d.length&&a.d.o(d[0]))})};u.yb=function(){this.rc&&(N(this.rc),delete this.rc);this.sc&&(N(this.sc),delete this.sc)};u.getName=ba("rect_drag");u.getSupportedShapeType=ba("rect");
u.ha=function(a){a.hasOwnProperty("outline")&&(this.fc=a.outline);a.hasOwnProperty("stroke")&&(this.hc=a.stroke);a.hasOwnProperty("fill")&&(this.$b=a.fill);a.hasOwnProperty("hi_outline")&&(this.bc=a.hi_outline);a.hasOwnProperty("hi_stroke")&&(this.dc=a.hi_stroke);a.hasOwnProperty("hi_fill")&&(this.ac=a.hi_fill);a.hasOwnProperty("outline_width")&&(this.gc=a.outline_width);a.hasOwnProperty("stroke_width")&&(this.ic=a.stroke_width);a.hasOwnProperty("hi_outline_width")&&(this.cc=a.hi_outline_width);a.hasOwnProperty("hi_stroke_width")&&
(this.ec=a.hi_stroke_width)};u.startSelection=function(a,c){var d={x:a,y:c};this.pc=l;this.kc(d);this.L=new zd(a,c);this.d.fireEvent("onSelectionStarted",{offsetX:a,offsetY:c});P(document.body,"-webkit-user-select","none")};u.stopSelection=function(){this.yb();this.ja.clearRect(0,0,this.A.width,this.A.height);P(document.body,"-webkit-user-select","auto");delete this.B};
u.getShape=function(){if(this.B&&3<Math.abs(this.B.x-this.L.x)&&3<Math.abs(this.B.y-this.L.y)){var a=this.getViewportBounds(),a=this.d.Yb({x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top});return new Ed("rect",a)}};u.getViewportBounds=function(){var a,c;this.B.x>this.L.x?(a=this.B.x,c=this.L.x):(a=this.L.x,c=this.B.x);var d,e;this.B.y>this.L.y?(d=this.L.y,e=this.B.y):(d=this.B.y,e=this.L.y);return{top:d,right:a,bottom:e,left:c}};
u.drawShape=function(a,c,d){var e,h,f,j;c.style||(c.style={});"rect"==c.type&&(d?(e=c.style.hi_fill||this.ac,d=c.style.hi_stroke||this.dc,h=c.style.hi_outline||this.bc,f=c.style.hi_outline_width||this.cc,j=c.style.hi_stroke_width||this.ec):(e=c.style.fill||this.$b,d=c.style.stroke||this.hc,h=c.style.outline||this.fc,f=c.style.outline_width||this.gc,j=c.style.stroke_width||this.ic),c=c.geometry,h&&(a.lineJoin="round",a.lineWidth=f,a.strokeStyle=h,a.strokeRect(c.x+f/2,c.y+f/2,c.width-f,c.height-f)),
d&&(a.lineJoin="miter",a.lineWidth=j,a.strokeStyle=d,a.strokeRect(c.x+f+j/2,c.y+f+j/2,c.width-2*f-j,c.height-2*f-j)),e&&(a.lineJoin="miter",a.lineWidth=j,a.fillStyle=e,a.fillRect(c.x+f+j/2,c.y+f+j/2,c.width-2*f-j,c.height-2*f-j)))};function Af(a){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+Ze(a.width)+"px; height:"+Ze(a.height)+'px; z-index:0" width="'+Ze(a.width)+'" height="'+Ze(a.height)+'"></canvas>'}
function gf(a){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">'+Ze(a.Nb)+'</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'};function X(a,c){function d(c,d){P(e,"margin-"+c,d+"px");P(a,"margin-"+c,0);P(a,"padding-"+c,0)}this.X=a;this.ed={padding:a.style.padding,margin:a.style.margin};this.w=new vd;this.ka=[];this.gb=l;this.element=Ab("div","annotorious-annotationlayer");P(this.element,"position","relative");P(this.element,"display","inline-block");var e=this.element,h=hd(a,"margin"),f=hd(a,"padding");(0!=h.top||0!=f.top)&&d("top",h.top+f.top);(0!=h.right||0!=f.right)&&d("right",h.right+f.right);(0!=h.bottom||0!=f.bottom)&&
d("bottom",h.bottom+f.bottom);(0!=h.left||0!=f.left)&&d("left",h.left+f.left);(h=a.parentNode)&&h.replaceChild(this.element,a);this.element.appendChild(a);h=dd(a);this.la=Td(Af,{width:h.width,height:h.height});kf&&kb(this.la,"annotorious-item-unfocus");this.element.appendChild(this.la);this.c=Td(Af,{width:h.width,height:h.height});kf&&T(this.c,q);this.element.appendChild(this.c);this.popup=c?c:new jf(this);h=new zf;h.init(this,this.c);this.ka.push(h);this.v=h;this.editor=new ef(this);this.h=new qf(this.la,
this);this.bb=new ff(this,this.element);var j=this;kf&&(M(this.element,xf,function(a){a=a.relatedTarget;if(!a||!Fb(j.element,a))j.w.fireEvent("onMouseOverItem"),ob(j.la,"annotorious-item-unfocus","annotorious-item-focus")}),M(this.element,yf,function(a){a=a.relatedTarget;if(!a||!Fb(j.element,a))j.w.fireEvent("onMouseOutOfItem"),ob(j.la,"annotorious-item-focus","annotorious-item-unfocus")}));mf(this,wf?this.c:this.la);this.w.addHandler("onSelectionCompleted",function(a){a=a.viewportBounds;j.editor.setPosition(new zd(a.left+
j.X.offsetLeft,a.bottom+4+j.X.offsetTop))});this.w.addHandler("onSelectionCanceled",function(){kf&&T(j.c,q);j.v.stopSelection()})}x(X,lf);u=X.prototype;u.ba=s();u.gd=function(a){a.init(this,this.c);this.ka.push(a)};u.destroy=function(){var a=this.X;a.style.margin=this.ed.margin;a.style.padding=this.ed.padding;var c=this.element,d=c.parentNode;d&&d.replaceChild(a,c)};
u.Bc=function(a){this.h.z(a);var c=Fa(this.ka,function(c){return c.getSupportedShapeType()==a.shapes[0].type});if(c){T(this.c,l);this.h.o(q);var d=this.c.getContext("2d"),e=a.shapes[0],h=this,e="pixel"==e.units?e:Id(e,function(a){return h.Aa(a)});c.drawShape(d,e)}c=Gd(a.shapes[0]).geometry;c="pixel"==a.shapes[0].units?new zd(c.x,c.y+c.height):this.Aa(new zd(c.x,c.y+c.height));this.editor.setPosition(new zd(c.x+this.X.offsetLeft,c.y+4+this.X.offsetTop));this.editor.open(a)};
u.Aa=function(a){var c=bd(this.X);return a.width?{x:a.x*c.width,y:a.y*c.height,width:a.width*c.width,height:a.height*c.height}:{x:a.x*c.width,y:a.y*c.height}};u.na=aa("v");u.t=function(){return this.h.t()};u.Oa=function(a,c){return Ha(this.h.Oa(a,c))};u.ea=aa("ka");u.getItem=function(){return{src:Bf(this.X),element:this.X}};function Bf(a){var c=a.getAttribute("data-original");return c?c:a.src}u.fa=function(){T(this.la,q)};u.O=function(){this.gb=q;this.bb&&(this.bb.destroy(),delete this.bb)};
u.Nd=function(a){(this.v=Fa(this.ka,function(c){return c.getName()==a}))||console.log('WARNING: selector "'+a+'" not available')};u.ha=function(a){C(this.ka,function(c){c.ha(a)});tf(this.h)};u.Fa=function(){T(this.la,l)};u.aa=function(){this.gb=l;this.bb||(this.bb=new ff(this,this.element))};u.stopSelection=function(a){kf&&T(this.c,q);this.v.stopSelection();a&&this.h.J(a)};
u.Yb=function(a){var c=bd(this.X);return a.width?{x:a.x/c.width,y:a.y/c.height,width:a.width/c.width,height:a.height/c.height}:{x:a.x/c.width,y:a.y/c.height}};u.sa=function(a){this.h.sa(a)};X.prototype.redrawGlow=X.prototype.sa;X.prototype.addSelector=X.prototype.gd;X.prototype.stopSelection=X.prototype.stopSelection;X.prototype.fireEvent=X.prototype.fireEvent;X.prototype.setCurrentSelector=X.prototype.Nd;X.prototype.toItemCoordinates=X.prototype.Yb;function Cf(){Md(this,function(){return J("img.annotatable",document)})}x(Cf,Ld);Cf.prototype.Gb=function(a){return Bf(a)};Cf.prototype.Lc=function(a){return new X(a)};Cf.prototype.Xb=function(a){return Eb(a)?"IMG"==a.tagName:q};function Df(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint" style="width: 400px; margin:0px auto;">'+Ze(a.Nb)+"</dvi></div>"};function Ef(a,c){this.Y=a;this.T=dd(c.element);this.k=c.popup;P(this.k.element,"z-index",99E3);this.C=[];this.vb=new OpenLayers.Layer.Boxes("Annotorious");this.Y.addLayer(this.vb);var d=this;this.Y.events.register("move",this.Y,function(){d.I&&d.cb()});c.addHandler("beforePopupHide",function(){d.xa==d.I?d.k.clearHideTimer():d.ib(d.xa,d.I)})}u=Ef.prototype;u.destroy=function(){this.vb.destroy()};
u.cb=function(){var a=this.I.Mb.div,c=dd(a),d=Yc(a,this.Y.div),a=d.y,d=d.x,e=c.width,h=c.height,c=dd(this.k.element),a={y:a+h+5};d+c.width>this.T.width?(ob(this.k.element,"top-left","top-right"),a.x=d+e-c.width):(ob(this.k.element,"top-right","top-left"),a.x=d);0>a.x&&(a.x=0);a.x+c.width>this.T.width&&(a.x=this.T.width-c.width);a.y+c.height>this.T.height&&(a.y=this.T.height-c.height);this.k.setPosition(a)};u.vc=function(a){this.k.setAnnotation(a);this.cb();this.k.show()};
u.ib=function(a,c){a?(Yc(a.Mb.div,this.Y.div),Aa("height"),P(a.sb,"border-color","#fff000"),this.I=a,this.vc(a.M)):delete this.I;c&&P(c.sb,"border-color","#fff")};
u.J=function(a){var c=a.shapes[0].geometry,c=new OpenLayers.Marker.Box(new OpenLayers.Bounds(c.x,c.y,c.x+c.width,c.y+c.height));kb(c.div,"annotorious-ol-boxmarker-outer");P(c.div,"border",p);var d=Ab("div","annotorious-ol-boxmarker-inner");ad(d,"100%","100%");c.div.appendChild(d);var e={M:a,Mb:c,sb:d},h=this;M(d,"mouseover",function(){h.I||h.ib(e);h.xa=e});M(d,"mouseout",function(){delete h.xa;h.k.startHideTimer()});this.C.push(e);y.sort.call(this.C,function(a,c){return Fd(c.M.shapes[0])-Fd(a.M.shapes[0])}||
Ka);var f=1E4;C(this.C,function(a){P(a.Mb.div,"z-index",f);f++});this.vb.addMarker(c)};u.z=function(a){var c=Fa(this.C,function(c){return c.M==a});c&&(E(this.C,c),this.vb.removeMarker(c.Mb))};u.t=s();u.o=function(a){a||this.k.startHideTimer()};function Ff(a){function c(){var a=parseInt(R(e.element,"width"),10),c=parseInt(R(e.element,"height"),10);ad(e.c,a,c);e.c.width=a;e.c.height=c}this.Y=a;this.element=a.div;var d=this.element.style[Aa("position")]||"";"absolute"!=d&&"relative"!=d&&P(this.element,"position","relative");this.w=new vd;this.V=Td(Df,{Nb:"Click and Drag"});P(this.V,"z-index",9998);S(this.V,0);this.element.appendChild(this.V);this.popup=new jf(this);this.h=new Ef(a,this);this.c=Td(Af,{width:"0",height:"0"});T(this.c,q);P(this.c,
"position","absolute");P(this.c,"top","0px");P(this.c,"z-index",9999);this.element.appendChild(this.c);var e=this;c();this.v=new zf;this.v.init(this,this.c);this.hb=k;this.editor=new ef(this);P(this.editor.element,"z-index",1E4);window.addEventListener?window.addEventListener("resize",c,q):window.attachEvent&&window.attachEvent("onresize",c);M(this.element,"mouseover",function(a){a=a.relatedTarget;(!a||!Fb(e.element,a))&&e.w.fireEvent("onMouseOverItem")});M(this.element,"mouseout",function(a){a=a.relatedTarget;
(!a||!Fb(e.element,a))&&e.w.fireEvent("onMouseOutOfItem")});M(this.c,"mousedown",function(a){var c=Zc(e.element);e.v.startSelection(a.clientX-c.x,a.clientY-c.y)});this.w.addHandler("onSelectionCompleted",function(a){P(e.c,"pointer-events","none");a=a.viewportBounds;e.editor.setPosition(new zd(a.left,a.bottom+4));e.editor.open()});this.w.addHandler("onSelectionCanceled",function(){e.stopSelection()})}x(Ff,lf);u=Ff.prototype;u.aa=s();u.O=s();
u.ba=function(a){P(this.c,"pointer-events","auto");var c=this;T(this.c,l);S(this.V,0.8);window.setTimeout(function(){S(c.V,0)},2E3);a&&(this.hb=a)};u.destroy=function(){this.h.destroy();Db(this.V);Db(this.c)};u.gd=s();u.Bc=function(a){this.h.z(a);var c=this.v,d=this;if(c){T(this.c,l);this.h.o(k);var e=this.c.getContext("2d"),h=Id(a.shapes[0],function(a){return d.Aa(a)});console.log(h);c.drawShape(e,h);c=Gd(h).geometry;this.editor.setPosition(new zd(c.x,c.y+c.height));this.editor.open(a)}};
u.Aa=function(a){var c=this.Y.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return(a=a.width?this.Y.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x+a.width,a.y+a.height)):q)?{x:c.x,y:a.y,width:a.x-c.x+2,height:c.y-a.y+2}:{x:c.x,y:c.y}};u.t=function(){return this.h.t()};u.ea=s();u.getItem=function(){return{src:"map://openlayers/something"}};u.ub=s();
u.Yb=function(a){var c=this.Y.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return(a=a.width?new OpenLayers.Pixel(a.x+a.width-2,a.y+a.height-2):q)?(a=this.Y.getLonLatFromPixel(a),c={x:c.lon,y:a.lat,width:a.lon-c.lon,height:c.lat-a.lat},console.log(c),c):{x:c.lon,y:c.lat}};function Gf(){Md(this)}x(Gf,Ld);Gf.prototype.Gb=ba("map://openlayers/something");Gf.prototype.Lc=function(a){return new Ff(a)};Gf.prototype.Xb=function(a){return a instanceof OpenLayers.Map};function Hf(a,c){this.U=a;this.T=dd(a.element);this.k=c.popup;P(this.k.element,"z-index",99E3);this.C=[];var d=this;this.U.addHandler("animation",function(){d.I&&d.cb()});c.addHandler("beforePopupHide",function(){d.xa==d.I?d.k.clearHideTimer():d.ib(d.xa,d.I)})}u=Hf.prototype;
u.cb=function(){var a=this.U.element,c=this.I.Sb,d=dd(c),c=Yc(c,a),a=c.y,c=c.x,e=d.width,h=d.height,d=dd(this.k.element),a={x:c,y:a+h+12};ob(this.k.element,"top-right","top-left");this.U.isFullPage()||(c+d.width>this.T.width&&(ob(this.k.element,"top-left","top-right"),a.x=c+e-d.width),0>a.x&&(a.x=0),a.x+d.width>this.T.width&&(a.x=this.T.width-d.width),a.y+d.height>this.T.height&&(a.y=this.T.height-d.height));this.k.setPosition(a)};u.vc=function(a){this.k.setAnnotation(a);this.cb();this.k.show()};
u.ib=function(a,c){a?(P(a.sb,"border-color","#fff000"),this.I=a,this.vc(a.M)):delete this.I;c&&P(c.sb,"border-color","#fff")};
u.J=function(a){var c=a.shapes[0].geometry,d=Ab("div","annotorious-ol-boxmarker-outer"),e=Ab("div","annotorious-ol-boxmarker-inner");ad(e,"100%","100%");d.appendChild(e);var c=new OpenSeadragon.Rect(c.x,c.y,c.width,c.height),h={M:a,Sb:d,sb:e},f=this;M(e,"mouseover",function(){f.I||f.ib(h);f.xa=h});M(e,"mouseout",function(){delete f.xa;f.k.startHideTimer()});this.C.push(h);y.sort.call(this.C,function(a,c){return Fd(c.M.shapes[0])-Fd(a.M.shapes[0])}||Ka);var j=1;C(this.C,function(a){P(a.Sb,"z-index",
j);j++});this.U.drawer.addOverlay(d,c)};u.z=function(a){var c=Fa(this.C,function(c){return c.M==a});c&&(E(this.C,c),this.U.drawer.removeOverlay(c.Sb))};u.t=function(){return Da(this.C,function(a){console.log(a);return a.M})};u.o=s();u.destroy=function(){var a=this;C(this.C,function(c){a.U.removeOverlay(c.Sb)});this.C=[]};function If(a){this.element=a.element;var c=document;c.querySelectorAll&&c.querySelector?c=c.querySelector(".openseadragon-container"):(c=document,c=(c.querySelectorAll&&c.querySelector?c.querySelectorAll(".openseadragon-container"):c.getElementsByClassName?c.getElementsByClassName("openseadragon-container"):xb())[0]);P(c||p,"z-index",0);this.U=a;this.w=new vd;this.ka=[];this.gb=l;this.V=Td(Df,{Nb:"Click and Drag"});S(this.V,0);this.element.appendChild(this.V);this.popup=new jf(this);this.h=new Hf(a,
this);this.c=Td(Af,{width:"0",height:"0"});T(this.c,q);this.element.appendChild(this.c);var d=this,a=parseInt(R(d.element,"width"),10),c=parseInt(R(d.element,"height"),10);ad(d.c,a,c);d.c.width=a;d.c.height=c;a=new zf;a.init(this,this.c);this.ka.push(a);this.v=a;this.editor=new ef(this);mf(this,this.c);this.w.addHandler("onSelectionCompleted",function(a){a=a.viewportBounds;d.editor.setPosition(new zd(a.left,a.bottom+4));d.editor.open()});this.w.addHandler("onSelectionCanceled",function(){d.stopSelection()})}
x(If,lf);u=If.prototype;u.aa=s();u.O=s();u.destroy=function(){this.h.destroy();delete this.h};u.ba=function(a){P(this.c,"pointer-events","auto");var c=this;T(this.c,l);S(this.V,0.8);window.setTimeout(function(){S(c.V,0)},2E3);a&&(this.hb=a)};u.Bc=function(a){this.h.z(a);var c=this.v,d=this;if(c){T(this.c,l);this.h.o(k);var e=this.c.getContext("2d"),h=Id(a.shapes[0],function(a){return d.Aa(a)});c.drawShape(e,h);c=Gd(h).geometry;this.editor.setPosition(new zd(c.x,c.y+c.height+4));this.editor.open(a)}};
u.Aa=function(a){var c=ud(this.element);c.top+=window.pageYOffset;c.left+=window.pageXOffset;var d=new OpenSeadragon.Point(a.x,a.y),a=a.width?new OpenSeadragon.Point(a.x+a.width,a.y+a.height):q,d=this.U.viewport.viewportToWindowCoordinates(d);return a?(a=this.U.viewport.viewportToWindowCoordinates(a),{x:d.x-c.left,y:d.y-c.top,width:a.x-d.x+2,height:a.y-d.y+2}):d};u.t=function(){return this.h.t()};u.ea=s();u.getItem=function(){return{src:"dzi://openseadragon/something"}};u.ub=s();u.na=aa("v");
u.Yb=function(a){var c=ud(this.element);c.top+=window.pageYOffset;c.left+=window.pageXOffset;var d=new OpenSeadragon.Point(a.x+c.left,a.y+c.top),a=a.width?new OpenSeadragon.Point(a.x+c.left+a.width-2,a.y+c.top+a.height-2):q,d=this.U.viewport.windowToViewportCoordinates(d);return a?(a=this.U.viewport.windowToViewportCoordinates(a),{x:d.x,y:d.y,width:a.x-d.x,height:a.y-d.y}):d};function Jf(){Md(this)}x(Jf,Ld);Jf.prototype.Gb=ba("dzi://openseadragon/something");Jf.prototype.Lc=function(a){return new If(a)};Jf.prototype.Xb=function(a){return!a.id||0!=a.id.indexOf("openseadragon")||!a.hasOwnProperty("drawer")?q:l};function Y(){function a(){Kf(c)}this.Zc=q;this.m=[new Cf];window.OpenLayers&&this.m.push(new Gf);window.OpenSeadragon&&this.m.push(new Jf);this.eb=[];var c=this;window.addEventListener?window.addEventListener("load",a,q):window.attachEvent&&window.attachEvent("onload",a)}function Kf(a){a.Zc||(C(a.m,function(a){a.init()}),C(a.eb,function(c){c.initPlugin&&c.initPlugin(a);C(a.m,function(a){a.Ab(c)})}),a.Zc=l)}function Z(a,c){return Fa(a.m,function(a){return Sd(a,c)})}u=Y.prototype;
u.ba=function(a,c){var d=k,e=k;v(a)?(d=a,e=c):w(a)&&(e=a);if(d){var h=Z(this,d);h&&h.ba(d,e)}else C(this.m,function(a){a.ba(e)})};u.J=function(a,c){var d=Z(this,a.src);d&&d.J(a,c)};u.addHandler=function(a,c){C(this.m,function(d){d.addHandler(a,c)})};u.Ab=function(a,c){try{var d=new window.annotorious.plugin[a](c);"complete"==document.readyState?(d.initPlugin&&d.initPlugin(this),C(this.m,function(a){a.Ab(d)})):this.eb.push(d)}catch(e){console.log("Could not load plugin: "+a)}};
u.destroy=function(a){if(a){var c=Z(this,a);c&&c.destroy(a)}else C(this.m,function(a){a.destroy()})};u.na=function(a){var c=Z(this,a);if(c)return c.na(a)};u.t=function(a){if(a){var c=Z(this,a);return c?c.t(a):[]}var d=[];C(this.m,function(a){Ia(d,a.t())});return d};u.ea=function(a){var c=Z(this,a);return c?c.ea(a):[]};u.fa=function(a){if(a){var c=Z(this,a);c&&c.fa(a)}else C(this.m,function(a){a.fa()})};u.O=function(a){if(a){var c=Z(this,a);c&&c.O(a)}else C(this.m,function(a){a.O()})};
u.o=function(a){if(a){var c=Z(this,a.src);c&&c.o(a)}else C(this.m,function(a){a.o()})};u.Jc=function(a){Kf(this);var c=Fa(this.m,function(c){return c.Xb(a)});c?c.Jc(a):i("Error: Annotorious does not support this media type in the current version or build configuration.")};u.Tb=function(a){var c=this;C(this.t(a),function(a){c.z(a)})};u.z=function(a){var c=Z(this,a.src);c&&c.z(a)};u.Pc=function(a){var c=k;v(a)&&(c=a);c&&(c=Z(this,c))&&c.Pc(a)};u.reset=function(){C(this.m,function(a){a.destroy();a.init()})};
u.ub=function(a,c){var d=Z(this,a);d&&d.ub(a,c)};u.ha=function(a){C(this.m,function(c){c.ha(a)})};u.sa=function(a,c){if(a){var d=Z(this,a);d&&d.sa(a,c)}};u.oe=function(a){a?this.aa(k):this.O(k)};u.Fa=function(a){if(a){var c=Z(this,a);c&&c.Fa(a)}else C(this.m,function(a){a.Fa()})};u.aa=function(a){if(a){var c=Z(this,a);c&&c.aa(a)}else C(this.m,function(a){a.aa()})};window.anno=new Y;Y.prototype.activateSelector=Y.prototype.ba;Y.prototype.addAnnotation=Y.prototype.J;Y.prototype.addHandler=Y.prototype.addHandler;Y.prototype.addPlugin=Y.prototype.Ab;Y.prototype.destroy=Y.prototype.destroy;Y.prototype.getActiveSelector=Y.prototype.na;Y.prototype.getAnnotations=Y.prototype.t;Y.prototype.getAvailableSelectors=Y.prototype.ea;Y.prototype.hideAnnotations=Y.prototype.fa;Y.prototype.hideSelectionWidget=Y.prototype.O;Y.prototype.highlightAnnotation=Y.prototype.o;
Y.prototype.makeAnnotatable=Y.prototype.Jc;Y.prototype.removeAll=Y.prototype.Tb;Y.prototype.removeAnnotation=Y.prototype.z;Y.prototype.removeCurrentSelection=Y.prototype.Pc;Y.prototype.reset=Y.prototype.reset;Y.prototype.setActiveSelector=Y.prototype.ub;Y.prototype.setProperties=Y.prototype.ha;Y.prototype.showAnnotations=Y.prototype.Fa;Y.prototype.showSelectionWidget=Y.prototype.aa;Y.prototype.redrawGlow=Y.prototype.sa;window.annotorious||(window.annotorious={});
window.annotorious.plugin||(window.annotorious.plugin={});window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=Hd,window.annotorious.geometry.getBoundingRect=Gd);Y.prototype.setSelectionEnabled=Y.prototype.oe;
